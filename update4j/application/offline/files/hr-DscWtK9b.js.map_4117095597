{"version":3,"file":"hr-DscWtK9b.js","sources":["../../../../../src/main/javascript/hr/NoteDialog.tsx","../../../../../src/main/javascript/hr/NotesTab.tsx","../../../../../src/main/javascript/hr/TeamNotesDialog.tsx","../../../../../src/main/javascript/hr/TimingTab.tsx","../../../../../src/main/javascript/hr/ScoresheetTab.tsx","../../../../../src/main/javascript/hr/MatchTab.tsx","../../../../../src/main/javascript/hr/HrControlTab.tsx","../../../../../src/main/javascript/hr/MultiDivisionTimingTab.tsx","../../../../../src/main/javascript/hr/HeadRef.tsx","../../../../../src/main/javascript/hr/index.tsx"],"sourcesContent":["import {Button, Modal, Form} from \"react-bootstrap\";\nimport { t } from \"ftc-common/i18n\";\nimport { HrBasicMatch } from \"./HeadRef\";\nimport { HRMatchNote, HRMatchNoteItem } from \"../javaTypes\";\n\n\nfunction NoteItem({item, index, match, updateItem}: {\n    item: HRMatchNoteItem,\n    index: number,\n    match: HrBasicMatch | undefined,\n    updateItem: (i: number, changes: HRMatchNoteItem) => void\n}) {\n\n    const update = (changes: Partial<HRMatchNoteItem>) => updateItem(index, Object.assign({tags: []}, item, changes));\n    let tagBoxes;\n    if (match) {\n        tagBoxes = ([\"red\", \"blue\"] as const).map(a =>\n            <Form className={'d-flex justify-content-between'} style={{marginRight: '1em', padding: '0 5px 0 5px', backgroundColor: a === 'red' ? '#FFB2B2' : '#B2D7FF'}} key={a}> {\n                match?.[a].map(team => team && team.number > 0 ? <div className={'d-flex tagItem'} key={team.number}>\n                    <Form.Check id={`tag${index}${team.number}`} checked={item.tags?.includes(team.number)} onChange={(e) => update({tags: e.target.checked ? [...item.tags, team.number] : item.tags.filter(x => x !== team.number)})} label={team.displayNumber}/>\n                </div> : null)\n            } </Form>);\n    } else {\n        tagBoxes = <Form className={'d-flex justify-content-between'} style={{marginRight: '1em', padding: '0 5px 0 5px'}}> {\n            item.tags.map(team => team && team > 0 ? <div className={'d-flex tagItem'} key={team}>\n                <Form.Check id={`tag${index}${team}`} checked={true} disabled={true} label={team}/>\n            </div> : null)\n        } </Form>;\n    }\n\n\n    return <Form.Group>\n        <Form.Label className={\"drop\"}>{t`Detail:`}</Form.Label>\n        <Form.Control type={\"text\"} disabled={!match} value={item?.content || ''} onChange={(e) => update({'content': e.target.value})}/>\n        <div className={\"d-flex justify-content-left flex-wrap\"} style={{marginTop: '.2em'}}>\n            <span style={{marginRight: '1em'}}>{t`Tags:`}</span>\n            {tagBoxes}\n        </div>\n    </Form.Group>\n}\n\nexport default function NoteDialog({show, setShow, match, note, setNote, send}: {\n    show: boolean,\n    setShow: (show: boolean) => void,\n    match: HrBasicMatch | undefined,\n    note: HRMatchNote | undefined,\n    setNote: (note: HRMatchNote) => void,\n    send: (message: string) => void\n}) {\n    if (!note) {\n        return null;\n    }\n    const updateItem = (i: number, changes: HRMatchNoteItem) => {\n        if (!match) {\n            return;\n        }\n        let newNote = Object.assign({}, note);\n        if (!newNote.items) {\n            newNote.items = [];\n        }\n        newNote.items[i] = Object.assign({}, changes);\n        setNote(newNote);\n    }\n\n    const items = note.items?.map((item, i) => <NoteItem item={item} index={i} match={match} key={i} updateItem={updateItem}/>) || [];\n    if (match) {\n        const next = note.items?.length ?? 0;\n        items.push(<NoteItem index={next} match={match} key={next} updateItem={updateItem} item={{content: '', tags: []}}/>);\n    }\n    let summary;\n    let footer;\n    if (match) {\n        const redTeams = match?.red.filter(x => x && x.number > 0).map(x => x.displayNumber).join(\", \");\n        const blueTeams = match?.blue.filter(x => x && x.number > 0).map(x => x.displayNumber).join(\", \");\n        summary = <>\n            <Form.Label>{t`Red: ${redTeams} `}</Form.Label>\n            <br/>\n            <Form.Label>{t`Blue: ${blueTeams} `}</Form.Label>\n            <br/>\n        </>;\n        footer = <>\n            <Button variant={\"secondary\"} onClick={() => setShow(false)}>{t`Cancel`}</Button>\n            <Button variant={\"primary\"} onClick={() => {\n                send(JSON.stringify({type: 'NOTE', note: note}));\n                setShow(false);\n            }}>{t`Save`}</Button>\n        </>;\n    } else {\n        summary = <Form.Label>This note is from a match that is not part of the current event's match schedule and is read-only.</Form.Label>;\n        footer = <Button variant={\"secondary\"} onClick={() => setShow(false)}>{t`Done`}</Button>;\n    }\n    return <Modal show={show} onHide={() => setShow(false)} size=\"lg\" className=\"noteModal\">\n        <Modal.Header closeButton>\n            <Modal.Title>{t`Match Note`}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n            <Form.Label>{t`Match: ${note.match}`}</Form.Label><br/>\n            {summary}\n            <Form.Label className={\"drop\"}>{t`General/Summary:`}</Form.Label>\n            <Form.Control type={\"text\"} value={note.summary || ''} disabled={!match} onChange={(e) => match ? setNote(Object.assign({}, note, {'summary': e.target.value})) : null}/>\n            {items}\n        </Modal.Body>\n        <Modal.Footer>\n            {footer}\n        </Modal.Footer>\n    </Modal>\n}","import './NotesTab.css';\nimport {useState} from \"react\";\nimport ReactQuill from \"react-quill\";\nimport 'react-quill/dist/quill.snow.css';\nimport { HRMatchNote } from \"../javaTypes\";\nimport { HrMeetingNoteType } from \"ftc-common/javaTypes\";\nimport { t } from \"ftc-common/i18n\";\nimport { HrBasicMatch, ShowNote, TeamNote } from \"./HeadRef\";\n\nfunction MatchView({notes, matchList, showNote}: {\n    notes: Record<string, HRMatchNote>,\n    matchList: HrBasicMatch[],\n    showNote: ShowNote\n}) {\n    const getOneLiner = (note: HRMatchNote) => {\n        /* Returns what to show in the match notes table - if summary exists, show that. Else show either the note or the number of notes */\n        if (note.summary && note.summary.length > 0) {\n            return note.summary\n        }\n        /* If only one item and no summary, show that item */\n        if (note.items.length === 1) {\n            const tags = note.items[0].tags.length > 0 ? '[' + note.items[0].tags.join(\", \") + '] ' : '';\n            return tags + note.items[0].content;\n        } else if (note.items.length > 1) {\n            return '[' + note.items.length + ' notes]';\n        }\n        return '';\n    }\n    const fullMatchList: (HrBasicMatch | { shortName: string, fake: true })[] = [...matchList];\n    // reverse the sort so that inserting at the front is correct for the missing matches\n    for (const matchNote of Object.values(notes).sort((a,b) => -matchSortShortname(a.match, b.match))) {\n        if (matchNote.match === 'G') {\n            continue;\n        }\n        if (fullMatchList.filter(x => matchNote.match === x.shortName).length === 0) {\n            // We don't have the match that this note belongs to - fake it\n            fullMatchList.splice(0, 0, {'shortName': matchNote.match, 'fake': true})\n        }\n    }\n    const rows = fullMatchList.map(match => <tr key={match.shortName} onClick={() => showNote(notes?.[match.shortName] ?? {match: match.shortName, items: []})}>\n        <th>{match.shortName}</th>\n        <td>{notes[match.shortName] ? getOneLiner(notes[match.shortName]) : null}</td>\n    </tr>);\n\n    return <>\n        <div className=\"text-center\">{t`Tap on a row to open the notes for that match.`}</div>\n        <table id=\"notesTable\" className=\"table\">\n            <thead>\n                <tr id=\"notesHeader\"><th>{t`Match`}</th><th>{t`Notes`}</th></tr>\n            </thead>\n            <tbody>\n                {rows}\n            </tbody>\n        </table>\n    </>;\n}\n\n/**\n * Modified from the one in FTA Notepad to accommodate the 'G'\n */\nfunction matchSortShortname(a: string, b: string) {\n    const a_last_space = a.lastIndexOf(' ');\n    let orig_a_part = '';\n    if (a_last_space > -1) {\n        orig_a_part = a.substring(0, a_last_space);\n        a = a.substring(a_last_space + 1);\n    }\n    const b_last_space = b.lastIndexOf(' ');\n    let orig_b_part = '';\n    if (b_last_space > -1) {\n        orig_b_part = b.substring(0, b_last_space);\n        b = b.substring(b_last_space + 1);\n    }\n    const sfNum = (m: string) => (m[2] === \"1\" ? 1 : 2) + parseInt(m.substring(4));\n    if (orig_a_part.length > 0 && orig_a_part !== orig_b_part) {\n        return orig_a_part.localeCompare(orig_b_part);\n    }\n    if (a[0] === b[0]) {\n        return a[0] === 'S' ? sfNum(a) - sfNum(b) : (parseInt(a.substring(1)) - parseInt(b.substring(1)));\n    } else {\n        const toLevel = (m: string) => m[0] === 'G' ? -1 : (m[0] === 'Q' ? 0 : (m[0] === 'S' ? 1 : 2));\n        return toLevel(a) - toLevel(b);\n    }\n}\n\nexport function notesByTeam(notes: Record<string, HRMatchNote>) {\n    /*\n     * Notes are keyed by match. Need the note items extracted and keyed by tagged team\n     */\n    const teamMap = new Map<number, TeamNote[]>();\n    // Order not guaranteed here! Need to re-sort.\n    for (let note of Object.values(notes).sort((a,b) => matchSortShortname(a.match, b.match))) {\n        for (let item of note.items) {\n            for (let team of item.tags) {\n                const noteSummary = (note.hasOwnProperty('summary') ? note.summary : '');\n                const itemContent = (item.hasOwnProperty('content') ? item.content : '');\n                // If we have both a noteSummary and itemContent, put a separator between them\n                const separator = (noteSummary?.length ?? 0) > 0 && (itemContent?.length ?? 0) > 0 ? '; ' : '';\n                const contentToShow = noteSummary + separator + itemContent;\n                teamMap.set(team, [...(teamMap.get(team) ?? []), {match: note.match, content: contentToShow, others: item.tags.filter(x => x !== team)}]);\n            }\n        }\n    }\n    return teamMap\n}\n\n\nfunction TeamView({notes, matchList, showNote}: {\n    notes: Record<string, HRMatchNote>,\n    matchList: HrBasicMatch[],\n    showNote: ShowNote\n}) {\n    const teamMap = notesByTeam(notes);\n    // Round-trip through JSON to uniquify objects\n    const teams = [... new Set(matchList.flatMap(x => [...x.red, ...x.blue].map(x => JSON.stringify(x))))].map(x => JSON.parse(x)).filter(x => x && x.number > 0).sort((a,b) => a.number - b.number);\n\n    const renderTeamRowContent = (notes: TeamNote[]) => {\n        return notes.length === 0 ? \"\" : notes.map((x, idx) => <div key={idx}>{`${x.match}: ${x.content}`}</div>);\n    }\n    const rows = teams.map(team => <tr key={team.number} onClick={() => showNote(notes, 'team', team)}>\n        <th>{team.displayNumber}</th>\n        <td>{renderTeamRowContent(teamMap.get(team.number) ?? [])}</td>\n    </tr>);\n    return <>\n        <div className=\"text-center\">{t`Tap on a row to open the notes for that team.`}</div>\n        <table id=\"notesTable\" className=\"table\">\n            <thead>\n                <tr id=\"notesHeader\"><th>{t`Team`}</th><th>{t`Notes`}</th></tr>\n            </thead>\n            <tbody>\n                {rows}\n            </tbody>\n        </table>\n    </>;\n}\n\nfunction MeetingNote({type, note, setNote, meetingNotes, send}: {\n    type: HrMeetingNoteType,\n    note: string,\n    setNote: (note: string) => void,\n    meetingNotes: Partial<Record<HrMeetingNoteType, string>>,\n    // TODO: eventually type this\n    send: (message: string) => void\n}) {\n    const [editing, setEditing] = useState(false);\n    const meetingInfo = MEETINGS.find(x => x.type === type);\n    if(!meetingInfo) {\n        console.error(`Could not find meeting of type ${type}`)\n        return <>An error occurred</>\n    }\n    const label = meetingInfo.label;\n\n    // TODO have a page in cloud to enter the default text\n    return <>\n        <h4 className={\"text-center\"}>{t`${label} Meeting Notes`}</h4>\n        {editing ? <ReactQuill theme=\"snow\" value={note ?? \"\"} onChange={(content) => {\n            setNote(content);\n        }} />: <div dangerouslySetInnerHTML={{__html: note}} /> }\n        <div className={\"d-flex justify-content-end meetingEditBtns\"}>\n            <button className={\"btn btn-secondary\"} hidden={!editing} onClick={() => {\n                setNote(meetingNotes[type] || '');\n                setEditing(false);\n            }}>{t`Discard`}</button>\n            <button className={\"btn btn-primary\"} hidden={editing} onClick={() => setEditing(true)}> {t`Edit`}</button>\n            <button className={\"btn btn-primary\"} hidden={!editing} onClick={() => {\n                send(JSON.stringify({type: \"MEETING_NOTE\", meeting: type, content: note }));\n                setEditing(false);\n            }}> {t`Save`}</button>\n        </div>\n    </>\n}\n\nconst MEETINGS = [{type: HrMeetingNoteType.REFEREE, label: t`Referee`}, {type: HrMeetingNoteType.DRIVER, label: t`Drivers`}, {type: HrMeetingNoteType.CAPTAIN, label: t`Captains`}, {type: HrMeetingNoteType.OTHER, label: t`Other`}];\n\nexport default function NotesTab({notes, meetingNotes, matchList, send, showNote}: {\n    notes: Record<string, HRMatchNote>,\n    meetingNotes: Partial<Record<HrMeetingNoteType, string>>,\n    matchList: HrBasicMatch[],\n    // TODO: eventually type this\n    send: (message: string) => void,\n    showNote: ShowNote\n}) {\n    // TODO render rule references once we distribute pdf viewer - cold also have a \"Manuals\" tab with pdfjs embedded that render the manual\n\n    const [subTab, setSubTab] = useState('match');\n    const [meeting, setMeeting] = useState(HrMeetingNoteType.REFEREE);\n    const [meetingNote, setMeetingNote] = useState('');\n\n    let content = null;\n    if (subTab === 'match') {\n        content = <MatchView notes={notes} matchList={matchList} showNote={showNote}/>;\n    } else if (subTab === 'team') {\n        content = <TeamView notes={notes} matchList={matchList} showNote={showNote}/>;\n    } else if (subTab === \"meeting\") {\n        content = <MeetingNote type={meeting} note={meetingNote} setNote={setMeetingNote} meetingNotes={meetingNotes} send={send}/>\n    }\n\n    const showMeetingNote = (type: HrMeetingNoteType) => {\n        setMeetingNote(meetingNotes[type] || '');\n        setSubTab(`meeting`);\n        setMeeting(type);\n    }\n    const dropdowns = MEETINGS.map(m => <a key={m.type} className={`dropdown-item ${subTab === `meeting_${m.type}` ? 'current' : null}`} href=\"#\" onClick={() => showMeetingNote(m.type)}>{m.label}</a>);\n\n    return <div id=\"notes\" className=\"tab-pane fade show\" role=\"tabpanel\">\n        <div className={\"d-flex justify-content-center noteSelectBtns\"} style={{padding: '10px'}}>\n            <button className={`btn ${subTab === 'match' ? 'btn-outline-secondary' : 'btn-secondary'}`} onClick={() => setSubTab('match')}>{t`By Match`}</button>\n            <button className={`btn ${subTab === 'team' ? 'btn-outline-secondary' : 'btn-secondary'}`} onClick={() => setSubTab('team')}>{t`By Team`}</button>\n            <div className={\"dropdown\"}>\n                <button id={\"meetingDropdown\"} className={`btn btn-secondary dropdown-toggle`} data-toggle=\"dropdown\" aria-haspopup=\"true\">{t`Meeting`}</button>\n                <div className=\"dropdown-menu\" aria-labelledby=\"meetingDropdown\"> {dropdowns} </div>\n            </div>\n        </div>\n        {content}\n    </div>\n}","import {useEffect, useState} from \"react\";\nimport {Button, Modal, Form} from \"react-bootstrap\";\nimport { HRMatchNote } from \"../javaTypes\";\nimport { t } from \"ftc-common/i18n\";\nimport { HrBasicMatch, ShowNote, TeamNote } from \"./HeadRef\";\n\nexport default function TeamNotesDialog({show, setShow, notes, noteList, matchList, showNote, send}: {\n    show: boolean,\n    setShow: (show: boolean) => void,\n    notes?: {team: {number: number, displayNumber: string, cards?: string[]}, notes: TeamNote[]},\n    noteList: Record<string, HRMatchNote>,\n    showNote: ShowNote,\n    matchList: HrBasicMatch[],\n    // TODO: eventually type this\n    send: (message: string) => void,\n}) {\n    function getGeneralNote(noteList: Record<string, HRMatchNote>, team?: number) {\n        if(!team) return \"\";\n        return noteList.G?.items.find(x => x.tags.includes(team))?.content ?? \"\";\n    }\n\n    const [initialGeneral, setInitialGeneral] = useState(getGeneralNote(noteList));\n    const [general, setGeneral] = useState(initialGeneral);\n\n    useEffect(() => {\n        const init = getGeneralNote(noteList, notes?.team?.number);\n        setGeneral(init);\n        setInitialGeneral(init)\n    }, [notes]); //clear the input on change of team (notes.team)\n\n    if(!notes) {\n        return null\n    }\n\n    const fullMatchList: (HrBasicMatch | { shortName: string, fake: true })[] = [...matchList];\n    for (const matchNoteIndex in notes.notes) {\n        const matchNote = notes.notes[matchNoteIndex];\n        if (matchNote.match === 'G') {\n            continue;\n        }\n        if (fullMatchList.filter(x => matchNote.match === x.shortName).length === 0) {\n            // We don't have the match that this note belongs to - fake it\n            fullMatchList.splice(0, 0, {'shortName': matchNote.match, 'fake': true})\n        }\n    }\n\n    const rows = fullMatchList.map(match => <tr key={match.shortName} style={{border: '1px solid gray', width: '100%'}} onClick={() => match.hasOwnProperty('fake') ? null : showNote(noteList?.[match.shortName] ?? {match: match.shortName, items: []})}>\n        <th className=\"h6 align-top\" style={{maxWidth: '7ch', padding: '5px 10px 10px 0'}}>{match.hasOwnProperty('fake') ? match.shortName + \":\" : <a href={'#'} onClick={e => e.preventDefault()}>{match.shortName + \":\"}</a>}</th>\n        <td style={{fontSize: '1.2em'}}> {\n            notes.notes.filter(x => x.match === match.shortName)\n                .map((item, idx) => <div key={idx}>{item.content}{item.others.length > 0 ? <> [+{item.others.map((t,i) => <>{i > 0 ? ', ' : null}<a href={'#'} key={t} onClick={(e) => { e.preventDefault(); showNote(noteList, 'team', { number: t, displayNumber: t.toString() }) }}>{t}</a></>)}] </> : null}</div>)\n        } </td>\n    </tr>);\n\n    const displayNumber = notes.team?.displayNumber;\n    const cardList = notes.team?.cards?.join(', ')\n\n    return <Modal show={show} onHide={() => setShow(false)} size=\"lg\" className=\"noteModal\">\n        <Modal.Header closeButton>\n            <Modal.Title>{t`Team ${displayNumber} Match Notes`}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n            {cardList ? <div className=\"alert alert-warning\">{t`This team has received cards in matches: ${cardList}`}</div> : null}\n            <Form.Label className={\"drop\"}>{t`General/Summary:`}</Form.Label>\n            <Form.Control type={\"text\"} value={general} onChange={(e) => setGeneral((e.target as HTMLInputElement).value)}/>\n            <br/>\n            <table style={{borderCollapse: 'collapse', width: '100%'}}>\n                {rows}\n            </table>\n        </Modal.Body>\n        <Modal.Footer>\n            <Button variant={\"secondary\"} hidden={initialGeneral === general} onClick={() => setShow(false)}>{t`Cancel`}</Button>\n            <Button variant={\"primary\"} hidden={initialGeneral === general} onClick={() => {\n                const generalNote = noteList.G ?? {match: 'G', items: []};\n                const item = generalNote.items.find(x => x.tags.includes(notes.team.number));\n                if (!item) {\n                    generalNote.items.push({content: general, tags: [notes.team.number]});\n                } else {\n                    item.content = general;\n                }\n                send(JSON.stringify({type: 'NOTE', note: generalNote}))\n                setShow(false);\n            }}>{t`Save`}</Button>\n            <Button variant={\"secondary\"} hidden={initialGeneral !== general} onClick={() => setShow(false)}>{t`Close`}</Button>\n        </Modal.Footer>\n    </Modal>\n}\n","import {Button} from \"react-bootstrap\";\nimport {TimerData, useInterval, useTimer} from \"ftc-common/hooks\";\nimport {renderTime} from \"ftc-common/utils\";\nimport {Match, MatchType} from \"../javaTypes\";\nimport {AllianceLastMatchTimeout, LastOnFieldTimeout, ScheduledStartTimeout, T206Timeout, TimeoutReference, TimeoutType} from \"ftc-common/javaTypes\";\nimport {confirmDialog, messageDialog} from \"first-common/dialogs\";\nimport {CSSProperties, useState} from \"react\";\nimport {t} from \"ftc-common/i18n\";\nimport {isG301Timeout, isT206DependencyTimeout, isT206Timeout} from \"ftc-common/timeoutUtils\";\nimport {HrBasicMatch, HrMatch} from \"./HeadRef\";\n\nexport function timeString(timestamp: number) {\n    return new Date(timestamp).toLocaleTimeString().split(\" \")[0]; // strip AM/PM\n}\n\nfunction getTimeoutTargetMatch(timeout: TimeoutReference, matchList : HrBasicMatch[], nextMatch? : Match ) {\n    // WARNING: CANNOT USE MATCH NUMBER TO INFER ORDER FOR PLAYOFFS! TIEBREAKERS ARE DIFFERENT\n    const isLaterMatch = (a: HrBasicMatch, b: any) => (a.round ?? 0) > (b.round ?? 0) || ((a.round ?? 0) === (b.round ?? 0) && a.number > b.number);\n    switch (timeout.type) {\n        case TimeoutType.LAST_ON_FIELD :\n            const lof = timeout as LastOnFieldTimeout;\n            let isNext = nextMatch?.field === lof.field; // update on OOO load\n            let nextScheduled = matchList.find(x => isLaterMatch(x, {number: lof.srcMatch, round: lof.srcRound}) && x.field === lof.field);\n            return isNext ? nextMatch : nextScheduled;\n        case TimeoutType.SCHEDULED_START:\n            return matchList.find(m => m.number === (timeout as ScheduledStartTimeout).match);\n        case TimeoutType.T206:\n        case TimeoutType.G301:\n            return nextMatch;\n        case TimeoutType.ALLIANCE_LAST:\n            const almt = timeout as AllianceLastMatchTimeout;\n            return matchList.find(m => isLaterMatch(m,{number: almt.srcMatch, round: almt.srcRound}) && (m.redSeed === almt.seed || m.blueSeed === almt.seed));\n        case TimeoutType.T206_MATCH_DEPENDENCY:\n        case TimeoutType.RUNNING_MATCH:\n            return undefined;\n    }\n}\n\nfunction TimeoutDetailRow({timeout, nowCallback, selected, targetMatch}: {\n    timeout: TimeoutReference,\n    nowCallback: () => number,\n    selected?: TimeoutReference,\n    targetMatch?: HrBasicMatch,\n}) {\n    const timer = useTimer({\n        startAt: timeout.timeoutStart,\n        duration: timeout.timeoutDuration / 1000,\n        nowCallback: nowCallback\n    })\n    const Time = ({timer}: {timer: TimerData}) =>  <span style={selected == timeout ? {backgroundColor: \"lime\"} : undefined}>{renderTime(timer.remaining)}</span>;\n    const Duration = ({d}: {d: number | undefined}) => d ? <span>{renderTime(d / 1000)}</span> : \"-\";\n    let onRowClick = () => {\n        if (targetMatch) {\n            const redSeed = targetMatch.redSeed;\n            const blueSeed = targetMatch.blueSeed;\n            const red1 = targetMatch.red[0].displayNumber;\n            const red2 = targetMatch.red[1].displayNumber;\n            const red3 = targetMatch.red[2]?.displayNumber;\n            const blue1 = targetMatch.blue[0].displayNumber;\n            const blue2 = targetMatch.blue[1].displayNumber;\n            const blue3 = targetMatch.blue[2]?.displayNumber;\n            messageDialog({label: targetMatch.name, dangerous: true, text: `<table>\n                    <tbody>\n                        ${redSeed ? `<tr><td>Red:</td><td>A${redSeed}</td></tr>` : \"\"}\n                        <tr><td>Red 1:</td><td>${red1}</td></tr>\n                        <tr><td>Red 2:</td><td>${red2}</td></tr>\n                        ${red3 ? <tr><td>Red 3:</td><td>${red3}</td></tr> : \"\"}\n                        ${blueSeed ? `<tr><td>Blue:</td><td>A${blueSeed}</td></tr>` : \"\"}\n                        <tr><td>Blue 1:</td><td>${blue1}</td></tr>\n                        <tr><td>Blue 2:&nbsp;</td><td>${blue2}</td></tr>\n                        ${blue3 ? <tr><td>Blue 3:</td><td>${blue3}</td></tr> : \"\"}\n                    </tbody>\n                </table>                    \n            `});\n        }\n    };\n    switch (timeout.type) {\n        case TimeoutType.LAST_ON_FIELD :\n            return <tr onClick={onRowClick}>\n                <td>{targetMatch?.shortName}</td>\n                <td>{timeout.description}</td>\n                <td>{timeString(timeout.timeoutStart)}</td>\n                <td><Duration d={timeout.timeoutDuration}/></td>\n                <td>{timeString(timeout.timeoutStart + timeout.timeoutDuration)}</td>\n                <td><Time timer={timer}/></td>\n            </tr>\n        case TimeoutType.RUNNING_MATCH :\n            return <tr onClick={onRowClick}>\n                <td></td>\n                <td>{timeout.description}</td>\n                <td>{timeString(timeout.timeoutStart)} </td>\n                <td><Duration d={timeout.timeoutDuration}/></td>\n                <td>{timeString(timeout.timeoutStart + timeout.timeoutDuration)}</td>\n                <td><Time timer={timer}/></td>\n            </tr>\n        case TimeoutType.T206:\n            if ((timeout as T206Timeout).awaitingScorePost) {\n                return <tr onClick={onRowClick}>\n                    <td>{targetMatch?.shortName}</td>\n                    <td>{t`Back-to-back for `}{(timeout as T206Timeout).teams.join(\",\")}</td>\n                    <td className={\"alert-warning\"}>{timeout.description.split(\" \")[0]} Post</td>\n                    <td><Duration d={timeout.timeoutDuration}/></td>\n                    <td></td>\n                    <td><span style={selected === timeout ? {backgroundColor: 'lime'} : undefined}>{t`TBD`}</span></td>\n                </tr>\n            } else {\n                return <tr onClick={onRowClick}>\n                    <td>{targetMatch?.shortName}</td>\n                    <td>{t`Back-to-back for `}{(timeout as T206Timeout).teams.join(\",\")}</td>\n                    <td>{timeString(timeout.timeoutStart)}</td>\n                    <td><Duration d={timeout.timeoutDuration}/></td>\n                    <td>{timeString(timeout.timeoutStart + timeout.timeoutDuration)}</td>\n                    <td><Time timer={timer}/></td>\n                </tr>\n            }\n        case TimeoutType.T206_MATCH_DEPENDENCY:\n            return <tr onClick={onRowClick}>\n                <td></td>\n                <td>[{t`Depends on outcome`}]</td>\n                <td className={\"alert-warning\"}>{timeout.description.split(\" \")[0]} Post</td>\n                <td><Duration d={timeout.timeoutDuration}/></td>\n                <td></td>\n                <td><span style={selected === timeout ? {backgroundColor: 'lime'} : undefined}>{t`TBD`}</span></td>\n            </tr>\n        case TimeoutType.ALLIANCE_LAST:\n            // TODO maybe show their next match in the future / strike-through eliminated\n            return <tr onClick={onRowClick}>\n                <td>{targetMatch?.shortName}</td>\n                <td>{timeout.description}</td>\n                <td>{timeString(timeout.timeoutStart)}</td>\n                <td><Duration d={timeout.timeoutDuration}/></td>\n                <td>{timeString(timeout.timeoutStart + timeout.timeoutDuration)}</td>\n                <td><Time timer={timer}/></td>\n            </tr>\n        case TimeoutType.G301:\n            return <tr onClick={onRowClick}>\n                <td className={\"alert-danger\"}>{targetMatch?.shortName}</td>\n                <td className={\"alert-danger\"}>{timeout.description}</td>\n                <td>{timeString(timeout.timeoutStart)}</td>\n                <td><Duration d={timeout.timeoutDuration}/></td>\n                <td>{timeString(timeout.timeoutStart + timeout.timeoutDuration)}</td>\n                <td><Time timer={timer}/></td>\n            </tr>\n        case TimeoutType.SCHEDULED_START:\n            return <tr onClick={onRowClick}>\n                <td>{targetMatch?.shortName}</td>\n                <td>{t`Scheduled Time`}</td>\n                <td></td>\n                <td></td>\n                <td>{timeString(timeout.timeoutStart + timeout.timeoutDuration)}</td>\n                <td><Time timer={timer}/></td>\n            </tr>\n    }\n}\n\nfunction isApplicableTimeout(nextMatch: Match, timeout: TimeoutReference) {\n    switch (timeout.type) {\n        case TimeoutType.G301:\n            return false;\n        case TimeoutType.SCHEDULED_START: return (timeout as ScheduledStartTimeout).match === nextMatch?.number;\n        case TimeoutType.T206: return (timeout as T206Timeout).targetMatch === nextMatch.number;\n        case TimeoutType.LAST_ON_FIELD: return (timeout as LastOnFieldTimeout).field === nextMatch.field;\n        case TimeoutType.ALLIANCE_LAST: return [nextMatch.red.seed, nextMatch.blue.seed].includes((timeout as AllianceLastMatchTimeout).seed);\n        case TimeoutType.RUNNING_MATCH: return true;\n        case TimeoutType.T206_MATCH_DEPENDENCY: return true;\n    }\n}\n\nfunction getTimeoutTypeOrder(type: TimeoutType) {\n    switch(type) {\n        case TimeoutType.G301: return 0;\n        case TimeoutType.SCHEDULED_START: return 1;\n        case TimeoutType.T206_MATCH_DEPENDENCY: return 2;\n        case TimeoutType.T206: return 3;\n        case TimeoutType.LAST_ON_FIELD: return 4;\n        case TimeoutType.ALLIANCE_LAST: return 5;\n        case TimeoutType.RUNNING_MATCH: return 6;\n    }\n}\n\nexport function getActiveStartTimer(nextMatch: Match, timeouts: TimeoutReference[], nowCallback: () => number) {\n    let applicable = timeouts.filter(to => isApplicableTimeout(nextMatch, to));\n    if (applicable.length === 0) {\n        return undefined;\n    }\n    const getTimeoutEnd = (to: TimeoutReference) => ((isT206Timeout(to) && (to as T206Timeout).awaitingScorePost) || isT206DependencyTimeout(to) ? nowCallback() : to.timeoutStart) + to.timeoutDuration;\n\n    return applicable.reduce((p, c) => {\n        if (p && getTimeoutEnd(p) > getTimeoutEnd(c)) {\n            return p;\n        }\n        return c;\n    });\n}\n\nexport function MatchSorter(a : HrBasicMatch, b: HrBasicMatch) {\n    if (a.round && !b.round) return -1;\n    if (!a.round && b.round) return 1;\n    if (a.round && b.round && a.round !== b.round) {\n        return a.round - b.round;\n    }\n    return a.number - b.number;\n}\n\nexport default function TimingTab({field, activeMatch, matchList, timeouts, nextMatch, send, nowCallback} : {\n    field: number,\n    activeMatch?: HrMatch,\n    matchList: HrBasicMatch[],\n    timeouts: TimeoutReference[],\n    nextMatch?: HrMatch,\n    send: (payload: string) => void,\n    nowCallback: () => number\n}) {\n    const [currentTime, setCurrentTime] = useState(timeString(nowCallback()));\n    const g301Timeout = timeouts.filter(isG301Timeout)[0];\n    const g301Timer = useTimer({\n        startAt: g301Timeout?.timeoutStart ?? 0,\n        duration: (g301Timeout?.timeoutDuration ?? 0) / 1000,\n        nowCallback: nowCallback\n    });\n    const expected : TimeoutReference | undefined = nextMatch ? getActiveStartTimer(nextMatch, timeouts, nowCallback) : timeouts.find(isT206DependencyTimeout);\n    const expectedStartTime = useTimer({\n        startAt: expected?.timeoutStart,\n        duration: (expected?.timeoutDuration ?? 0) / 1000,\n        nowCallback: nowCallback\n    });\n    useInterval(() => {\n        setCurrentTime(timeString(nowCallback()));\n    }, 200);\n    const startWarning = () => {\n        // TODO ask what teams and add note. Show teams that already have a violation.\n        if (g301Timeout) {\n            confirmDialog({\n                label: t`Restart 2-Minute Timer`,\n                text: t`Are you sure you want to restart the timer?`,\n                buttonText: t`Restart`,\n                onConfirm: () => send(JSON.stringify({type: \"G301_VIOLATION\", time: nowCallback()}))\n            }).catch();\n        } else {\n            send(JSON.stringify({type: \"G301_VIOLATION\", time: nowCallback()}))\n        }\n    }\n\n    // make the side-by-side items render cleaner\n    const forceStretchStyle : CSSProperties = {height: '100%', flexDirection: 'row', alignItems: 'center', justifyContent: 'center'};\n    const t206Alt = expected && isT206Timeout(expected) && (expected as T206Timeout).awaitingScorePost;\n    const t206AltPlayoffs = expected && isT206DependencyTimeout(expected);\n    enum WarningState {\n        NOT_APPLICABLE,\n        AWAITING_POST,\n        AVAILABLE,\n        ACTIVE,\n        NO_MATCH\n    }\n    let currentTimer = null;\n    let x = expectedStartTime.running ? WarningState.NOT_APPLICABLE : WarningState.AVAILABLE;\n    if (!nextMatch) x = WarningState.NO_MATCH;\n    if (g301Timeout) x = WarningState.ACTIVE;\n    if (t206Alt || t206AltPlayoffs) x = WarningState.AWAITING_POST;\n\n    switch (x) {\n        case WarningState.NOT_APPLICABLE:\n            currentTimer = <div style={{}}>\n                <div className={\"font-italic\"}>{t`Minimum time before next match:`}</div>\n                <h1>{renderTime(expectedStartTime.remaining)}</h1>\n                {/*<small className={\"font-italic font-small\"} hidden={t206Alt}>Tap for Fullscreen</small>*/}\n            </div>\n            break;\n        case WarningState.NO_MATCH:\n            currentTimer = <div style={{}}>\n                <div className={\"font-italic\"}>{t`No Match Available`}</div>\n                <h1></h1>\n            </div>\n            break;\n        case WarningState.AWAITING_POST: // awaiting score post\n            currentTimer = <div style={{}}>\n                <div className={\"font-italic\"}>{t`Minimum time before next match:`}</div>\n                <h1>{renderTime((expected?.timeoutDuration ?? 0) / 1000)}+</h1>\n                <small className={\"font-italic font-small\"}>{t`Awaiting `}{expected?.description}</small>\n            </div>\n            break;\n        case WarningState.AVAILABLE:\n            currentTimer = <div className={\"d-flex\"} style={forceStretchStyle}>\n                <div className={\"font-italic alert\"} style={{marginBottom: 0}}>{t`Match start time has passed!`}</div>\n                <h1></h1>\n            </div>\n            break;\n        case WarningState.ACTIVE: currentTimer = <div className={\"alert-danger\"} style={{borderRadius: '.25em'}}>\n                <div className={\"font-italic\"}>{t`2-Minute Warning Active:`}</div>\n                <h1>{renderTime(g301Timer.remaining)}</h1>\n                {/*<small className={\"font-italic font-small\"}>Tap for Fullscreen</small>*/}\n            </div>\n            break;\n    }\n\n    let matchLabel = nextMatch ? \" - \" + nextMatch.shortName: \"\";\n    const otherField = nextMatch && field !== 0 && nextMatch.field !== 0 && nextMatch.field !== field;\n    if (otherField) {\n        matchLabel += t` [Other Field]`;\n    }\n\n    const matchListFiltered = matchList.some(x => x.type === \"ELIMS\") ? matchList.filter(x => x.type === \"ELIMS\") : matchList.slice();\n    if (matchListFiltered.length > 0 && matchListFiltered[0].type === 'ELIMS') {\n        matchListFiltered.sort(MatchSorter);\n    }\n\n    let wrapped = timeouts.map(x => ({to: x, target: getTimeoutTargetMatch(x, matchListFiltered, nextMatch)}));\n    wrapped.sort((a,b) => {\n        // if ALLIANCE_LAST without a target, push to the bottom of the sort\n        if (!a.target && a.to.type === TimeoutType.ALLIANCE_LAST && (b.to.type !== TimeoutType.ALLIANCE_LAST || b.target)) {\n            return 1;\n        }\n        if (!b.target && b.to.type === TimeoutType.ALLIANCE_LAST && (a.to.type !== TimeoutType.ALLIANCE_LAST || a.target)) {\n            return -1;\n        }\n        // If same match, use type order\n        if (a.target?.number === b.target?.number) {\n            return getTimeoutTypeOrder(a.to.type) - getTimeoutTypeOrder(b.to.type);\n        }\n        //if different rounds, use  round\n        if (((a.target as any)?.round ?? 0) !== ((b.target as any)?.round ?? 0)) {\n            return ((a.target as any)?.round ?? 0) - ((b.target as any)?.round ?? 0);\n        }\n        // use match number\n        return (a.target?.number ?? 0) - (b.target?.number ?? 0);\n    });\n\n    return <div className=\"tab-pane fade show hrTiming\" role=\"tabpanel\">\n        <h4 className={\"text-center\"} style={{marginTop: '1ch'}}>{t`${\"G301\"} Timing${matchLabel}`}</h4>\n        {/* TODO: Fix alliance name for DD*/}\n        {nextMatch?.type === MatchType.ELIMS ?\n            <h6 className={\"text-center\"} style={{marginTop: '1ch'}}>Red: A{nextMatch?.red?.seed}&nbsp;&nbsp;Blue: A{nextMatch?.blue?.seed}</h6> :\n            <h6 className={\"text-center\"} style={{marginTop: '1ch'}} hidden={!nextMatch?.red || !nextMatch?.blue}>\n                Red: {nextMatch?.red.team1?.data.number}, {nextMatch?.red.team2?.data.number} {nextMatch?.red.team3 ? <>, {nextMatch?.red.team3?.data.number}</> : null}\n                &nbsp;&nbsp;&nbsp;\n                Blue: {nextMatch?.blue.team1?.data.number}, {nextMatch?.blue.team2?.data.number} {nextMatch?.blue.team3 ? <>, {nextMatch?.blue.team3?.data.number}</> : null}\n            </h6>}\n        <div className={\"text-center justify-content-around\"} style={{display: 'grid', gridTemplateColumns: \"50% 50%\", gridColumnGap: '1ch'}}>\n            {currentTimer}\n            <div className={\"d-flex\"} style={forceStretchStyle}>\n                <div className={\"alert alert-warning\"} style={{marginBottom: 0}} hidden={![WarningState.NOT_APPLICABLE, WarningState.AWAITING_POST, WarningState.NO_MATCH].includes(x) || otherField}>{t`2-Minute Warning Not Allowed!`}</div>\n                <div className={\"alert alert-warning\"} style={{marginBottom: 0}} hidden={!otherField}>{t`Cannot start other field's warning!`}</div>\n                <div className={\"alert alert-warning\"} style={{marginBottom: 0}} hidden={!(activeMatch?.type === \"TEST\" || nextMatch?.type === \"TEST\")}>{t`Cannot violate G301 in Test Match!`}</div>\n                <Button variant={x === WarningState.AVAILABLE ? \"success\" : \"danger\"} size={'lg'} style={{margin: 0}}\n                        hidden={[WarningState.AWAITING_POST, WarningState.NOT_APPLICABLE, WarningState.NO_MATCH].includes(x) || otherField || activeMatch?.type === \"TEST\" || nextMatch?.type === \"TEST\"}\n                        onClick={startWarning}>{x === WarningState.AVAILABLE ? t`Start 2-Minute Warning` : t`Restart 2-Minute Warning`}\n                </Button>\n            </div>\n        </div>\n        <hr/>\n        <h4 className={\"text-center\"} style={{marginTop: '1ch'}}>{t`All Timing`}</h4>\n        <div className={\"text-center\"} style={{marginTop: '-1ch', marginBottom: '.5ch'}}>{t`Current time: ${currentTime}`}</div>\n        <table id={\"timeoutTable\"}>\n            <thead>\n            <tr>\n                <th style={{minWidth: '4ch'}}>M</th>\n                <th>Type</th>\n                <th style={{minWidth: '8ch'}}>Start</th>\n                <th>Length</th>\n                <th>End</th>\n                <th>Left</th>\n            </tr>\n            </thead>\n            <tbody>\n            {wrapped.map(w => <TimeoutDetailRow timeout={w.to} key={w.to.description} targetMatch={w.target} nowCallback={nowCallback} selected={expected}/>)}\n            </tbody>\n        </table>\n    </div>\n}\n","import './ScoresheetTab.css';\nimport {useState} from \"react\";\nimport {useEffect} from \"react\";\nimport {MatchSorter} from \"./TimingTab\";\nimport {useLocalStorageState} from \"first-common/utils\";\nimport { HrBasicMatch } from './HeadRef';\nimport {t} from \"ftc-common/i18n\";\n\n\nexport default function ScoresheetTab({matchLists, divisionNames}: {\n    matchLists: Record<number, HrBasicMatch[]>,\n    divisionNames?: string[]\n}) {\n    const [activeDivision, setActiveDivision] = useState(window.division);\n    const [match, setMatch] = useState<string | null>(null);\n    const [sheet, setSheet] = useState('red');\n    const [sheetData, setSheetData] = useState<string | null>(null);\n    const [playoffOnly, setPlayoffOnly] = useLocalStorageState(\"hr-scoresheet-playoff-only\", false);\n\n    useEffect(() => {\n        (async () => {\n            if (!match || !sheet) {\n                setSheetData(null);\n                return;\n            }\n            let eventCode = window.eventCode;\n            if(eventCode.endsWith(\"_0\")) {\n                eventCode = eventCode.slice(0, -2) + \"_\" + activeDivision;\n            }\n            const url = `/event/${eventCode}/match/${match.toLowerCase()}/${sheet !== 'both' ? sheet + \"/\" : \"\"}?embed=true`;\n            const response = await fetch(url);\n            const html = await response.text();\n            setSheetData(html);\n        })()\n    }, [activeDivision, match, sheet]);\n\n    const NAMES = {red: t`Red`, blue: t`Blue`, both: t`Both`}\n    const matchList = matchLists[activeDivision] || [];\n    const opts = matchList.filter(x => playoffOnly ? x.type === \"ELIMS\" : true).toSorted(MatchSorter).map(m => <option value={m.shortName} key={m.shortName}>{m.shortName}</option> )\n    const btns = (['red', 'blue', 'both'] as const).map(x => <div className={\"form-check-inline\"} key={x}>\n        <input className={\"form-check-input\"} type={\"radio\"} name={\"scoresheetOption\"} id={\"scoresheetRadio_\" + x} value={x} checked={x === sheet} onChange={(e) => {\n            if(e.target.checked) { setSheet(x) }\n        }}/>\n        <label className=\"form-check-label\" htmlFor={\"scoresheetRadio_\" + x}>{NAMES[x]}</label>\n    </div> );\n    return <>\n        <div className={\"text-center\"} style={{marginTop: \"10px\"}}>\n            {divisionNames ? <>\n                <label style={{marginRight: '10px'}}>{t`Division: `}</label>\n                <select value={activeDivision} onChange={(e) => {\n                    setActiveDivision(parseInt(e.target.value))\n                    setMatch(null)\n                }} className={\"mr-4\"}>\n                    {divisionNames.map((name, index) => <option value={index} key={index}>{name || \"Parent\"}</option>)}\n                </select>\n            </>: null}\n            <label style={{marginRight: '10px'}}>{t`Match: `}</label>\n            <select value={match || '-placeholder-'} onChange={(e) => setMatch(e.target.value)}>\n                <option value=\"-placeholder-\" disabled>{t`Select Match`}</option>\n                {opts}\n            </select>\n            <div className={\"form-check-inline ml-4\"}>\n                <label className=\"form-check-label mr-1\" htmlFor={\"scoresheetPlayoffOnly\"}>{t`Playoff Only: `}</label>\n                <input className={\"form-check-input\"} type={\"checkbox\"} name={\"scoresheetOption\"} id={\"scoresheetPlayoffOnly\"} checked={playoffOnly} onChange={(e) => {\n                    setPlayoffOnly(e.target.checked)\n                }}/>\n            </div>\n        </div>\n        <div className={\"text-center\"}>\n            {btns}\n        </div>\n        {sheetData ? <div className=\"scoresheetContainer\" dangerouslySetInnerHTML={{ __html: sheetData }}/> : null}\n    </>\n\n}","import './MatchTab.css'\nimport {MatchTimerData, useMatchTimer} from \"ftc-common/hooks\";\nimport {ComponentType, MouseEventHandler, ReactNode, useCallback, useEffect, useMemo, useState} from \"react\";\nimport {notesByTeam} from \"./NotesTab\";\nimport {t} from 'ftc-common/i18n';\nimport {HrMatch, RefStatus, SeasonScores, ShowNote, TeamNote} from \"./HeadRef\";\nimport {HRMatchNote, MatchState, MatchType} from \"../javaTypes\";\nimport {AllianceColor, ArtifactType} from \"ftc-common/javaTypes\";\nimport Counter from \"ftc-common/ref/components/Counter\";\nimport Artifact, {randomizationArtifacts} from \"../season/decode/Artifact\";\nimport faSquare from '@fortawesome/fontawesome-free/svgs/regular/square.svg';\nimport {ReactSVG} from \"react-svg\";\nimport {useAsset} from \"ftc-common/AssetHelper\";\nimport {Form} from \"react-bootstrap\";\n\nconst Check = ({value}: {value: number | undefined}) => <i className={`${value === 2 ? \"far\" : \"fa\"} fa-fw fa-${value === undefined ? 'minus' : (value > 0 ? (value === 2 ? \"check-square\" : \"check\") : \"times\")}`}/>;\n\nconst RobotLocation = ({value}: {value: number}) => value === 1 ? \"Partial\" : (value > 1 ? \"Full\" : <i className=\"fa fa-times fa-fw\"/>);\nconst Positive = ({value}: {value: number}) => <>{Math.max(value, 0)}</>;\nconst Identity = ({value}: {value: any}) => <>{value}</>;\n\nfunction CardRowTeam({flip, alliance, team, noShow, card, carry, updateCard, showCard, noteCount, showNote}: {\n    flip: boolean,\n    alliance: 'red' | 'blue',\n    team?: string,\n    noShow: number,\n    card: number,\n    carry: string[],\n    updateCard: (a: 'RED' | 'BLUE') => void,\n    showCard: boolean,\n    noteCount: number,\n    showNote: () => void\n}) {\n    const COLORS = [\"white\", \"yellow\", \"red\", \"linear-gradient(to bottom right, yellow 0%,yellow 50%,red 50%,red 50%)\"];\n    const TEXT = [t`None`, t`YC`, t`RC`, t`2nd YC`];\n\n    const teamDiv = <div className={`col-3 text-center ${alliance} team ${carry?.length ? \"carries\" : null} ${noShow ? \"noshow\" : null}`} onClick={() => showNote()}>\n        {team}{noteCount > 0 ? <span className={\"ml-2 position-relative\"}><i className={\"fa fa-comment\"}></i><span className={\"refNoteCount\"}>{noteCount}</span></span> : null }\n    </div>;\n    let cardDiv = <div className={`col-3 text-center ${alliance} card`} onClick={() => updateCard(alliance.toUpperCase() as 'RED' | 'BLUE')} style={{background: COLORS[card]}}>{TEXT[card]}</div>\n    if (!showCard) {\n        cardDiv = <div className={`col-3 text-center ${alliance}`}/>\n    }\n    return <>\n        {flip ? cardDiv : teamDiv}\n        {flip ? teamDiv : cardDiv}\n    </>\n}\n\nfunction getUpdateObj(activeMatch: HrMatch) {\n    return {\n        type: \"UPDATE\",\n        match: activeMatch.number,\n        review: activeMatch.hrReview,\n        hrCards: activeMatch.hrCards,\n        hrViolations: activeMatch.hrViolations,\n        redMinor: activeMatch.red.scores.hrMinorFouls,\n        redMajor: activeMatch.red.scores.hrMajorFouls,\n        blueMinor: activeMatch.blue.scores.hrMinorFouls,\n        blueMajor: activeMatch.blue.scores.hrMajorFouls,\n    }\n}\n\nenum Card {\n    NO_CARD = 0,\n    YELLOW_CARD = 1,\n    RED_CARD = 2,\n    YELLOW_RED_CARD = 3\n}\n\nconst NEXT_CARD = {\n    [Card.NO_CARD]: Card.YELLOW_CARD,\n    [Card.YELLOW_CARD]: Card.YELLOW_RED_CARD,\n    [Card.YELLOW_RED_CARD]: Card.RED_CARD,\n    [Card.RED_CARD]: Card.NO_CARD\n};\n\ninterface InitialCards { RED: number[], BLUE: number[] }\n\nfunction CardRow({activeMatch, flip, robot, send, showCard, notes, showNote, initialCards}: {\n    activeMatch: HrMatch,\n    flip: boolean,\n    robot: 1 | 2 | 3,\n    // TODO add proper typing\n    send: (message: string) => void,\n    showCard: boolean,\n    notes: Map<number, TeamNote[]>,\n    showNote: (team: number, displayNumber: string, cards: string[]) => void,\n    initialCards?: InitialCards\n}) {\n    const allianceCards = activeMatch.type !== \"QUALS\" && activeMatch.type !== \"TEST\";\n    const red = activeMatch.red[`team${robot}`]?.data?.displayNumber;\n    const redNumber = activeMatch.red[`team${robot}`]?.data?.number;\n    const blue = activeMatch.blue[`team${robot}`]?.data?.displayNumber;\n    const blueNumber = activeMatch.blue[`team${robot}`]?.data?.number;\n    const redCarry = activeMatch.redData?.[`cc${robot == 3 ? 2 : robot}`];\n    const blueCarry = activeMatch.blueData?.[`cc${robot == 3 ? 2 : robot}`];\n    const redCard = activeMatch.hrCards['RED'][robot === 3 ? 0 : robot - 1] as Card;\n    const blueCard = activeMatch.hrCards['BLUE'][robot === 3 ? 0 : robot - 1] as Card;\n    const redNoShow = activeMatch.red.scores[`noshow${robot}`];\n    const blueNoShow = activeMatch.blue.scores[`noshow${robot}`];\n    const redHasNotes = redNumber ? notes.get(redNumber)?.length || 0 : 0;\n    const blueHasNotes = blueNumber ? notes.get(blueNumber)?.length || 0 : 0;\n    const updateCard = (a: 'RED' | 'BLUE') => {\n        const current = a === 'RED' ? redCard : blueCard;\n        const hasCarry = a === 'RED' ? redCarry?.length : blueCarry?.length;\n\n        let n = NEXT_CARD[current];\n        console.log(hasCarry, activeMatch.isReplay)\n        if (n == Card.YELLOW_CARD && hasCarry) {\n            // if we are not a replay, force to 2nd YC, if it is a replay, force it only if the team that carries did\n            // not earn on in the original play. This allows discretionary removal of the card for a team whose carry is the original match\n            if (!activeMatch.isReplay || (initialCards && initialCards[a][robot - 1] == 0)) {\n                n = NEXT_CARD[n];\n            }\n        }\n        const obj = getUpdateObj(activeMatch);\n        obj.review = true;\n        if (allianceCards) {\n            obj.hrCards[a].fill(n, 0, 3);\n        } else {\n            obj.hrCards[a][robot - 1] = n;\n        }\n        send(JSON.stringify(obj));\n        // should we fake a SCORE object to the activeMatchState reducer to update the match state in case of latency?\n    }\n\n    const redTeam = <CardRowTeam flip={!flip} alliance={'red'} team={red} noShow={redNoShow} card={redCard} carry={redCarry} updateCard={updateCard} showCard={showCard} noteCount={redHasNotes} showNote={() => redNumber && red && showNote(redNumber, red, redCarry)}/>\n    const blueTeam = <CardRowTeam flip={flip} alliance={'blue'} team={blue} noShow={blueNoShow} card={blueCard} carry={blueCarry} updateCard={updateCard} showCard={showCard} noteCount={blueHasNotes} showNote={() => blueNumber && blue && showNote(blueNumber, blue, blueCarry)}/>\n\n    if (!red && !blue && robot === 3) {\n        return null;\n    }\n    return  <div className=\"row cardRow\">\n        {flip ? redTeam : blueTeam}\n        {flip ? blueTeam : redTeam}\n    </div>\n}\n\nfunction AllianceRpInputs({activeMatch, alliance, send} : {\n    activeMatch: HrMatch,\n    alliance: AllianceColor,\n    send: (message: string) => void\n}) {\n\n    const update = (checked: boolean, v: string) => {\n        const obj = getUpdateObj(activeMatch);\n        obj.review = true;\n        if (checked) {\n            obj.hrViolations[alliance].push(v);\n        } else {\n            obj.hrViolations[alliance] = obj.hrViolations[alliance].filter(x => x !== v);\n        }\n        send(JSON.stringify(obj));\n    }\n\n    return <div className={\"rpInputBlock\"} style={{maxWidth: 'calc(min(40%, 28ch))'}}>\n        {[\"G206\", \"G417.A\", \"G418.A\", \"G418.B\", \"G419.B\", \"G431.C\"].map(v => <Form.Check\n           key={v} label={v} checked={activeMatch.hrViolations[alliance].includes(v)} id={alliance + \"_\" + v}\n           onChange={e => update(e.target.checked, v)} inline={true}\n           style={{minWidth: '5.5em'}}\n        />)}\n    </div>\n\n}\n\ntype ScoreField = keyof SeasonScores\nfunction ScoreRow<T extends ScoreField>({activeMatch, flip, id, fieldName, label, component: Component = Identity, classFn}: {\n    activeMatch: HrMatch,\n    flip: boolean,\n    id?: string,\n    label: ReactNode,\n} & ({\n    fieldName: T | T[] | Record<AllianceColor, T | T[]>,\n    component?: ComponentType<{ value: SeasonScores[T], alliance: AllianceColor }>,\n    classFn?: (red: SeasonScores[T] | SeasonScores[T][], blue: SeasonScores[T] | SeasonScores[T][]) => {red?: string, middle?: string, blue?: string}\n} | {\n    fieldName?: undefined,\n    component?: ComponentType<{ alliance: AllianceColor }>,\n    classFn?: () => {red?: string, middle?: string, blue?: string}\n})) {\n    const render = (scores: SeasonScores, a: AllianceColor) => {\n        const realFieldName = typeof fieldName === 'object' && !Array.isArray(fieldName) ? fieldName[a] : fieldName;\n        if (Array.isArray(realFieldName)) {\n            return realFieldName.flatMap((x, idx) => [' / ',\n                <Component key={`${idx}-body`} value={scores[x]} alliance={a}/>]).slice(1);\n        } else if (realFieldName) {\n            return <Component value={scores[realFieldName]} alliance={a}/>;\n        } else {\n            const ValuelessComponent = Component as ComponentType<{ alliance: AllianceColor }>;\n            return <ValuelessComponent alliance={a}/>;\n        }\n    };\n    const extractRaw = (scores: SeasonScores, a: AllianceColor) => {\n        const realFieldName = typeof fieldName === 'object' && !Array.isArray(fieldName) ? fieldName[a] : fieldName;\n        return (Array.isArray(realFieldName) ? realFieldName.map(x => scores[x]) : scores[realFieldName!]);\n    }\n\n    const red = render(activeMatch.red.scores, AllianceColor.RED);\n    const blue = render(activeMatch.blue.scores, AllianceColor.BLUE);\n    const classes = classFn ? (fieldName ? classFn(extractRaw(activeMatch.red.scores, AllianceColor.RED), extractRaw(activeMatch.blue.scores, AllianceColor.BLUE)) : (classFn as () => {red?: string, middle?: string, blue?: string})()) : null;\n    return <div className=\"row scoreRow\" id={id}>\n        <div className={`col-4 d-flex justify-content-center align-items-center ${flip ? \"red\" : \"blue\"} ${flip ? classes?.red : classes?.blue} p-0`}>{flip ? red : blue}</div>\n        <div className={`col-4 text-center middle ${classes?.middle}`}>{label}</div>\n        <div className={`col-4 d-flex justify-content-center align-items-center ${flip ? \"blue\" : \"red\"} ${flip ? classes?.blue : classes?.red} p-0`}>{flip ? blue : red}</div>\n    </div>;\n}\n\nfunction getLagStatus(ref: RefStatus, timer: MatchTimerData, matchState: MatchState, waitForInitSubmit: boolean) {\n    if (matchState === \"UNPLAYED\" || matchState == \"RANDOMIZED\") {\n        if (ref === \"READY\") {\n            return \"ready\"\n        }\n        if (matchState === \"RANDOMIZED\") {\n            return waitForInitSubmit ? \"blocking\" : \"conflict\"\n        }\n        return waitForInitSubmit ? \"blocking\" : undefined;\n    } else {\n        if (timer.done) {\n            return ref === \"SUBMIT\" ? \"ready\" : (ref === \"REVIEW\" ? undefined : \"conflict\");\n        } else if (timer.auto) {\n            return ref === \"AUTO\" ? undefined : \"conflict\";\n        } else if (timer.transition) {\n            return [\"AUTO\", \"TELEOP\"].includes(ref) ? undefined : \"conflict\";\n        } else if (timer.teleop || timer.endgame) {\n            return ref === \"TELEOP\" ? undefined : \"conflict\";\n        }\n    }\n}\n\nfunction getMatchState(activeMatch: HrMatch, timer: MatchTimerData) {\n    if (activeMatch.state === \"UNPLAYED\" || activeMatch.state == \"RANDOMIZED\") {\n        return activeMatch.state === \"UNPLAYED\" ? t`Unplayed` : t`Randomized`;\n    } else if (timer.auto) {\n        return 'AUTO';\n    } else if (timer.transition) {\n        return t`Transition`;\n    } else if (timer.teleop || timer.endgame) {\n        return 'TELEOP';\n    } else {\n        return t`Review`;\n    }\n}\n\nfunction BigValue({value, alliance}: { value: number; alliance: AllianceColor }) {\n    return <div className={`big-value ${alliance.toLowerCase()}`}>\n        <div className={`value`}>{value}</div>\n    </div>\n}\n\nexport default function MatchTab({activeMatch, notes, showNote, send, nowCallback, flip, setFlip, fullscreen, autoOpen, setAutoOpen, dcOpen, setDcOpen, waitForInitSubmit, field, fieldCount} : {\n    activeMatch?: HrMatch,\n    notes: Record<string, HRMatchNote>,\n    showNote: ShowNote,\n    send: (message: string) => void,\n    nowCallback: () => number,\n    flip: boolean,\n    setFlip: (flip: boolean) => void,\n    fullscreen: boolean,\n    autoOpen: number,\n    setAutoOpen: (autoOpen: number) => void,\n    dcOpen: number,\n    setDcOpen: (dcOpen: number) => void,\n    waitForInitSubmit: boolean,\n    field: number,\n    fieldCount: number\n}) {\n    const [showCard, setShowCard] = useState(false);\n    const [showRP, setShowRPViolations] = useState(false);\n    const matchTimer = useMatchTimer({\n        startAt: activeMatch && activeMatch.start && activeMatch.start > 0 && activeMatch.state !== 'RANDOMIZED' ? activeMatch.start : null,\n        duration: 158,\n        nowCallback: nowCallback\n    })\n\n    const initialCards = activeMatch?.isReplay ? {\n        RED: [activeMatch.red.scores.oldCard1, activeMatch.red.scores.oldCard2],\n        BLUE: [activeMatch.blue.scores.oldCard1, activeMatch.blue.scores.oldCard2],\n    } : {\n        RED: [0, 0],\n        BLUE: [0, 0],\n    };\n    const replayCards = activeMatch?.isReplay && (initialCards.RED.some(x => x > 0) || initialCards.BLUE.some(x => x > 0));\n    const gateSvg = useAsset('img/decode/gate.svg');\n\n    useEffect(() => {\n        if (replayCards || activeMatch?.hrCards.RED.some(x => x > 0) || activeMatch?.hrCards.BLUE.some(x => x > 0)) {\n            setShowCard(true);\n        }\n    }, [activeMatch, replayCards])\n\n    useEffect(() => {\n        if (replayCards) {\n            setReview(true);\n        }\n    }, [replayCards]);\n\n    const teamNotes = useMemo(() => notesByTeam(notes), [notes]);\n    const showTeamNote = (team: number, displayNumber: string, cards: string[]) => showNote(notes, 'teamWithCards', { number: team, displayNumber, cards });\n\n\n    const Classifier = useCallback(({value}: {value: ArtifactType[]}) => <div className={\"text-nowrap\"}>\n        {[...value].reverse().map((a: ArtifactType, idx: number) => [\n            idx % 3 == 0 ? <ReactSVG key={`${idx}-3`} src={idx == 0 ? faSquare : ''} className={\"classifier-icon\"}></ReactSVG> : null,\n            <Artifact value={a} key={`${idx}-2`} matches={activeMatch && randomizationArtifacts[activeMatch.randomization] ? randomizationArtifacts[activeMatch.randomization][2 - (idx % 3)] == a : false} />,\n            idx % 3 == 2 ? <><ReactSVG key={`${idx}-3`} src={idx == 8 ? gateSvg : ''} className={\"classifier-icon\"}></ReactSVG><br/></> : null\n        ])}\n    </div>, [activeMatch?.randomization])\n\n    if (!activeMatch) {\n        return <div id=\"match\" className=\"tab-pane fade show active alert alert-info text-center\" role=\"tabpanel\">{t`No Active Match`}</div>\n    }\n\n    const setReview = (r: boolean) => send(JSON.stringify(Object.assign(getUpdateObj(activeMatch), {review: r})));\n    const inHrReview = activeMatch.state === \"REVIEW\" && activeMatch.hrReview && activeMatch.redData.status === \"SUBMIT\" && activeMatch.blueData.status === \"SUBMIT\";\n\n    const forceReview = (activeMatch: HrMatch, initialCards: Record<AllianceColor, Card[]>) => {\n        return JSON.stringify(activeMatch.hrCards.RED) !== JSON.stringify(initialCards.RED) || JSON.stringify(activeMatch.hrCards.BLUE) !== JSON.stringify(initialCards.BLUE);\n    }\n\n    const updateFoul = (a: AllianceColor, type: 'Minor' | 'Major', value: number) => {\n        const obj = getUpdateObj(activeMatch);\n        const lowerAlliance = a.toLowerCase() as 'red' | 'blue';\n        obj[`${lowerAlliance}${type}`] = value;\n        send(JSON.stringify(obj));\n    }\n\n    const toggleAutoOpen: MouseEventHandler<HTMLElement> = (e) => {\n        e.preventDefault()\n        setAutoOpen(((e.target as HTMLElement).parentElement as HTMLDetailsElement).open ? -1 : 1);\n    }\n    const toggleDcOpen: MouseEventHandler<HTMLElement> = (e) => {\n        e.preventDefault()\n        setDcOpen(((e.target as HTMLElement).parentElement as HTMLDetailsElement).open ? -1 : 1);\n    }\n    const matchState = getMatchState(activeMatch, matchTimer) ;\n    const randomizationText = activeMatch.randomization > 0 ? ([\"\", \"MOTIF 1 (ID 21)\", \"MOTIF 2 (ID 22)\", \"MOTIF 3 (ID 23)\"])[activeMatch.randomization] : \"-\";\n\n\n    return <div id=\"match\" className=\"tab-pane fade show active\" role=\"tabpanel\">\n            <h4 className=\"text-center\">{activeMatch.name}</h4>\n            {fieldCount > 1 && field === 0 ? <div className=\"text-center\">{t`Field: ${activeMatch.field}`}</div> : null}\n            <div className=\"text-center\">{t`Match Status: ${matchState}`}</div>\n            <div className=\"text-center\">{t`Randomization: ${randomizationText}`}</div>\n            <div className=\"text-center hr-artifacts\">\n                <ReactSVG src={gateSvg} className={\"randomizer-icon\"}></ReactSVG>\n                <Artifact value={activeMatch.randomization > 0 ? randomizationArtifacts[activeMatch.randomization][0] : ArtifactType.NONE} />\n                <Artifact value={activeMatch.randomization > 0 ? randomizationArtifacts[activeMatch.randomization][1] : ArtifactType.NONE} />\n                <Artifact value={activeMatch.randomization > 0 ? randomizationArtifacts[activeMatch.randomization][2] : ArtifactType.NONE} />\n                <ReactSVG src={faSquare} className={\"randomizer-icon\"}></ReactSVG>\n            </div>\n            <div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n                <button className={\"btn btn-info\"} onClick={() => setFlip(!flip)}>{t`Flip Alliances`}</button>\n                <button className={`btn ${activeMatch.hrReview ? \"btn-success\" : \"btn-warning\"}`} disabled={inHrReview} onClick={() => setReview(!activeMatch.hrReview || forceReview(activeMatch, initialCards))}>\n                    {activeMatch.hrReview ? t`Review Required ` : t`Review Required?`}\n                    <i className=\"fa fa-check\" hidden={!activeMatch.hrReview}/>\n                </button>\n                <button className={\"btn btn-info\"} onClick={() => showNote(notes?.[activeMatch.shortName] ?? {match: activeMatch.shortName, items: []})}>{t`Add Note`}</button>\n            </div>\n            {activeMatch.hrReview ?\n                inHrReview ? <div className=\"text-center font-italic alert alert-warning\">{t`Scores being held until you submit completion of review.`}</div> :\n                    <div className=\"text-center font-italic\">{t`Scores will be held until you submit completion of review`}</div> : null}\n            <hr/>\n\n            <ScoreRow activeMatch={activeMatch} flip={flip} label={\"Referee Status\"} id=\"statusHeader\" component={({alliance}: { alliance: AllianceColor }) => alliance === 'RED' ? t`Red` : t`Blue`} classFn={() => {return {red: \"font-weight-bold\", middle: \"font-weight-bold\", blue: \"font-weight-bold\"}}}/>\n            <ScoreRow activeMatch={activeMatch} flip={flip} label={t`Scoring Phase`} component={({alliance}: { alliance: AllianceColor }) => {\n                const colorLower = alliance.toLowerCase() as 'red' | 'blue';\n                return activeMatch[`${colorLower}Data`].status\n            }} classFn={() => {\n                return {\n                    red: getLagStatus(activeMatch.redData.status, matchTimer, activeMatch.state, waitForInitSubmit),\n                    blue: getLagStatus(activeMatch.blueData.status, matchTimer, activeMatch.state, waitForInitSubmit)\n                }\n            }}/>\n            <ScoreRow activeMatch={activeMatch} flip={flip} label={<>MINOR FOULS<br/><b>{t`Total`}</b></>} fieldName={\"minor\"} component={BigValue} />\n            <ScoreRow activeMatch={activeMatch} flip={flip} label={<>Foul input: R / B</>} fieldName={{\n                RED: [\"ownMinorFouls\", \"otherMinorFouls\"],\n                BLUE: [\"otherMinorFouls\", \"ownMinorFouls\"]\n            }}/>\n            <ScoreRow activeMatch={activeMatch} flip={flip} label={t`HR MINOR FOULS`} fieldName={\"hrMinorFouls\"} component={({value, alliance}: {value: number, alliance: AllianceColor}) =>\n                <Counter color={alliance} value={value} plain setValue={(val) => updateFoul(alliance, 'Minor', val)} />} />\n            <ScoreRow activeMatch={activeMatch} flip={flip} label={<>MAJOR FOULS<br/><b>{t`Total`}</b></>} fieldName={\"major\"} component={BigValue} />\n            <ScoreRow activeMatch={activeMatch} flip={flip} label={<>Foul input: R / B</>} fieldName={{\n                RED: [\"ownMajorFouls\", \"otherMajorFouls\"],\n                BLUE: [ \"otherMajorFouls\", \"ownMajorFouls\"]\n            }}/>\n            <ScoreRow activeMatch={activeMatch} flip={flip} label={t`HR MAJOR FOULS`} fieldName={\"hrMajorFouls\"} component={({value, alliance}: {value: number, alliance: AllianceColor}) =>\n                <Counter color={alliance} value={value} plain setValue={(val) => updateFoul(alliance, 'Major', val)} />} />\n            <hr/>\n\n            <details className={\"scores autoScores\"} open={(fullscreen && (autoOpen === 0)) || (autoOpen === 1)}>\n                <summary className=\"btn btn-secondary btn-sm col-12\" onClick={toggleAutoOpen}>{t`AUTO Scores`}</summary>\n                <ScoreRow activeMatch={activeMatch} flip={flip} label={t`CLASSIFIED`} fieldName={\"autoClassifiedArtifacts\"} component={Positive} />\n                <ScoreRow activeMatch={activeMatch} flip={flip} label={t`OVERFLOW`} fieldName={\"autoOverflowArtifacts\"} component={Positive} />\n                <ScoreRow activeMatch={activeMatch} flip={flip} label={t`PATTERN`} fieldName={\"autoClassifierState\"} component={Classifier} />\n                <ScoreRow activeMatch={activeMatch} flip={flip} label={t`ROBOT Location`} fieldName={[\"robot1Auto\", \"robot2Auto\"]} component={Check}/>\n            </details>\n            <details className={\"scores\"} open={(fullscreen && (dcOpen === 0)) || (dcOpen === 1)}>\n                <summary className=\"btn btn-secondary btn-sm col-12\" onClick={toggleDcOpen}>{t`TELEOP Scores`}</summary>\n                <ScoreRow activeMatch={activeMatch} flip={flip} label={t`CLASSIFIED`} fieldName={\"teleopClassifiedArtifacts\"} component={Positive} />\n                <ScoreRow activeMatch={activeMatch} flip={flip} label={t`OVERFLOW`} fieldName={\"teleopOverflowArtifacts\"} component={Positive} />\n                <ScoreRow activeMatch={activeMatch} flip={flip} label={t`DEPOT`} fieldName={\"teleopDepotArtifacts\"} component={Positive} />\n                <ScoreRow activeMatch={activeMatch} flip={flip} label={t`PATTERN`} fieldName={\"teleopClassifierState\"} component={Classifier} />\n                <ScoreRow activeMatch={activeMatch} flip={flip} label={t`ROBOT Location`} fieldName={[\"robot1Teleop\", \"robot2Teleop\"]} component={RobotLocation}/>\n            </details>\n            <hr/>\n\n            {activeMatch && activeMatch.type != MatchType.ELIMS ? <>\n                <h6 className={\"text-center\"}>{t`RP Violations`}</h6>\n                {showRP ?<>\n                    <div className={\"d-flex justify-content-between\"} style={{position: 'relative'}}>\n                        <AllianceRpInputs activeMatch={activeMatch} alliance={flip ? AllianceColor.RED : AllianceColor.BLUE} send={send}/>\n                        <AllianceRpInputs activeMatch={activeMatch} alliance={flip ? AllianceColor.BLUE : AllianceColor.RED} send={send}/>\n                    </div>\n                    <div className={\"text-center\"}><button className={\"btn btn-info btn-sm\"} onClick={() => setShowRPViolations(false)} disabled={activeMatch.hrViolations[AllianceColor.BLUE].length > 0 || activeMatch.hrViolations[AllianceColor.RED].length > 0}>Hide RP Violations</button></div>\n                    </>\n                :\n                    <div className={\"text-center\"}><button className={\"btn btn-info btn-sm\"} onClick={() => setShowRPViolations(true)}>Enter RP Violations</button></div>\n                }\n            <hr/>\n            </>:null}\n\n            <h6 className={\"text-center\"}>{t`Teams / Cards`}</h6>\n            <div style={{position: 'relative'}}>\n                {showCard ? null : <div className={'text-center'} style={{position: 'absolute', top: '1.5em', left: 0, right: 0, marginLeft: 'auto', marginRight: 'auto', zIndex: 5, width: 'fit-content'}}><button className={\"btn btn-info btn-sm\"} onClick={() => setShowCard(true)}>Assign Cards</button></div>}\n                <CardRow activeMatch={activeMatch} flip={flip} robot={1} send={send} showCard={showCard} notes={teamNotes} showNote={showTeamNote} initialCards={initialCards}/>\n                <CardRow activeMatch={activeMatch} flip={flip} robot={2} send={send} showCard={showCard} notes={teamNotes} showNote={showTeamNote} initialCards={initialCards}/>\n                <CardRow activeMatch={activeMatch} flip={flip} robot={3} send={send} showCard={showCard} notes={teamNotes} showNote={showTeamNote} initialCards={initialCards}/>\n                {replayCards ? <div className={\"text-center font-italic\"}>{t`This is a replay - cards earned in this match have been restored. Enter an additional YC as a 2nd YC.`}</div> : null}\n                {showCard ? <div className={'text-center'} style={{paddingTop:'5px'}}><button className={\"btn btn-info btn-sm\"} onClick={() => setShowCard(false)} disabled={activeMatch.hrCards.RED.some(x => x > 0) || activeMatch.hrCards.BLUE.some(x => x > 0)}>Hide Cards</button></div> : null}\n            </div>\n{\n    inHrReview ? <><br/>\n        <div className=\"text-center\">\n            <button className={\"btn btn-primary\"} onClick={() => {\n                const obj = getUpdateObj(activeMatch);\n                obj.type = 'SUBMIT';\n                send(JSON.stringify(obj));\n            }}>{t`Submit Review`}</button>\n        </div>\n    </> : null\n}\n\n</div>\n\n}\n","import {useControlConnection} from \"../matchControl/connection\";\nimport CurrentMatches from \"../matchControl/CurrentMatches\";\nimport ActionButtons from \"../matchControl/ActionButtons\";\nimport {abortMatch, commitMatch, randomizeMatch, showRandom, previewMatch, showMatch, startMatch} from '../matchControl/connection'\nimport './HrControlTab.css'\nimport {Alert} from \"react-bootstrap\";\n\nexport default function HrControlTab({eventCode, field, showMatchTab} : {eventCode: string, field: number, showMatchTab: () => void}) {\n    const {\n        displayUpdates,\n        settings,\n        isArchived,\n        loadedMatch,\n        activeMatch,\n        remaining,\n        loadMatch,\n        nextMatchNum\n    } = useControlConnection(eventCode, field);\n    const activeMatchRunning = activeMatch && activeMatch?.state !== 'REVIEW' && activeMatch?.state !== 'SUBMITTED';\n    const showPostWarning = loadedMatch && !activeMatchRunning && activeMatch && activeMatch.postedTime < activeMatch.start;\n    return <>\n        <CurrentMatches loadedMatch={loadedMatch} activeMatch={activeMatch} matchRemaining={remaining} compact settings={settings}/>\n        <br/>\n        {showPostWarning ? <Alert variant={'warning'} className={\"text-center\"}>If next match is started before post, the previous match will be inaccessible from this page and the control page must be used to post.</Alert> : null }\n        <ActionButtons loadedMatch={loadedMatch} activeMatch={activeMatch}\n                       previewMatch={(number) => previewMatch(eventCode, number)}\n                       randomizeMatch={(number, opts) => randomizeMatch(eventCode, number, opts)}\n                       showRandom={(number) => showRandom(eventCode, number)}\n                       showMatch={(number) => showMatch(eventCode, number)}\n                       startMatch={(number) => {startMatch(eventCode, number).then(showMatchTab)}}\n                       abortMatch={(number) => abortMatch(eventCode, number)}\n                       commitAndPostMatch={(number) => commitMatch(eventCode, number, [], true)}\n                       hasNextMatch={nextMatchNum > 0}\n                       loadNextMatch={() => loadMatch(nextMatchNum)}\n                       displayUpdates={Object.values(displayUpdates)}\n                       settings={settings} isArchived={isArchived} warnIfNotPost={true} />\n        <br/>\n        <em>\n            This workflow is a beta feature. It is intended to allow small or short-staffed events to run a standardized basic\n            match flow without a scorekeeper. It does not replace the need to have a computer with the control page open.\n            Any post-referee score edits, out-of-order match play, Alliance Selection, and other operations must still\n            be performed through the control page.\n        </em>\n    </>\n}","import {MatchType} from \"../javaTypes\";\nimport {T206Timeout, TimeoutReference} from \"ftc-common/javaTypes\";\nimport {isG301Timeout, isT206DependencyTimeout, isT206Timeout} from \"ftc-common/timeoutUtils\";\nimport {useInterval, useTimer} from \"ftc-common/hooks\";\nimport {getActiveStartTimer, timeString} from \"./TimingTab\";\nimport {t} from \"ftc-common/i18n\";\nimport {renderTime} from \"ftc-common/utils\";\nimport {CSSProperties, useState} from \"react\";\nimport {delayStr} from \"../util\";\n\nexport default function MultiDivisionTimingTab({divisionTimeoutData, divisionNames, nowCallback} : {\n    divisionTimeoutData: Record<number, any>,\n    divisionNames: string[],\n    nowCallback: () => number\n}) {\n    const [currentTime, setCurrentTime] = useState(timeString(nowCallback()));\n\n    const divs = Object.entries(divisionTimeoutData).filter(x => !!x).map(([k, v]) => [parseInt(k), v]).filter(([k]) => k > 0).sort((a,b) => a[0] - b[0]);\n    useInterval(() => {\n        setCurrentTime(timeString(nowCallback()));\n    }, 200);\n    return <div className=\"tab-pane fade show hrTiming\" role=\"tabpanel\">\n        <div className={\"text-center mt-2 mb-2\"} style={{marginTop: '-1ch', marginBottom: '.5ch'}}>{t`Current time: ${currentTime}`}</div>\n        <div className={\"d-flex flex-wrap align-items-stretch\"}>\n            {divs.map(x => <DivisionTimingInfo key={x[0]} div={x[0]} data={x[1]} divisionNames={divisionNames} nowCallback={nowCallback}></DivisionTimingInfo>)}\n        </div>\n    </div>\n}\n\nfunction DivisionTimingInfo({div, data, divisionNames, nowCallback} : {\n    div: number,\n    data: any,\n    divisionNames: string[],\n    nowCallback: () => number\n}) {\n    const g301Timeout = data.timeouts.filter(isG301Timeout)[0];\n    const g301Timer = useTimer({\n        startAt: g301Timeout?.timeoutStart ?? 0,\n        duration: (g301Timeout?.timeoutDuration ?? 0) / 1000,\n        nowCallback: nowCallback\n    });\n    const expected : TimeoutReference | undefined = data.nextMatch ? getActiveStartTimer(data.nextMatch, data.timeouts, nowCallback) : data.timeouts.find(isT206DependencyTimeout);\n    const expectedStartTime = useTimer({\n        startAt: expected?.timeoutStart,\n        duration: (expected?.timeoutDuration ?? 0) / 1000,\n        nowCallback: nowCallback\n    });\n    const [timeSinceStart, setTimeSinceStart] = useState(-1);\n\n    const t206Alt = expected && isT206Timeout(expected) && (expected as T206Timeout).awaitingScorePost;\n    const t206AltPlayoffs = expected && isT206DependencyTimeout(expected);\n    enum WarningState {\n        NOT_APPLICABLE,\n        AWAITING_POST,\n        AVAILABLE,\n        ACTIVE,\n        NO_MATCH\n    }\n    const nextMatch = data.nextMatch;\n    const lastMatch =  data.matchList.filter((x: any) => x.start > 0).sort((a: any, b: any) => b.start - a.start)[0];\n\n    useInterval(() => {\n        setTimeSinceStart(lastMatch?.start ? Math.floor((nowCallback() - lastMatch?.start) / 1000) : -1)\n    }, lastMatch?.start ? 100 : null)\n\n    let currentTimer = null;\n    let x = expectedStartTime.running ? WarningState.NOT_APPLICABLE : WarningState.AVAILABLE;\n    if (!data.nextMatch) x = WarningState.NO_MATCH;\n    if (g301Timeout) x = WarningState.ACTIVE;\n    if (t206Alt || t206AltPlayoffs) x = WarningState.AWAITING_POST;\n    const forceStretchStyle : CSSProperties = {flexDirection: 'row', alignItems: 'center', justifyContent: 'center'};\n\n    switch (x) {\n        case WarningState.NOT_APPLICABLE:\n            currentTimer = <div style={{}}>\n                <div className={\"font-italic\"}>{t`Minimum time before next match:`}</div>\n                <h4>{renderTime(expectedStartTime.remaining, true)}</h4>\n                {/*<small className={\"font-italic font-small\"} hidden={t206Alt}>Tap for Fullscreen</small>*/}\n            </div>\n            break;\n        case WarningState.NO_MATCH:\n            currentTimer = <div style={{}}>\n                <div className={\"font-italic\"}>{t`No Match Available`}</div>\n                <h4></h4>\n            </div>\n            break;\n        case WarningState.AWAITING_POST: // awaiting score post\n            currentTimer = <div style={{}}>\n                <div className={\"font-italic\"}>{t`Minimum time before next match:`}</div>\n                <h4>{renderTime((expected?.timeoutDuration ?? 0) / 1000)}+</h4>\n                <small className={\"font-italic font-small\"}>{t`Awaiting `}{expected?.description}</small>\n            </div>\n            break;\n        case WarningState.AVAILABLE:\n            currentTimer = <div className={\"d-flex alert-warning\"} style={forceStretchStyle}>\n                <div className={\"font-italic alert\"} style={{marginBottom: 0}}>{t`Match start time has passed!`}</div>\n                <h4></h4>\n            </div>\n            break;\n        case WarningState.ACTIVE: currentTimer = <div className={\"alert-danger\"}>\n            <div className={\"font-italic\"}>{t`2-Minute Warning Active:`}</div>\n            <h4>{renderTime(g301Timer.remaining)}</h4>\n            {/*<small className={\"font-italic font-small\"}>Tap for Fullscreen</small>*/}\n        </div>\n            break;\n    }\n\n    return <div style={{minWidth: '50%', border: '1px solid black', flexGrow: 1}}>\n        <h3 className={\"text-center\"}>{divisionNames ? divisionNames[div] : \"\"}</h3>\n        <h6 className={\"text-center\"}>Last Match: {lastMatch?.shortName ?? \"\"}{timeSinceStart > 0 ? ` [${renderTime(timeSinceStart, true)} ago - ${delayStr(lastMatch?.scheduledStart, lastMatch?.start)}]` : \"\"}</h6>\n        <h6 className={\"text-center\"}>Next Match: {nextMatch?.shortName ?? \"\"}{nextMatch?.scheduledStart ? \" [\" + timeString(nextMatch?.scheduledStart) + \"]\" : \"\"}</h6>\n        {nextMatch?.type === MatchType.ELIMS ?\n            <h6 className={\"text-center\"} style={{marginTop: '1ch'}}>Red: A{nextMatch?.red?.seed}&nbsp;&nbsp;Blue: A{nextMatch?.blue?.seed}</h6> :\n            <h6 className={\"text-center\"} style={{marginTop: '1ch'}} hidden={!nextMatch?.red || !nextMatch?.blue}>\n                Red: {nextMatch?.red.team1?.data.number}, {nextMatch?.red.team2?.data.number} {nextMatch?.red.team3 ? <>, {nextMatch?.red.team3?.data.number}</> : null}\n                &nbsp;&nbsp;&nbsp;\n                Blue: {nextMatch?.blue.team1?.data.number}, {nextMatch?.blue.team2?.data.number} {nextMatch?.blue.team3 ? <>, {nextMatch?.blue.team3?.data.number}</> : null}\n            </h6>}\n        <div className={\"text-center justify-content-around\"}>\n            {currentTimer}\n        </div>\n    </div>\n}","import './HeadRef.css';\nimport {useEffect, useState, useRef, useReducer} from \"react\";\nimport { t } from 'ftc-common/i18n';\nimport {useTimer, useMatchTimer} from \"ftc-common/hooks\";\nimport {isFullScreen, usePersistentWebsocketWithTime} from \"ftc-common/utils\";\nimport NoteDialog from \"./NoteDialog\";\nimport NotesTab from \"./NotesTab\";\nimport TeamNotesDialog from \"./TeamNotesDialog\";\nimport TimingTab from \"./TimingTab\";\nimport ScoresheetTab from \"./ScoresheetTab\";\nimport MatchTab from \"./MatchTab\";\nimport {toggleFullscreen, renderTime} from \"ftc-common/utils\";\nimport LocalErrorBoundary from \"../LocalErrorBoundary\";\nimport HrControlTab from \"./HrControlTab\";\nimport {Tab, Tabs} from \"react-bootstrap\";\nimport {\n    HRMatchNote,\n    Match,\n    MatchState,\n    MatchType,\n    Scores,\n    DecodeScores\n} from \"../javaTypes\";\nimport { HrMeetingNoteType, TimeoutReference } from \"ftc-common/javaTypes\";\nimport {useLocalStorageState} from \"first-common/utils\";\nimport MultiDivisionTimingTab from \"./MultiDivisionTimingTab\";\n\nexport type SeasonScores = DecodeScores\n\ninterface FullTeamInfo {\n    data: HRTeamInfo\n    // Other data HR doesn't need\n}\n\nexport interface Alliance<T extends Scores> {\n    team1: FullTeamInfo,\n    team2: FullTeamInfo,\n    team3?: FullTeamInfo,\n    robot1: number,\n    robot2: number,\n    team1Surrogate: boolean,\n    team2Surrogate: boolean,\n    scores : T,\n    seed?: number\n}\n\ninterface HRTeamInfo {\n    number: number,\n    displayNumber: string,\n    cards?: string[]\n}\n\nexport enum RefStatus {\n    INIT = 'INIT',\n    READY = 'READY',\n    AUTO = 'AUTO',\n    TELEOP = 'TELEOP',\n    REVIEW = 'REVIEW',\n    SUBMIT = 'SUBMIT',\n}\n\ninterface HrAllianceData {\n    cc1: string[],\n    cc2: string[],\n    status: RefStatus,\n}\n\nexport interface HrMatch extends Match {\n    red: Alliance<SeasonScores>,\n    blue: Alliance<SeasonScores>,\n    redData: HrAllianceData,\n    blueData: HrAllianceData,\n}\n\nexport interface HrBasicMatch {\n    number: number,\n    field: number,\n    start?: number,\n    state: MatchState,\n    name: string,\n    shortName: string,\n    type: MatchType,\n    red: HRTeamInfo[],\n    blue: HRTeamInfo[],\n    redSeed?: number,\n    blueSeed?: number,\n    round?: number,\n}\n\nexport interface TeamNote {\n    content: string,\n    match: string,\n    others: number[]\n}\n\nexport type ShowNote = {\n    (noteList: HRMatchNote): void\n    (noteList: HRMatchNote, type: 'match'): void\n    (noteList: Record<string, HRMatchNote>, type: 'team', team: HRTeamInfo): void\n    (noteList: Record<string, HRMatchNote>, type: 'teamWithCards', team: HRTeamInfo & { cards: string[] }): void\n}\n\nexport function getMatchFromShortName(matchList: HrBasicMatch[], shortName: string) {\n    return matchList.find(x => x.shortName === shortName);\n}\n\nexport function isRunning(state: MatchState) {\n    return state === \"AUTO\" || state === \"TELEOP\";\n}\n\n// TODO type better\nfunction matchReducer(current: HrMatch | undefined, data: any, send: (data: string) => void, field: number) {\n    if(current && data.type === \"CANCEL\" && data.matchNum === current.number) {\n        return undefined;\n    }\n    // return the new activeMatch state\n    if (!data.match) {\n        return current; // ignore this message\n    }\n    let newState = Object.assign({}, current);\n    if (field === 0 || data.match.field === field || data.match.field === 0) {\n        // replace with new match object if there isn't a current one, the current one is for the same match, or the current one is a different match that is not running &&  not in hrReview\n        if (!current || current.shortName === data.match.shortName || (!isRunning(current.state) && !current.hrReview)) {\n            if (current?.state === 'REVIEW' && current.shortName !== data.match.shortName && !isRunning(data.match)) {\n                // if still in (alliance ref) review & HR Review is unchecked, dont swap unless the next match starts\n                // TODO this will still swap on start, do we want a popup for this scenario where the user can choose to ignore updates from the next match until submit?\n            } else {\n                newState = data.match;\n            }\n        }\n        // else ignore because another match is active\n    }\n    /*\n    Previous version had this block here, figure out once needed: (needed for c08 \"next match\" logic)\n    if (data.type === \"START\" || data.type === \"RANDOMIZE\") {\n        if (data.type === \"START\" && matchList) {\n            let m = matchList.find(x => x.number = data.match.number);\n            if (m) {\n                m.start = data.match.start;\n            }\n        }\n        resetC08Timer(data.match);\n    }\n     */\n    // Only request data if this is an HR page on the correct division\n    if (data.division === window.division && newState && newState.state === \"SUBMITTED\") {\n        // wait 2s so it's obvious a new match is loading.\n        if (current != null) {\n            setTimeout(() => send(JSON.stringify({type: \"FETCH\", field: field, first: false})), 2000);\n        }\n        return undefined;\n    }\n    return Object.keys(newState).length > 0 ? newState : current;\n}\n\nfunction TimeoutTimer({start, duration, label, type, nowCallback}: {\n    start?: number,\n    duration?: number,\n    label: string,\n    type?: string,\n    nowCallback: () => number\n}) {\n    const EMPTY = <div className={\"col-2\"}/>;\n    const timer = useTimer({\n        startAt: start,\n        duration: duration ? (duration / 1000) : 0,\n        nowCallback: nowCallback\n    });\n    if (!start || !duration) {\n        return EMPTY;\n    }\n    if (start === 0 || (!timer.running && timer.remaining > 0)) {\n        return EMPTY;\n    }\n    return <div className={`col-2 text-sm-center ${start > 0 ? (type === 'ELIMS_TIMEOUT' && timer.remaining <= 240 ? \"alert-danger\": \"alert-warning\") : null} c08Timer`}>\n        <span>{label}</span><br/><span>{renderTime(timer.remaining)}</span>\n    </div>\n}\n\ndeclare global {\n    interface Document {\n        webkitFullscreenElement: Element | null;\n    }\n    function showHrHelp(): void;\n}\n\ninterface HrData {\n    matchList: HrBasicMatch[],\n    activeMatch?: HrMatch,\n    notes: Record<string, HRMatchNote>,\n    meetingNotes: Partial<Record<HrMeetingNoteType, string>>,\n    timeouts: TimeoutReference[],\n    nextMatch?: HrMatch,\n    g301Start: number,\n    waitForInitSubmit: boolean\n}\n\nconst defaultHrData: HrData = {\n    matchList: [],\n    activeMatch: undefined,\n    notes: {},\n    meetingNotes: {},\n    timeouts: [],\n    nextMatch: undefined,\n    g301Start: 0,\n    waitForInitSubmit: false\n}\n\nfunction updateHrData(current: Record<number, HrData>, action: any, send: (data: string) => void, field: number) {\n    const division = action.division;\n    const currentData = current[division] ? {...current[division]} : {...defaultHrData};\n\n    if (action.type === \"MATCH_LIST\") {\n        currentData.matchList = action.list;\n    } else if (action.type === \"NOTES\") {\n        currentData.notes = action.notes;\n        currentData.meetingNotes = action.meetings;\n    } else if (action.type === \"TIMEOUTS\") {\n        currentData.g301Start = action.g301Timer;\n        currentData.timeouts = action.timeouts;\n        currentData.nextMatch = action.nextMatch;\n    } else if ([\"LOAD\", \"INIT\", \"START\", \"SCORE\", \"REVIEW\", \"ABORT\", \"RANDOMIZE\", \"FETCH\", \"LOCKOUT\", \"SUBMIT\", \"CANCEL\"].includes(action.type)) {\n        currentData.activeMatch = matchReducer(currentData.activeMatch, action, send, field);\n        if((action.type === \"START\" || action.type === \"ABORT\") && action.match) {\n            currentData.matchList = currentData.matchList.map(m => {\n                if (m.shortName === action.match.shortName) {\n                    return {...m, start: action.match.start};\n                }\n                return m;\n            })\n        }\n    } else if (action.type === \"WAIT_FOR_INIT_SUBMIT\") {\n        currentData.waitForInitSubmit = action.waitForInitSubmit;\n    } else {\n        console.log(\"Unknown message type \" + action.type);\n    }\n\n    return {\n        ...current,\n        [division]: currentData\n    }\n}\n\nexport default function HeadRef({field, fieldCount, event, hrControl}: {\n    field: number,\n    fieldCount: number,\n    event: string,\n    hrControl?: boolean,\n}) {\n    const { isConnected, now: nowCallback, send } = usePersistentWebsocketWithTime(\n        `/stream/hr/?code=${event}&field=${field}`,\n        handleMessage,\n        (socket) => {\n            socket.send(JSON.stringify({type: \"FETCH\", field: field, first: true}));\n        });\n    const [tab, setTab] = useState<string | undefined>('match');\n    // TODO type the reducer args\n    const [data, dispatchUpdate] = useReducer((current: Record<number, HrData>, data: any) => updateHrData(current, data, send, field), {})\n    const [flip, setFlip] = useLocalStorageState<boolean>('hrFlip');\n    const [autoOpen, setAutoOpen] = useLocalStorageState<number>('hrAutoOpen', 0);\n    const [dcOpen, setDcOpen] = useLocalStorageState<number>('hrDcOpen', 0);\n    const [noteOpen, setNoteOpen] = useState(false);\n    const [currentNote, setCurrentNote] = useState<HRMatchNote>();\n    const [noteMode, setNodeMode] = useState('match');\n    const [currentTeamNotes, setCurrentTeamNotes] = useState<{team: HRTeamInfo, notes: TeamNote[]}>();\n    const [fullscreen, setFullscreen] = useState(isFullScreen());\n\n    const divisionData = data[window.division] || defaultHrData;\n    const {matchList, activeMatch, notes, meetingNotes, timeouts, nextMatch, g301Start, waitForInitSubmit} = divisionData;\n\n    useEffect(() => {\n        document.documentElement.addEventListener(\"fullscreenchange\", e => setFullscreen(isFullScreen()));\n        document.documentElement.addEventListener(\"webkitfullscreenchange\", e => setFullscreen(isFullScreen()));\n    }, []);\n\n    // TODO type this better\n    function handleMessage(msg: any) {\n        // Remember, this function is within the closure, so does not have updated state!\n        if (msg.match) { // rescope the alliance data for later convenience\n            msg.match.redData = msg.redData;\n            msg.match.blueData = msg.blueData;\n        }\n        dispatchUpdate(msg);\n    }\n\n    const showNote: ShowNote = (noteData, type: 'match' | 'team' | 'teamWithCards' = 'match', teamData = {}) => {\n        setNodeMode(type);\n        if (type === 'match') {\n            setCurrentNote(noteData as HRMatchNote)\n        } else if (type === 'team' || type === 'teamWithCards') {\n            const obj: { team: HRTeamInfo, notes: TeamNote[] } = {team: teamData as HRTeamInfo, notes: []}\n            for (let k in noteData) {\n                (noteData as Record<string, HRMatchNote>)[k].items.filter(x => x.tags.includes(obj.team.number)).forEach(x => obj.notes.push({match: k, content: x.content, others: x.tags.filter((i) => i !== obj.team.number)}));\n            }\n            setCurrentTeamNotes(obj);\n        }\n        setNoteOpen(true);\n    }\n\n    return <>\n        <NoteDialog show={noteOpen && noteMode === 'match'} setShow={setNoteOpen} note={currentNote} setNote={setCurrentNote} send={send}\n                    match={currentNote ? getMatchFromShortName(matchList, currentNote.match) : undefined}/>\n        <TeamNotesDialog show={noteOpen && (noteMode === 'team' || noteMode === 'teamWithCards')} setShow={setNoteOpen} notes={currentTeamNotes} noteList={notes} showNote={showNote} send={send}\n                    matchList={matchList.filter(x => [...x.red, ...x.blue].filter(x => x).map(x => x.number).includes(currentTeamNotes?.team?.number || -1))} />\n        <div className=\"row\">\n            <a href={`/event/${event}/`} className=\"col-4 text-left\">{t`<< Back`}</a>\n            <a href=\"#\" className={\"col-4 text-center\"} onClick={() => toggleFullscreen()}>{fullscreen ? \"Exit Fullscreen\" : \"Fullscreen\"}</a>\n            <a href=\"#\" className=\"col-4 text-right\" onClick={() => showHrHelp()}>{t`Help`}</a>\n        </div>\n        <div className=\"row justify-content-center\">\n            <h2 className=\"col-12 text-center\">{t`Head Referee`} {fieldCount > 1 ? `(${field == 0 ? t`All Fields` : t`Field ${field}`})` : ''}</h2>\n        </div>\n        { isConnected ? null : <div className={\"alert alert-danger text-center h6\"}>{t`DISCONNECTED`}</div>}\n        <LocalErrorBoundary>\n            <Tabs defaultActiveKey={\"match\"} activeKey={tab} onSelect={(v) => v ? setTab(v) : setTab(undefined)} unmountOnExit={false}>\n                <Tab eventKey={\"match\"} title={\"Active Match\"}>\n                    <MatchTab activeMatch={activeMatch} notes={notes} showNote={showNote} send={send} nowCallback={nowCallback}\n                              flip={flip} setFlip={setFlip} fullscreen={fullscreen} autoOpen={autoOpen} setAutoOpen={setAutoOpen}\n                              dcOpen={dcOpen} setDcOpen={setDcOpen} waitForInitSubmit={waitForInitSubmit} fieldCount={fieldCount} field={field} />\n                </Tab>\n                {hrControl ?\n                    <Tab eventKey={\"control\"} title={<div title={field !== 0 ? \"Not available on field-bound HR page.\" : \"\"} style={{pointerEvents: 'auto'}}>Match Control</div>} disabled={field !== 0}>\n                    <HrControlTab eventCode={event} field={field} showMatchTab={() => {\n                        setTab('match');\n                    }}/>\n                </Tab> : null}\n                <Tab eventKey={\"notes\"} title={\"Notes\"}>\n                    <NotesTab notes={notes} meetingNotes={meetingNotes} matchList={matchList} send={send} showNote={showNote} />\n                </Tab>\n                <Tab eventKey={\"timing\"} title={\"Timers\"}>\n                    {!window.isParent || matchList.length > 0\n                        ? <TimingTab activeMatch={activeMatch} matchList={matchList} timeouts={timeouts} nextMatch={nextMatch} send={send} nowCallback={nowCallback} field={field}/>\n                        : <MultiDivisionTimingTab divisionTimeoutData={data} divisionNames={window.divisions!} nowCallback={nowCallback}/>\n                    }\n                </Tab>\n                <Tab eventKey={\"scores\"} title={\"Scoresheets\"}>\n                    <ScoresheetTab matchLists={Object.fromEntries(Object.entries(data).map(([k, v]) => [k, v.matchList]))} divisionNames={window.divisions}/>\n                </Tab>\n            </Tabs>\n        </LocalErrorBoundary>\n    </>\n}","import HeadRef from \"./HeadRef\";\nimport LocalErrorBoundary from \"../LocalErrorBoundary\";\nimport { createRoot } from \"react-dom/client\";\ndeclare global {\n    interface Window {\n        field: number\n        fieldCount: number\n        eventCode: string\n        hrControl?: boolean\n        isDivision: boolean\n        isParent: boolean\n        division: number\n        divisions?: string[]\n    }\n}\n\nconst container = document.getElementById('headRefContent');\nif (!container) {\n    console.error(\"Mount point for head ref container not found\")\n} else {\n    const root = createRoot(container);\n    root.render(<LocalErrorBoundary>\n        <HeadRef field={window.field} event={window.eventCode} fieldCount={window.fieldCount} hrControl={window.hrControl}/>\n    </LocalErrorBoundary>);\n}\n"],"names":["NoteItem","item","index","match","updateItem","update","changes","tagBoxes","a","jsxs","Form","team","jsx","_a","e","x","t","NoteDialog","show","setShow","note","setNote","send","i","newNote","items","next","_b","summary","footer","redTeams","blueTeams","Fragment","Button","Modal","MatchView","notes","matchList","showNote","getOneLiner","fullMatchList","matchNote","b","matchSortShortname","rows","a_last_space","orig_a_part","b_last_space","orig_b_part","sfNum","m","toLevel","notesByTeam","teamMap","noteSummary","itemContent","separator","contentToShow","TeamView","teams","renderTeamRowContent","idx","MeetingNote","type","meetingNotes","editing","setEditing","useState","meetingInfo","MEETINGS","label","ReactQuill","content","HrMeetingNoteType","NotesTab","subTab","setSubTab","meeting","setMeeting","meetingNote","setMeetingNote","showMeetingNote","dropdowns","TeamNotesDialog","noteList","getGeneralNote","initialGeneral","setInitialGeneral","general","setGeneral","useEffect","init","matchNoteIndex","displayNumber","cardList","_c","generalNote","timeString","timestamp","getTimeoutTargetMatch","timeout","nextMatch","isLaterMatch","TimeoutType","lof","isNext","nextScheduled","almt","TimeoutDetailRow","nowCallback","selected","targetMatch","timer","useTimer","Time","Duration","d","renderTime","onRowClick","redSeed","blueSeed","red1","red2","red3","blue1","blue2","blue3","messageDialog","isApplicableTimeout","getTimeoutTypeOrder","getActiveStartTimer","timeouts","applicable","to","getTimeoutEnd","isT206Timeout","isT206DependencyTimeout","p","c","MatchSorter","TimingTab","field","activeMatch","currentTime","setCurrentTime","g301Timeout","isG301Timeout","g301Timer","expected","expectedStartTime","useInterval","startWarning","confirmDialog","forceStretchStyle","t206Alt","t206AltPlayoffs","WarningState","WarningState2","currentTimer","matchLabel","otherField","matchListFiltered","wrapped","_d","_e","_f","_g","_h","MatchType","w","ScoresheetTab","matchLists","divisionNames","activeDivision","setActiveDivision","setMatch","sheet","setSheet","sheetData","setSheetData","playoffOnly","setPlayoffOnly","useLocalStorageState","eventCode","url","html","NAMES","opts","btns","name","Check","value","RobotLocation","Positive","Identity","CardRowTeam","flip","alliance","noShow","card","carry","updateCard","showCard","noteCount","COLORS","TEXT","teamDiv","cardDiv","getUpdateObj","NEXT_CARD","CardRow","robot","initialCards","allianceCards","red","redNumber","blue","blueNumber","redCarry","_i","blueCarry","_j","redCard","blueCard","redNoShow","blueNoShow","redHasNotes","_k","blueHasNotes","_l","current","hasCarry","n","obj","redTeam","blueTeam","AllianceRpInputs","checked","v","ScoreRow","id","fieldName","Component","classFn","render","scores","realFieldName","ValuelessComponent","extractRaw","AllianceColor","classes","getLagStatus","ref","matchState","waitForInitSubmit","getMatchState","BigValue","MatchTab","setFlip","fullscreen","autoOpen","setAutoOpen","dcOpen","setDcOpen","fieldCount","setShowCard","showRP","setShowRPViolations","matchTimer","useMatchTimer","replayCards","gateSvg","useAsset","setReview","teamNotes","useMemo","showTeamNote","cards","Classifier","useCallback","ReactSVG","faSquare","Artifact","randomizationArtifacts","r","inHrReview","forceReview","updateFoul","lowerAlliance","toggleAutoOpen","toggleDcOpen","randomizationText","ArtifactType","colorLower","Counter","val","HrControlTab","showMatchTab","displayUpdates","settings","isArchived","loadedMatch","remaining","loadMatch","nextMatchNum","useControlConnection","activeMatchRunning","showPostWarning","CurrentMatches","Alert","ActionButtons","number","previewMatch","randomizeMatch","showRandom","showMatch","startMatch","abortMatch","commitMatch","MultiDivisionTimingTab","divisionTimeoutData","divs","k","DivisionTimingInfo","div","data","timeSinceStart","setTimeSinceStart","lastMatch","delayStr","getMatchFromShortName","shortName","isRunning","state","matchReducer","newState","defaultHrData","updateHrData","action","division","currentData","HeadRef","event","hrControl","isConnected","usePersistentWebsocketWithTime","handleMessage","socket","tab","setTab","dispatchUpdate","useReducer","noteOpen","setNoteOpen","currentNote","setCurrentNote","noteMode","setNodeMode","currentTeamNotes","setCurrentTeamNotes","setFullscreen","isFullScreen","divisionData","g301Start","msg","noteData","teamData","toggleFullscreen","LocalErrorBoundary","Tabs","Tab","container","createRoot"],"mappings":"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"}