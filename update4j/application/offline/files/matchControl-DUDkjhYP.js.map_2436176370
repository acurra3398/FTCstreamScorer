{"version":3,"file":"matchControl-DUDkjhYP.js","sources":["../../../../../../.yarn/__virtual__/react-bootstrap-virtual-7bf9f73a65/0/cache/react-bootstrap-npm-1.6.8-caaf8304af-a1fbf0975d.zip/node_modules/react-bootstrap/esm/Spinner.js","../../../../../src/main/javascript/matchControl/api/display.ts","../../../../../src/main/javascript/matchControl/api/management.ts","../../../../../src/main/javascript/matchControl/VideoSwitch.tsx","../../../../../src/main/javascript/matchControl/Settings.tsx","../../../../../src/main/javascript/matchControl/Schedule.tsx","../../../../../src/main/javascript/matchControl/MatchHistoryDialog.tsx","../../../../../src/main/javascript/matchControl/seasons/Decode.tsx","../../../../../src/main/javascript/matchControl/ScoreEdit.tsx","../../../../../src/main/javascript/matchControl/AllianceSelection.tsx","../../../../../src/main/javascript/matchControl/ButtonTabs.tsx","../../../../../src/main/javascript/matchControl/DeauthNotifications.tsx","../../../../../src/main/javascript/matchControl/DeauthDetails.tsx","../../../../../src/main/javascript/matchControl/MatchControl.tsx","../../../../../src/main/javascript/matchControl/index.jsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"variant\", \"animation\", \"size\", \"children\", \"as\", \"className\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Spinner = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      variant = _ref.variant,\n      animation = _ref.animation,\n      size = _ref.size,\n      children = _ref.children,\n      _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'div' : _ref$as,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'spinner');\n  var bsSpinnerPrefix = bsPrefix + \"-\" + animation;\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    className: classNames(className, bsSpinnerPrefix, size && bsSpinnerPrefix + \"-\" + size, variant && \"text-\" + variant)\n  }), children);\n});\nSpinner.displayName = 'Spinner';\nexport default Spinner;","import {BracketStyle} from \"ftc-common/javaTypes\";\nimport {PermissiveURLSearchParams} from \"ftc-common/utils\";\nimport {messageDialog} from \"first-common/dialogs\";\nimport {t} from \"ftc-common/i18n\";\nimport {DisplayConfig} from \"ftc-common/displays/Config\";\n\nexport async function showSponsors(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/sponsors/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showBracket(eventCode: string, style: BracketStyle, field?: number) {\n    const params: {\n        style?: BracketStyle,\n        field?: number\n    } = {}\n    if(style) {\n        params.style = style\n    }\n    if(field) {\n        params.field = field\n    }\n    await fetch(`/event/${eventCode}/control/bracket/`, {\n        method: \"POST\",\n        body: PermissiveURLSearchParams(params)\n    })\n}\n\nexport async function showAllianceSelection(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/selection/show/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showRanks(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/ranks/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showInspectionStatus(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/status/`, {\n        method: \"POST\",\n        body: field ?PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showWifi(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/command/wifi/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showSlideshow(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/command/slideshow/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showSafetySecurity(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/command/safety_security/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showBlank(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/command/blank/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showVideo(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/command/video/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showAudienceKey(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/command/key/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n}\n\nexport async function showOnlineResults(eventCode: string, field?: number) {\n    const res = await fetch(`/event/${eventCode}/control/command/online/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field }) : null\n    })\n    if (!res.ok || (await res.text()) !== 'OK') {\n        messageDialog({\n            label: t`Unable to Show Online Results`,\n            text: t`Cannot show online information when sync is disconnected`\n        })\n    }\n}\n\nexport async function showMessage(eventCode: string, message: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/message/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ msg: message, field }) : PermissiveURLSearchParams({ msg: message })\n    })\n}\n\nexport async function playVideo(eventCode: string, videoUrl: string, subtitleUrl: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/play_video/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field, videoUrl, subtitleUrl }) : PermissiveURLSearchParams({ videoUrl, subtitleUrl })\n    })\n}\n\nexport async function stopVideo(eventCode: string, field?: number) {\n    await fetch(`/event/${eventCode}/control/command/stop_video/`, {\n        method: \"POST\",\n        body: field ? PermissiveURLSearchParams({ field  }) : null\n    })\n}\n\nexport async function setConfig(eventCode: string, id: string, config: DisplayConfig) {\n    await fetch(`/event/${eventCode}/control/display/config/${id}/`, {\n        method: \"POST\",\n        body: JSON.stringify(config)\n    })\n}\n\nexport async function bulkReconfigure(eventCode: string, ids: string[], division: number, field: number) {\n    await fetch(`/event/${eventCode}/control/display/bulk_config/`, {\n        method: \"POST\",\n        body: JSON.stringify({\n            ids: ids,\n            division: division,\n            field: field\n        })\n    })\n}\n\n","export async function setConfig(eventCode: string, key: string, value: any) {\n    await fetch(`/event/${eventCode}/config/set/`, {\n        method: \"POST\",\n        body: new URLSearchParams({ key, value })\n    })\n}\n\nexport async function setTestMode(eventCode: string, state: boolean) {\n    await fetch(`/event/${eventCode}/control/testmode/${state}/`, {\n        method: \"POST\",\n    })\n}\n\nexport async function advanceToQuals(eventCode: string) {\n    await fetch(`/event/${eventCode}/control/quals/`, {\n        method: \"POST\",\n    })\n}\n\nexport async function returnToPractice(eventCode: string) {\n    await fetch(`/event/${eventCode}/control/practice/`, {\n        method: \"POST\",\n    })\n}\n\nexport async function testSync(eventCode: string) {\n    const res = await fetch(`/event/${eventCode}/control/sync/test/`, {\n        method: \"POST\",\n    })\n    return await res.text();\n}\n\nexport async function syncNow(eventCode: string) {\n    const res = await fetch(`/event/${eventCode}/control/sync/now/`, {\n        method: \"POST\",\n    })\n    return await res.text();\n}\n\nexport async function downloadVideos() {\n    const res = await fetch(`/manage/video_download/`, {\n        method: \"POST\",\n    })\n    return res.ok;\n}\n\n","import {Alert, Button, Col, Form, Modal, ProgressBar, Row} from \"react-bootstrap\";\nimport {useEffect, useState} from \"react\";\nimport {t} from 'ftc-common/i18n';\nimport ReactQuill from \"react-quill\";\nimport 'react-quill/dist/quill.snow.css';\nimport './VideoSwitch.css';\nimport ConfigDialog from \"ftc-common/displays/ConfigDialog\";\nimport * as api from \"./api/display\";\nimport {\n    showAllianceSelection,\n    showAudienceKey,\n    showBlank,\n    showBracket,\n    showMessage,\n    showOnlineResults,\n    showRanks,\n    showSponsors,\n    showVideo,\n    showWifi,\n    showInspectionStatus, showSafetySecurity, showSlideshow, playVideo, stopVideo\n} from \"./api/display\";\nimport {BracketStyle} from \"ftc-common/javaTypes\";\nimport {DisplayData} from \"../javaTypes\";\nimport {DisplayConfig} from \"ftc-common/displays/Config\";\nimport {downloadVideos} from \"./api/management\";\nimport {useQuery, useQueryClient} from \"@tanstack/react-query\";\nimport {FileData, fileUploadDialog} from \"first-common/upload\";\n\nexport type DisplayDataWithConfig = DisplayData & {data: DisplayConfig};\n\nfunction DisplaysTable({eventCode, displayData, fieldCount, showMeetRankings, isDualDivisionParent, divisions}: {\n    eventCode: string,\n    displayData: DisplayDataWithConfig[],\n    fieldCount: number,\n    showMeetRankings: boolean,\n    isDualDivisionParent: boolean,\n    divisions: string[]\n}) {\n    const [selectedDisplay, setSelectedDisplay] = useState<DisplayDataWithConfig>();\n    const [sortedDisplays, setSortedDisplays] = useState<DisplayDataWithConfig[]>([]);\n    const [checkedDisplays, setCheckedDisplays] = useState<string[]>([]);\n    const [showBulkReconfigure, setShowBulkReconfigure] = useState(false);\n    const [bulkDivision, setBulkDivision] = useState(0);\n    const [bulkField, setBulkField] = useState(0);\n    useEffect(() => {\n        // If the display being configured DCs, close the dialog.\n        if (selectedDisplay && !displayData.some(d => d.id === selectedDisplay?.id)) {\n            setSelectedDisplay(undefined);\n        }\n    }, [selectedDisplay, displayData]);\n\n    useEffect(() => {\n        setSortedDisplays([...displayData].sort((a, b) => {\n            if(a.division != b.division) {\n                return a.division - b.division;\n            } else if(a.data.name !== b.data.name) {\n                const aName = a.data.name\n                const bName = b.data.name\n                if(aName && !bName) {\n                    return 1;\n                } else if(!aName && bName) {\n                    return -1;\n                } else if(aName && bName) {\n                    return aName.localeCompare(bName)\n                } else {\n                    return 0;\n                }\n            } else {\n                return a.id.localeCompare(b.id)\n            }\n        }))\n    }, [displayData]);\n    const typeMap = {\n        audience: t`Audience`,\n        field: t`Field`,\n        cmpBar: t`Banner`,\n        pit: t`Pit`,\n        sponsor: t`Sponsors`\n    }\n    const row = (data: DisplayDataWithConfig) => {\n        let config = data?.data;\n        if (!config) {\n            return null;\n        }\n        const configBtn = <button className={\"btn btn-info btn-sm\"} onClick={() => setSelectedDisplay(data)}>{t`Config`}</button>\n        const divisionDisplay = data.division ? divisions[data.division - 1] : t`Parent`;\n        const intro = <>\n            <td><input type=\"checkbox\"\n                       checked={checkedDisplays.includes(data.id)}\n                       onChange={(e) => {\n                           if ((e.target as HTMLInputElement).checked) {\n                               setCheckedDisplays([...checkedDisplays, data.id]);\n                           } else {\n                               setCheckedDisplays(checkedDisplays.filter(ip => ip !== data.id));\n                           }\n                       }}\n            /></td>\n            <td>{data.ip}</td>\n            {isDualDivisionParent ? <td>{divisionDisplay}</td> : null}\n            <td>{config.name}</td>\n            <td>{typeMap[config.type]}</td>\n        </>\n        if (config.type === \"pit\" || config.type === \"sponsor\") {\n            return <tr>{intro}<td></td><td></td><td></td><td></td><td></td><td>{configBtn}</td></tr>\n        }\n        // TODO maybe warning icon if >1 on same IP unmuted?\n        return <tr key={data.id}>\n            {intro}\n            <td>{config.bindToField === \"all\" ? t`All` : config.bindToField}</td>\n            <td>{config.overlay ? t`Overlay` : (config.fieldStyleTimer ? t`Field` : t`Audience`)}</td>\n            <td>{config.mute ? t`Off` : t`On`}</td>\n            <td>{config.scoringBarLocation === \"bottom\" ? t`Bottom` : t`Top`}</td>\n            <td>{config.allianceOrientation === \"standard\" ? t`Standard (Red on Left)` : t`Flipped (Red on Right)`}</td>\n            <td>{configBtn}</td>\n        </tr>\n    }\n\n    function sendBulkUpdate() {\n        api.bulkReconfigure(eventCode, checkedDisplays, bulkDivision, bulkField);\n        setCheckedDisplays([]);\n        setShowBulkReconfigure(false);\n    }\n\n    return <>\n        <table style={{width: \"100%\", textAlign: \"center\"}}>\n            <thead>\n            <tr style={{borderBottom: \"1px solid white\"}}>\n                <th></th>\n                <th>{t`IP`}</th>\n                {isDualDivisionParent ? <th>{t`Division`}</th> : null}\n                <th>{t`Name`}</th>\n                <th>{t`Type`}</th>\n                <th>{t`Field`}</th>\n                <th>{t`Timer Style`}</th>\n                <th>{t`Audio`}</th>\n                <th>{t`Scoring Bar`}</th>\n                <th>{t`Alliance Orientation`}</th>\n                <th>{t`Config`}</th>\n            </tr>\n            </thead>\n            <tbody>\n            {sortedDisplays.map((d) => row(d))}\n            </tbody>\n        </table>\n        <Button className={\"mr-2\"} variant={\"primary\"} size={\"sm\"} disabled={checkedDisplays.length == 0} onClick={() => setShowBulkReconfigure(true)}>{t`Bulk Reconfigure`}</Button>\n        {isDualDivisionParent ? <>\n            <Button className={\"mr-2\"} variant={\"secondary\"} size={\"sm\"} onClick={() => setCheckedDisplays(sortedDisplays.map(d => d.id))}>{t`Select All`}</Button>\n            <Button className={\"mr-2\"} variant={\"secondary\"} size={\"sm\"} onClick={() => setCheckedDisplays([])}>{t`Clear Selection`}</Button>\n        </>: null}\n        {selectedDisplay?.data ?\n        <ConfigDialog show={!!selectedDisplay} handleClose={() => setSelectedDisplay(undefined)} fieldCount={selectedDisplay.division ? 2 : (fieldCount || 1)}\n                      config={selectedDisplay?.data} setConfig={(cfg) => {\n                            setSelectedDisplay(Object.assign({}, selectedDisplay, {data: cfg}))\n                            api.setConfig(eventCode, selectedDisplay.id, cfg);\n                      }} isDualDivisionParent={isDualDivisionParent && !selectedDisplay.division} style={\"default\"} showMeetRankings={showMeetRankings} remoteConfig={true}/>\n            : null}\n        <Modal show={showBulkReconfigure} onHide={() => setShowBulkReconfigure(false)}>\n            <Modal.Header closeButton>\n                <Modal.Title>Reconfigure Multiple Displays</Modal.Title>\n            </Modal.Header>\n\n            <Modal.Body>\n                <Row>\n                {isDualDivisionParent ? <>\n                  <Form.Label column sm=\"4\">{t`Division`}</Form.Label>\n                  <Col sm=\"8\">\n                      <Form.Control as=\"select\" custom value={bulkDivision} onChange={e => setBulkDivision(parseInt(e.target.value))}>\n                            <option value={0}>{t`Parent`}</option>\n                            {divisions.map((d, i) => <option key={i} value={i + 1}>{d}</option>)}\n                      </Form.Control>\n                  </Col>\n                </>: null}\n                <Form.Label column sm=\"4\">{t`Bind to Field`}</Form.Label>\n                <Col sm=\"8\">\n                    <Form.Control as=\"select\" custom value={bulkField} onChange={e => setBulkField(parseInt(e.target.value))}>\n                        <option value={0}>{t`(All)`}</option>\n                        {[...Array(bulkDivision ? 2 : (fieldCount || 1)).keys()].map(i => {\n                            const fieldNo = i + 1;\n                            return <option key={fieldNo} value={fieldNo}>{t`Field ${fieldNo}`}</option>\n                        })}\n                    </Form.Control>\n                </Col>\n                </Row>\n            </Modal.Body>\n\n            <Modal.Footer>\n                <Button variant=\"secondary\" onClick={() => setShowBulkReconfigure(false)}>Close</Button>\n                <Button variant=\"primary\" onClick={() => sendBulkUpdate()}>Update Display</Button>\n            </Modal.Footer>\n        </Modal>\n    </>\n}\n\nfunction VideoUpdater() {\n    const [updateProgress, setUpdateProgress] = useState<undefined | number>(undefined);\n    const [updateStatusText, setUpdateStatusText] = useState(\"\");\n    const queryClient = useQueryClient();\n\n    async function updateVideos() {\n        setUpdateProgress(undefined);\n        setUpdateStatusText(t`Starting update...`);\n        if(!await downloadVideos()) {\n            setUpdateStatusText(\"Failed to start video download.\");\n            return;\n        }\n        const ws = new WebSocket(`${window.location.protocol === \"https:\" ? \"wss\" : \"ws\"}://${window.location.host}/stream/manage/video_download/status/`);\n        ws.onmessage = function(evt) {\n            const msg = JSON.parse(evt.data);\n            if(msg.progress) {\n                setUpdateProgress(msg.progress);\n                setUpdateStatusText(t`Downloading videos...`);\n            } else if(msg.complete) {\n                setUpdateProgress(1);\n                setUpdateStatusText(t`Video download complete!`);\n                queryClient.invalidateQueries({ queryKey: [\"ceremony-videos\"] })\n            } else if(msg.error) {\n                setUpdateProgress(1);\n                setUpdateStatusText(t`Video download failed: ` + msg.error);\n            }\n            if(msg.complete || msg.error) {\n                ws.close();\n            }\n        };\n    }\n\n    return <div>\n        <Button className={\"mr-2\"} variant={\"success\"} onClick={() => updateVideos()}>{t`Download/Update Videos`}</Button>\n        {updateStatusText ? <div>\n            <div>{updateStatusText}</div>\n            {updateProgress != undefined ? <ProgressBar now={updateProgress} max={1}></ProgressBar> : null}\n        </div> : null}\n    </div>\n}\n\ntype VideoManifest = {\n    key: string,\n    name: string,\n    path: string,\n    subtitleLocales: {\n        locale: string,\n        path: string,\n    }[]\n}[]\n\nfunction VideoPlayback({eventCode}: {\n    eventCode: string\n}) {\n    const videoQuery = useQuery<VideoManifest>({\n        queryKey: [\"ceremony-videos\"],\n        queryFn: async function() {\n            const res = await fetch(`/ceremony-videos/manifest.json`);\n            if(res.status == 404) {\n                return []\n            } else if (!res.ok) {\n                throw new Error(`Error fetching video manifest: ${res.statusText}`);\n            } else {\n                return await res.json();\n            }\n        }\n    })\n\n    const [selectedVideo, setSelectedVideo] = useState<string | null>(null);\n    const [subtitleLocale, setSubtitleLocale] = useState<string>('en');\n    const [customSubtitles, setCustomSubtitles] = useState<Record<string, FileData>>({});\n\n    const videoData = videoQuery.data?.find(d => d.key == selectedVideo);\n\n    return <fieldset>\n        <legend>{t`Videos`}</legend>\n        <Alert variant={\"warning\"}>\n            {t`Must be online to download videos.`}<br/>\n            {t`Video will play on all audience displays.`}<br/>\n            {t`Audio will not necessarily be synced between displays, so ensure you are only playing audio from one display.`}<br/>\n            {t`Videos are not necessarily chroma-key safe. Ensure you are displaying the scoring display without chroma keying (transparent overlay is ok) when playing videos or play videos through an external system.`}\n        </Alert>\n        {videoQuery.data && videoQuery.data.length > 0 ? <Form.Control as=\"select\" custom style={{width: 'auto'}} className={\"mb-2\"} value={selectedVideo || undefined} onChange={(e) => setSelectedVideo(e.target.value)}>\n            <option value=\"\">{t`Select a video`}</option>\n            {videoQuery.data.map((v) => <option key={v.key} value={v.key}>{v.name}</option>)}\n        </Form.Control> : (videoQuery.data ? <span className={\"mr-2\"}>{t`Videos must be downloaded`}</span> : null)}\n        <Form.Group className={\"mb-2\"}>\n            <Form.Label>{t`Subtitles`}</Form.Label>\n            <Form.Control as=\"select\" custom style={{width: 'auto'}} className={\"ml-2\"} value={subtitleLocale} onChange={(e) => setSubtitleLocale(e.target.value)} disabled={!selectedVideo}>\n                {videoData?.subtitleLocales.map((v) => <option key={v.locale} value={v.locale}>{new Intl.DisplayNames(document.documentElement.lang, {\n                    type: 'language'\n                }).of(v.locale)}</option>) || <option>{t`Pick a video first`}</option>}\n                <option value={\"zz\"}>{t`Custom`}</option>\n            </Form.Control>\n            {subtitleLocale == \"zz\" && selectedVideo ? <Button variant={!customSubtitles[selectedVideo] ? \"warning\" : \"secondary\"} className={\"ml-2\"} onClick={() => fileUploadDialog({\n                label: t`Upload Subtitle File`,\n                text: t`Upload a subtitle file in WebVTT format (.vtt)`,\n                onComplete: (file?: FileData) => {\n                    if(file) {\n                        setCustomSubtitles(was => ({...was, [selectedVideo]: file}));\n                    }\n                },\n                filter: {\n                    regex: 'text/vtt',\n                    error: t`File must be a .vtt subtitle file`\n                }\n            })}>{customSubtitles[selectedVideo] ? 'Replace' : 'Upload'}</Button> : null}\n        </Form.Group>\n        <Button className={\"mr-2 mb-2\"} variant={\"success\"} onClick={() => playVideo(eventCode, videoData!.path, subtitleLocale == 'zz' ? customSubtitles[selectedVideo!].previewUrl : videoData!.subtitleLocales.find(s => s.locale == subtitleLocale)?.path || '')} disabled={!selectedVideo || (subtitleLocale == 'zz' && !customSubtitles[selectedVideo])}>{t`Play Video`}</Button>\n        <Button className={\"mr-2 mb-2\"} variant={\"success\"} onClick={() => stopVideo(eventCode)} disabled={!selectedVideo}>{t`Abort Video`}</Button>\n        <VideoUpdater />\n    </fieldset>\n}\n\nexport default function VideoSwitch({eventCode, displayData, fieldCount, showMeetRankings, pinField, isDualDivisionParent, isDivision, divisions}: {\n    eventCode: string,\n    displayData: DisplayDataWithConfig[],\n    fieldCount: number,\n    showMeetRankings: boolean,\n    pinField?: number,\n    isDualDivisionParent: boolean,\n    isDivision: boolean,\n    divisions: string[]\n}) {\n    const [message, setMessage] = useState('');\n    const [hasMessage, setHasMessage] = useState(false);\n    const [advancedEditor, setAdvancedEditor] = useState(false);\n    // We need this slightly awkward logic to handle the fact that the RCE may end up with empty p/br tags and nothing else\n    useEffect(() => {\n        const el = document.createElement(\"div\");\n        el.innerHTML = message;\n        let hasMessage = false;\n        hasMessage ||= el.textContent ? el.textContent.length > 0 : false;\n        hasMessage ||= el.getElementsByTagName(\"img\").length > 0;\n        hasMessage ||= el.getElementsByTagName(\"video\").length > 0;\n        hasMessage ||= el.getElementsByTagName(\"iframe\").length > 0;\n        setHasMessage(hasMessage);\n        return () => el.remove();\n    }, [message])\n\n    return <div>\n        <fieldset>\n            <legend>{t`General Information`}</legend>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showSlideshow(eventCode, pinField)}>{t`Show Slideshow`}</Button>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showSponsors(eventCode, pinField)}>{t`Show Sponsors`}</Button>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showWifi(eventCode, pinField)}>{t`Show Wifi Reminder`}</Button>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showAudienceKey(eventCode, pinField)}>{t`Show Audience Key`}</Button>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showSafetySecurity(eventCode, pinField)}>{t`Show Safety & Security`}</Button>\n        </fieldset>\n        <fieldset>\n            <legend>{t`Eliminations`}</legend>\n            {/* TODO clean up conditional logic here depending on if we revive any form of giant bracket (e.g. for worlds) or not */}\n            { (isDualDivisionParent || isDivision) ? <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showBracket(eventCode, BracketStyle.TWO_LEVEL, pinField)}>{isDivision ? t`Show Bracket (this division)` : t`Show Bracket (interdivisional only)`}</Button> : null }\n            {(isDualDivisionParent || isDivision) ? null : <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showBracket(eventCode, BracketStyle.FULL, pinField)}>{(isDualDivisionParent || isDivision) ? t`Show Bracket (full)` : t`Show Bracket`}</Button>}\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showAllianceSelection(eventCode, pinField)} disabled={!!pinField}>{t`Show Alliance Selection`}</Button>\n        </fieldset>\n        <fieldset>\n            <legend>{t`Other Displays`}</legend>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showRanks(eventCode, pinField)}>{t`Show Ranks & Results`}</Button>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showBlank(eventCode, pinField)}>{t`Show Blank Screen`}</Button>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showVideo(eventCode, pinField)}>{t`Show Video Only (Overlay)`}</Button>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showOnlineResults(eventCode, pinField)}>{t`Show Online Results Info`}</Button>\n            <Button className={\"mr-2\"} variant={\"success\"} onClick={() => showInspectionStatus(eventCode, pinField)}>{t`Show Inspection Status`}</Button>\n        </fieldset>\n        <fieldset>\n            <legend>{t`Message`}</legend>\n            {advancedEditor ? <textarea className={\"messageEditor\"} onChange={(e) => setMessage((e.target as HTMLTextAreaElement).value)}>\n                {message}\n            </textarea> : <ReactQuill className=\"bg-white text-dark messageEditor\" theme=\"snow\" value={message}\n                        modules={{toolbar: [\n                                [{ 'color': [] }, 'italic', 'underline', 'strike'],\n                                [{'list': 'ordered'}, {'list': 'bullet'}],\n                                ['image'],\n                                ['clean']\n                            ]}}\n                        onChange={(content) => {\n                            setMessage(content);\n                        }} />}\n            <Button className={\"btn-xs my-1\"} variant={\"light\"} onClick={() => setAdvancedEditor((old) => !old)}>\n                {advancedEditor ? t`Basic Editor` : t`Raw HTML`}\n            </Button><br/>\n            <Button className={\"mr-2\"} variant={\"success\"} disabled={!hasMessage} onClick={() => showMessage(eventCode, message, pinField)}>{t`Show Message`}</Button>\n        </fieldset>\n        <VideoPlayback eventCode={eventCode} />\n        <fieldset>\n            <legend>{t`Connected Displays`}</legend>\n            <DisplaysTable eventCode={eventCode} displayData={displayData} fieldCount={fieldCount} showMeetRankings={showMeetRankings} isDualDivisionParent={isDualDivisionParent} divisions={divisions} />\n        </fieldset>\n    </div>\n}\n","import {Button, Dropdown, DropdownButton, Form} from \"react-bootstrap\";\n\nimport { t } from 'ftc-common/i18n';\nimport {useCallback, useId, useState} from \"react\";\nimport {advanceToQuals, returnToPractice, setConfig, setTestMode, syncNow, testSync} from \"./api/management\";\nimport {endTimeout, fieldTimeout, showTimeout} from \"./api/match\";\n\nimport {useTimer} from \"ftc-common/hooks\";\nimport {useUniqueId} from \"ftc-common/utils\";\nimport {confirmDialog, messageDialog} from \"first-common/dialogs\";\nimport { EventSettings, MatchType, ScheduleUpdateSyncStatus, TimeoutData } from \"../javaTypes\";\nimport { ControlMatch } from \"./connection\";\nimport { SelectionState } from \"ftc-common/javaTypes\";\n\nexport default function Settings({settings, eventCode, isMeet, isArchived, showHelp, activeType, activeMatch,\n                            syncStatus, timeoutData, resetElims, nowCallback, selectionState,\n                            showDeauthDetails, isDualDivisionParent, matches, unsavedMatchCount} : {\n    settings: Partial<EventSettings>,\n    eventCode: string,\n    isMeet: boolean,\n    isArchived: boolean,\n    showHelp: () => void,\n    activeType: MatchType,\n    activeMatch?: ControlMatch<any, any>,\n    syncStatus: ScheduleUpdateSyncStatus,\n    timeoutData: Partial<TimeoutData>,\n    resetElims: () => void,\n    nowCallback: () => number,\n    selectionState?: SelectionState,\n    showDeauthDetails?: () => void,\n    isDualDivisionParent: boolean,\n    matches: ControlMatch<any, any>[],\n    unsavedMatchCount: number\n}) {\n    const setSetting = useCallback(async (key: string, value: any) => {\n        await setConfig(eventCode, key, value)\n    }, [])\n    const testMode = activeType === 'TEST';\n    const [connectionTestResponse, setConnectionTestResponse] = useState(\"\");\n    const [syncNowResponse, setSyncNowResponse] = useState(\"\");\n    const baseId = useId();\n\n    const activeMatchRunning = activeMatch && activeMatch?.state !== 'REVIEW' && activeMatch?.state !== 'SUBMITTED'\n\n    const now = nowCallback();\n    // const isTimeoutRunning = timeoutData.activeTimeouts?.some(t => t.start + t.duration > now);\n    // const canStartFieldTimeout = !isArchived && !activeMatchRunning && activeType === 'QUALS' && !isTimeoutRunning;\n    // const canEndTimeout = !isArchived && isTimeoutRunning && activeType === 'QUALS';\n\n    async function tryEndTimeout(code: string) {\n        if (!await confirmDialog({\n            label: t`End Timeout?`,\n            text: t`Are you sure you want to end the timeout? This will silently end the timeout timer. This cannot be undone - \n                    the timer can only be restarted with a new 5:00 countdown.`\n        })) {\n            return;\n        }\n        await endTimeout(code);\n    }\n\n    // const c08start = timeoutData.qualsTimeoutStart || 0;\n    // const c08Timer = useTimer({\n    //     startAt: c08start,\n    //     duration: 300,\n    //     nowCallback: nowCallback\n    // })\n    // const c08TimeLeft = c08Timer.running ? `${Math.floor(c08Timer.remaining / 60)}:${(c08Timer.remaining % 60).toString().padStart(2, '0')}` : t`N/A`\n    //\n    // const fieldTimeoutBtn = activeType === 'QUALS' ? <> {\n    //     <DropdownButton className={\"mr-2 d-inline-block\"} variant={canStartFieldTimeout ? \"success\" : \"light\"} disabled={!canStartFieldTimeout} title={t`Field Timeout`}>\n    //         <Dropdown.Item onClick={() => fieldTimeout(eventCode, true)} disabled={!c08Timer.running || activeMatchRunning}>{t`From Field Clear (${c08TimeLeft})`}</Dropdown.Item>\n    //         <Dropdown.Item onClick={() => fieldTimeout(eventCode, false)}>{t`From Current Time`}</Dropdown.Item>\n    //     </DropdownButton>\n    // }</> : null;\n\n    const silently = `<strong><u>${t`silently`}</u></strong>`;\n    const alwaysSilent = `<strong><u>${t`always silent`}</u></strong>`;\n    const meetRankingsUniqueId = useUniqueId();\n\n    const transitionTestMode = useCallback(async (eventCode: string, mode: boolean) => {\n        // We only need to warn when _entering_ test mode. You can leave behind unsaved test matches without danger\n        if(unsavedMatchCount > 0 && mode) {\n            messageDialog({\n                label: t`Incomplete Matches!`,\n                text: t`There are ${unsavedMatchCount} incomplete matches! Please commit them before entering test mode.`,\n            })\n            return\n        }\n        await setTestMode(eventCode, mode)\n    }, [unsavedMatchCount])\n\n    const transitionToPractice = useCallback(async (eventCode: string) => {\n        // We only need to warn when _entering_ practice mode. You can leave behind unsaved practice matches without danger\n        if(unsavedMatchCount > 0) {\n            messageDialog({\n                label: t`Incomplete Matches!`,\n                text: t`There are ${unsavedMatchCount} incomplete matches! Please commit them before returning to practice matches.`,\n            })\n            return\n        }\n        await returnToPractice(eventCode)\n    }, [unsavedMatchCount])\n\n    return <div>\n        {isArchived ? <fieldset>\n            <legend>{t`Event Archived`}</legend>\n            {t`This event has been archived and uploaded to FIRST. If you need to make any changes, please contact FIRST event help.`}<button className={\"btn btn-link\"} onClick={showHelp}>{t`Contact Information`}</button>\n        </fieldset> : null }\n        <fieldset>\n            <legend>{t`Active Match Schedule`}</legend>\n            <Button className={\"mr-2\"} variant={isArchived || activeMatchRunning ? \"light\" : \"success\"} disabled={isArchived || activeMatchRunning} onClick={() => transitionTestMode(eventCode, !testMode)}>{testMode ? t`Exit Test Mode` : t`Enter Test Mode`}</Button>\n            <Button className={\"mr-2\"} variant={isArchived || activeMatchRunning ? \"light\" : \"success\"} disabled={isArchived || activeMatchRunning || activeType !== 'PRACTICE'} title={activeType === 'TEST' ? t`Cannot advance to quals while in test mode` : undefined} onClick={() => advanceToQuals(eventCode)}>{t`Advance to Quals`}</Button>\n            <Button className={\"mr-2\"} variant={isArchived || activeMatchRunning ? \"light\" : \"success\"} disabled={isArchived || activeMatchRunning || activeType !== 'QUALS'} title={activeType === 'TEST' ? t`Cannot return to practice while in test mode` : undefined} onClick={() => transitionToPractice(eventCode)}>{t`Return to Practice`}</Button>\n        </fieldset>\n        <fieldset>\n            <legend>{t`Timing Controls`}</legend>\n            {/*{fieldTimeoutBtn}*/}\n            {/*<Button className={\"mr-2\"} variant={isTimeoutRunning ? \"success\" : \"light\"} disabled={!isTimeoutRunning} onClick={() => showTimeout(eventCode)}>{t`Show Timeout`}</Button>*/}\n            {/*<Button className={\"mr-2\"} variant={isTimeoutRunning ? \"success\" : \"light\"} disabled={true} >{t`Silence Current Timeout`}</Button>*/}\n            {/*<Button className={\"mr-2\"} variant={canEndTimeout ? \"danger\" : \"light\"} disabled={!canEndTimeout} hidden={activeType !== 'QUALS'} onClick={() => tryEndTimeout(eventCode)}>{t`End Timeout`}</Button>*/}\n            {<div dangerouslySetInnerHTML={{__html: t`Timing still under development. All T206 and pre-violation G301 timers are started automatically and are ${alwaysSilent}`}}/>}\n            {<div dangerouslySetInnerHTML={{__html: t`Expected start timers will be ${silently} ended if the next match is started. A running timer will not prevent match start - just make sure all teams are ready!`}}/>}\n\n        </fieldset>\n        <fieldset>\n            <legend>{t`Live Scoring`}</legend>\n            <Form.Check\n                type={'checkbox'}\n                label={t`Use Live Scoring`}\n                checked={settings.liveScoring || false}\n                disabled={isArchived}\n                onChange={e => setSetting('liveScoring', e.target.checked)}\n                id={useUniqueId()}\n            />\n            <Form.Check\n                type={'checkbox'}\n                label={t`Require Referee Init Submit Before Match Start`}\n                checked={settings.waitForInitSubmit || false}\n                onChange={e => setSetting('waitForInitSubmit', e.target.checked)}\n                id={useUniqueId()}\n            />\n            <Form.Check\n                type={'checkbox'}\n                label={<>{t`Enable HR Match Control (Beta)`} <i className={\"fa fa-question-circle\"} title={t`Allows basic match control from HR page.`}/></>}\n                checked={settings.hrControl || false}\n                onChange={e => setSetting('hrControl', e.target.checked)}\n                id={useUniqueId()}\n            />\n            <Form.Check\n                type={'checkbox'}\n                label={t`Allow External Randomization`}\n                checked={settings.externalRandom}\n                disabled={isArchived}\n                onChange={e => setSetting('externalRandom', e.target.checked)}\n                id={useUniqueId()}\n            />\n        </fieldset>\n        <fieldset>\n            <legend>{t`Control Page Appearance`}</legend>\n            <Form.Check\n                type={'checkbox'}\n                label={t`Flip Alliances (Red on Left)`}\n                checked={settings.flipControl || false}\n                onChange={e => setSetting('flipControl', e.target.checked)}\n                id={useUniqueId()}\n            />\n            {t`Score tab contrast: `}\n            <select value={settings.controlContrast || 'standard'}\n                onChange={e => setSetting('controlContrast', e.target.value)}>\n                <option value=\"standard\">Standard</option>\n                <option value=\"high\">High</option>\n                <option value=\"max\">Max</option>\n                <option value=\"dark\">Dark Mode</option>\n            </select>\n        </fieldset>\n        { isMeet ? <fieldset>\n            <legend>{t`Scoring/Pit Display Options`}</legend>\n            <Form.Check\n                type={'checkbox'}\n                label={t`Show Event Rankings in addition to League Rankings.`}\n                checked={settings.showMeetRankings}\n                onChange={e => setSetting('showMeetRankings', e.target.checked)}\n                id={meetRankingsUniqueId}\n            />\n        </fieldset> : null }\n        <fieldset>\n            <legend>{t`Sync Settings`}</legend>\n            {t`Sync Delay: `}\n            <i className=\"fas fa-question-circle\"\n               title={t`Delay between match commit and when the match data is sent to FIRST. 10s is the default and recommended checked. This does not affect 3rd party API clients running locally.`}></i>\n            <select value={settings.syncDelay}\n                    onChange={(e) => setSetting('syncDelay', e.target.value)}>\n                <option value=\"10\">{t`10 seconds`}</option>\n                <option value=\"30\">{t`30 seconds`}</option>\n                <option value=\"60\">{t`1 minute`}</option>\n                <option value=\"300\">{t`5 minutes`}</option>\n            </select><br/>\n            Last successful sync: {syncStatus.lastSyncTime > 0 ? new Date(syncStatus.lastSyncTime).toLocaleTimeString() : t`N/A`}<br/>\n            <Button className={\"mt-2\"} variant={\"success\"} onClick={async () => setConnectionTestResponse(await testSync(eventCode))}>{t`Test Connection to HQ`}</Button> <span>{connectionTestResponse}</span><br/>\n            <Button className={\"mt-2\"} variant={\"success\"} onClick={async () => setSyncNowResponse(await syncNow(eventCode))}>{t`Sync Now`}</Button> <span>{syncNowResponse}</span>\n        </fieldset>\n        {settings.allowPlayoffOverrides ? <fieldset>\n            <legend>{t`Playoff Configuration Overrides`}</legend>\n            <label htmlFor={`${baseId}-playoff-type`}>{t`Playoff type:`}&nbsp;</label>\n            <select value={settings.playoffTypeOverride} id={`${baseId}-playoff-type`} disabled={isArchived || activeType == 'ELIMS' || !!selectionState}\n                    onChange={e => {\n                        setSetting('playoffTypeOverride', e.target.value)\n                        if (settings.allianceCountOverride == 6 && e.target.value === 'SINGLE_ELIMINATION') {\n                            setSetting('allianceCountOverride', 0);\n                        }\n                    }}>\n                <option value=\"\">(default)</option>\n                <option value=\"DOUBLE_ELIMINATION\">Double Elimination</option>\n                <option value=\"DOUBLE_ELIMINATION_WITH_FINALS\">Double Elimination With Finals (FRC-Style)</option>\n                <option value=\"SINGLE_ELIMINATION\">Single Elimination</option>\n            </select><br/>\n            <label htmlFor={`${baseId}-alliance-count`}>{t`Alliance count:`}&nbsp;</label>\n            <select value={settings.allianceCountOverride} id={`${baseId}-alliance-count`} disabled={isArchived || activeType == 'ELIMS' || !!selectionState}\n                    onChange={e => setSetting('allianceCountOverride', e.target.value)}>\n                <option value=\"0\">(default)</option>\n                <option value=\"2\">2</option>\n                <option value=\"4\">4</option>\n                <option value=\"6\" disabled={settings.playoffTypeOverride == 'SINGLE_ELIMINATION'}>6</option>\n                <option value=\"8\">8</option>\n            </select><br/>\n            <label htmlFor={`${baseId}-teams-per-alliance`}>{t`Teams per alliance:`}&nbsp;</label>\n            <select value={`${settings.teamsPerAllianceOverride}-${settings.allowBackupsOverride}`} id={`${baseId}-teams-per-alliance`} disabled={isArchived || activeType == 'ELIMS' || !!selectionState}\n                    onChange={e => {\n                        const parts = e.target.value.split('-');\n                        setSetting('teamsPerAllianceOverride', parts[0])\n                        setSetting('allowBackupsOverride', parts[1])\n                    }}>\n                <option value=\"0-\">(default)</option>\n                <option value=\"2-false\">2</option>\n                <option value=\"2-true\">2 (with backups)</option>\n                <option value=\"3-false\">3</option>\n            </select>\n        </fieldset> : null}\n        <fieldset>\n            <legend>{t`Danger Zone`}</legend>\n            <Button className={\"mt-2 mr-2\"} variant={\"danger\"} onClick={() => resetElims()} disabled={(activeType !== 'ELIMS' && !selectionState) || isArchived || (activeType === 'ELIMS' && matches.some(m => m.state === \"COMMITTED\"))}>{isDualDivisionParent ? t`Reset Playoff Matches` : t`Reset Alliance Selection`}</Button>\n            {showDeauthDetails ? <Button className={\"mt-2 mr-2\"} variant={\"warning\"} onClick={showDeauthDetails}>{t`Deauth Event Details`}</Button> : showDeauthDetails}\n        </fieldset>\n    </div>;\n}","import './Schedule.css'\nimport { t } from 'ftc-common/i18n';\nimport {Button} from \"react-bootstrap\";\nimport {TestMatchDialog} from \"./LoadMatchDialog\";\nimport {useState} from \"react\";\nimport { ControlMatch } from './connection';\nimport {AllianceDescription, SeriesAllianceDescription} from \"ftc-common/javaTypes\";\n\nconst buttonAttrs = {\n    className: 'mr-2',\n    variant: 'light'\n}\n\n// @ts-expect-error xs is not an official size\nconst ButtonXs = (props: Omit<ButtonProps, 'size'>) => <Button size={\"xs\"} {...props}/>\n\nexport function isSeriesAllianceDescription(description: AllianceDescription): description is SeriesAllianceDescription {\n    return 'series' in description;\n}\n\nexport default function Schedule({matches, liveScoring, archived, loadMatch, editMatch, commitMatch, postMatch, replayMatch,\n    testMode, eventCode, fieldCount, qualsActive, practiceActive, activeMatchRunning}: {\n    matches: ControlMatch<any, any>[],\n    liveScoring?: boolean,\n    archived: boolean,\n    loadMatch: (matchNumber: number) => void,\n    editMatch: (matchNumber: number) => void,\n    commitMatch: (matchNumber: number) => void,\n    postMatch: (matchNumber: number) => void,\n    replayMatch: (matchNumber: number) => void,\n    testMode?: boolean,\n    eventCode: string,\n    fieldCount: number,\n    qualsActive?: boolean,\n    practiceActive?: boolean,\n    activeMatchRunning: boolean\n}) {\n    const [testMatchCreateVisible, setTestMatchCreateVisible] = useState(false);\n    if(matches.length > 0 && matches[0].type === 'QUALS' && !qualsActive) {\n        return <div className={\"testFooter\"}>\n            {t`Qualification schedule is not active.`}<br/>\n            <a target='_blank' href='../dashboard/schedule/quals/'>{t`Activate it here.`}</a>\n        </div>\n    }\n    if(matches.length > 0 && matches[0].type === 'PRACTICE' && !practiceActive) {\n        return <div className={\"testFooter\"}>\n            {t`Practice schedule is not active.`}<br/>\n            <a target='_blank' href='../dashboard/schedule/practice/'>{t`Activate it here.`}</a>\n        </div>\n    }\n    const hide3 = !matches.some(m => m.blue.team3Display || m.red.team3Display);\n    const hasRounds = matches.some(m => m.seriesDescription?.round)\n    return <>\n        <table className={\"schedule\"}>\n            <thead>\n                <tr>\n                    <th>Match</th>\n                    {hasRounds ? <th>Round</th> : null}\n                    <th>Field</th>\n                    <th>State</th>\n                    <th>Red Score</th>\n                    {hasRounds ? <th>Red</th> : null}\n                    <th>Red 1</th>\n                    <th>Red 2</th>\n                    <th hidden={hide3}>Red 3</th>\n                    <th>Blue 1</th>\n                    <th>Blue 2</th>\n                    <th hidden={hide3}>Blue 3</th>\n                    {hasRounds ? <th>Blue</th> : null}\n                    <th>Blue Score</th>\n                    <th/>\n                    <th/>\n                    <th/>\n                    <th/>\n                </tr>\n            </thead>\n            <tbody>\n            {matches?.map(m => {\n                const editable = m.type !== 'ELIMS' || !matches.filter(m2 => m2.state == 'COMMITTED').some(m2 => m2.seriesDescription &&\n                    ((isSeriesAllianceDescription(m2.seriesDescription.red) && m2.seriesDescription.red.series == m.seriesDescription?.series) ||\n                        (isSeriesAllianceDescription(m2.seriesDescription.blue) && m2.seriesDescription.blue.series == m.seriesDescription?.series)) ||\n                        // If there exists a later match is in the same series that is committed and only happened because of the outcome of this (and other) matches\n                        // then this match should not be editable\n                        (m.seriesDescription && m.seriesDescription.series == m2.seriesDescription?.series && m2.number > m.number && m2.number > m.seriesDescription.matchesToWin));\n                const aName = (a?: string) => {\n                    if (!a || a.length === 0) return \"\";\n                    return (a.charAt(0) >= '0' && a.charAt(0) <= '9') ? \"A\" + a : a;\n                }\n                return <tr key={m.number}>\n                    <td>{m.name}</td>\n                    {hasRounds ? <td>{m.seriesDescription?.round}</td> : null}\n                    <td>{m.field}</td>\n                    <td>{m.state === 'TELEOP' ? 'DRIV-CTRL' : m.state}</td>\n                    <td>{Math.max(0, m.redTotal || 0)}</td>\n                    {hasRounds ? <td>{aName(m.redSeed)}</td> : null}\n                    <td>{m.red.team1Display}</td>\n                    <td>{m.red.team2Display}</td>\n                    <td hidden={hide3}>{m.red.team3Display}</td>\n                    <td>{m.blue.team1Display}</td>\n                    <td>{m.blue.team2Display}</td>\n                    <td hidden={hide3}>{m.blue.team3Display}</td>\n                    {hasRounds ? <td>{aName(m.blueSeed)}</td> : null}\n                    <td>{Math.max(0, m.blueTotal || 0)}</td>\n                    {editable && (m.state === \"UNPLAYED\" || m.state === \"RANDOMIZED\") && m.number > 0 ? <>\n                        <td><ButtonXs id={\"qualificationPlayButton\"+m.number} {...buttonAttrs} onClick={() => loadMatch(m.number)} disabled={archived}>{t`Play`}</ButtonXs></td>\n                        <td><ButtonXs id={\"qualificationEnterScoresButton\"+m.number} {...buttonAttrs} onClick={() => editMatch(m.number)} disabled={archived}>{t`Enter Scores`}</ButtonXs></td>\n                    </>: null }\n                    {m.state === \"COMMITTED\" || m.state === \"SUBMITTED\" ? <td>{editable ? <ButtonXs {...buttonAttrs} onClick={() => replayMatch(m.number)} disabled={archived}>{t`Replay`}</ButtonXs> : \"\"}</td> : null }\n                    {m.state === 'SUBMITTED' && liveScoring ? <td><ButtonXs {...buttonAttrs} onClick={() => commitMatch(m.number)}>{t`Commit`}</ButtonXs></td> : null }\n                    {m.state === 'COMMITTED' ? <td><ButtonXs {...buttonAttrs} onClick={() => postMatch(m.number)} disabled={activeMatchRunning}>{t`Post`}</ButtonXs></td> : null }\n                    {editable && (m.state === 'COMMITTED' || m.state === \"SUBMITTED\") ? <td><ButtonXs {...buttonAttrs} onClick={() => editMatch(m.number)}>{liveScoring || m.state === \"COMMITTED\" ? t`Edit` : t`Enter Scores`}</ButtonXs></td> : null }\n                    {m.state === 'REVIEW' ? <td><ButtonXs {...buttonAttrs} onClick={() => editMatch(m.number)}>{t`View`}</ButtonXs></td> : null }\n                    {/* This spans up to 4 columns, depending on how many columns there actually are */}\n                    <td colSpan={4}/>\n                </tr>\n            })}\n            </tbody>\n        </table>\n        {testMode ? <>\n            <div className={\"testFooter\"}>\n                {t`System in Test Mode. Click to create a new Test Match:`} <Button variant={\"success\"} onClick={() => setTestMatchCreateVisible(true)}>{t`Add Test Match`}</Button><br/>\n                {t`Use the Settings tab to exit Test Mode.`}\n            </div>\n            <TestMatchDialog eventCode={eventCode} close={() => setTestMatchCreateVisible(false)} visible={testMatchCreateVisible} fieldCount={fieldCount} />\n        </>: null}\n    </>\n}","import {Button, Modal} from \"react-bootstrap\";\nimport {useEffect, useState} from \"react\";\n\nimport './MatchHistoryDialog.css'\nimport {getMatchHistory, restoreMatchHistory} from \"./api/match\";\nimport { ControlMatch } from \"./connection\";\nimport { t } from \"ftc-common/i18n\";\n\nexport default function MatchHistoryDialog({visible, close, eventCode, match, updateMatchDetails}: {\n    visible: boolean, close: () => void, eventCode: string, match?: ControlMatch<any, any>, updateMatchDetails: (details: any) => void\n}) {\n    const [commits, setCommits] = useState<string[]>([])\n    const [selectedRecord, setSelectedRecord] = useState(-1);\n    const [sheetData, setSheetData] = useState<{__html: string}>();\n\n    useEffect(() => {\n        (async () => {\n            if(!visible || !match) {\n                setSelectedRecord(-1);\n                return;\n            }\n            const newHistory = await getMatchHistory(eventCode, match.number)\n            setCommits(newHistory);\n            setSelectedRecord(newHistory.length - 1);\n        })()\n    }, [visible, match])\n\n    useEffect(() => {\n        (async () => {\n            if (!match || selectedRecord < 0) {\n                setSheetData(undefined);\n                return;\n            }\n            const url = `/event/${eventCode}/match/${commits[selectedRecord].split(\":\")[0].toLowerCase()}/history/${selectedRecord}/?embed=true`;\n            const response = await fetch(url);\n            const html = await response.text();\n            setSheetData({ __html: html });\n        })()\n    }, [match, selectedRecord]);\n\n    if(!match) {\n        return <></>;\n    }\n\n    function handleClose() {\n        setCommits([])\n        close()\n    }\n\n    async function copyToEditor() {\n        updateMatchDetails(await restoreMatchHistory(eventCode, match!.number, selectedRecord))\n        handleClose()\n    }\n\n    return <Modal show={visible} onHide={handleClose} dialogClassName={\"matchHistoryModal\"} scrollable={true}>\n        <Modal.Header closeButton>\n            <Modal.Title>{t`Commit History for ${match.name}`}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n            {t`Select Record`}\n            <select className={\"ml-2 w-50\"} value={selectedRecord} onChange={(evt) => setSelectedRecord(parseInt((evt.target as HTMLSelectElement).value))}>\n                {[...commits].reverse().map((c, idx) => <option value={commits.length - idx - 1} key={idx}>{c}</option>)}\n            </select>\n            <Button className={\"ml-2\"} variant={\"success\"} disabled={selectedRecord < 0} onClick={copyToEditor}>{t`Copy to Editor`}</Button>\n            {sheetData ? <div className=\"scoresheetContainer\" dangerouslySetInnerHTML={sheetData}/> : null}\n        </Modal.Body>\n    </Modal>\n}","import {t} from 'ftc-common/i18n';\nimport {DecodeScores, DecodeScoresDetail} from \"../../javaTypes\";\nimport {useUniqueId} from 'ftc-common/utils';\nimport {ArtifactType} from \"ftc-common/javaTypes\";\nimport Artifact, {randomizationArtifacts} from \"../../season/decode/Artifact\";\nimport './Decode.css'\nimport faSquare from '@fortawesome/fontawesome-free/svgs/regular/square.svg';\nimport {useAsset} from \"ftc-common/AssetHelper\";\nimport {ReactSVG} from \"react-svg\";\n\nexport type ScoreType = DecodeScores\nexport type ScoreDetailType = DecodeScoresDetail\ntype ScoreTypeSetValue = <K extends keyof ScoreType>(key: K, value: ScoreType[K]) => void\ntype ParallelScoreTypeSetValue = <K extends keyof ScoreType>(key: K, value: ScoreType[K], otherValue: ScoreType[K]) => void\n\ninterface Robots {\n    robot1: number | null,\n    robot2: number | null\n}\n\ninterface RobotData {\n    teams: (number | undefined)[],\n    noshows: (number | undefined)[]\n}\n\ninterface RobotNumbers {\n    robot1: number,\n    robot2: number,\n    ns1: boolean,\n    ns2: boolean\n}\n\nfunction toRobotData(teams: (number | undefined)[], details?: ScoreType): RobotData {\n    return {teams: teams, noshows: ([1, 2, 3] as const).map(x => details?.[`noshow${x}`])}\n}\n\nfunction replaceClassifierState(state: ArtifactType, position: number, existing: ArtifactType[]): ArtifactType[] {\n    const newState = [...existing];\n    if (position < 0 || position >= newState.length) {\n        throw new Error(`Invalid position ${position} for classifier state`);\n    }\n    newState[position] = state;\n    return newState;\n}\n\nconst mockClassifierState = [ArtifactType.NONE, ArtifactType.NONE, ArtifactType.NONE, ArtifactType.NONE, ArtifactType.NONE, ArtifactType.NONE, ArtifactType.NONE, ArtifactType.NONE, ArtifactType.NONE]\n\nexport function DecodeInput({\n                                details,\n                                color,\n                                updateScore,\n                                otherDetails,\n                                updateBothScores,\n                                readOnly,\n                                teams,\n                                otherTeams,\n                                random,\n                                isPlayoff\n                            }: {\n    details?: DecodeScores,\n    color: 'Red' | 'Blue',\n    updateScore: ScoreTypeSetValue,\n    otherDetails?: DecodeScores\n    updateBothScores: ParallelScoreTypeSetValue,\n    readOnly: boolean,\n    teams: (number | undefined)[],\n    otherTeams: (number | undefined)[],\n    random?: number,\n    isPlayoff: boolean,\n}) {\n    const idPrefix = useUniqueId();\n    const robots = robotNoshowCombos(toRobotData(teams, details));\n\n    const targetPattern = random && random > 0 ? randomizationArtifacts[random] : randomizationArtifacts[1];\n\n    return <>\n        <fieldset className={\"autoScores\"}>\n            <legend>AUTO</legend>\n            <div className={\"d-flex\"} style={{flexWrap: 'wrap', gap: '4px', justifyContent: 'start'}}>\n                <table className={\"borderedTable\"} style={{textAlign: \"center\"}}>\n                    <thead>\n                    <tr>\n                        <th colSpan={2}>\n                            ARTIFACT\n                        </th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr>\n                        <th>\n                            <label className=\"scoreItem\"\n                                   htmlFor={`${idPrefix}-autoClassifiedArtifacts`}>{`CLASSIFIED`}</label>\n                        </th>\n                        <td>\n                            <input id={`${idPrefix}-autoClassifiedArtifacts`} disabled={readOnly} type=\"number\" min=\"0\"\n                                   max=\"1000\"\n                                   value={Math.max(0, details?.autoClassifiedArtifacts ?? 0)}\n                                   onChange={(e) => updateScore(\"autoClassifiedArtifacts\", parseInt((e.target as HTMLInputElement).value))}/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <th>\n                            <label className=\"scoreItem\"\n                                   htmlFor={`${idPrefix}-autoOverflowArtifacts`}>{`OVERFLOW`}</label>\n                        </th>\n                        <td>\n                            <input id={`${idPrefix}-autoOverflowArtifacts`} disabled={readOnly} type=\"number\" min=\"0\"\n                                   max=\"1000\"\n                                   value={Math.max(0, details?.autoOverflowArtifacts ?? 0)}\n                                   onChange={(e) => updateScore(\"autoOverflowArtifacts\", parseInt((e.target as HTMLInputElement).value))}/>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n                <table className={\"borderedTable\"} style={{textAlign: \"center\"}}>\n                    <thead>\n                    <tr>\n                        <td>Location</td>\n                        <th>None</th>\n                        <th>LEAVE</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr>\n                        <th>{robots.robot1 ? robots.robot1 : \"R1\"}</th>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot1Auto ?? 0) === 0}\n                                   onChange={(e) => updateScore(\"robot1Auto\", (e.target as HTMLInputElement).checked ? 0 : 0)}/>\n                        </td>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot1Auto ?? 0) === 1}\n                                   onChange={(e) => updateScore(\"robot1Auto\", (e.target as HTMLInputElement).checked ? 1 : 0)}/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <th>{robots.robot2 ? robots.robot2 : \"R2\"}</th>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot2Auto ?? 0) === 0}\n                                   onChange={(e) => updateScore(\"robot2Auto\", (e.target as HTMLInputElement).checked ? 0 : 0)}/>\n                        </td>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot2Auto ?? 0) === 1}\n                                   onChange={(e) => updateScore(\"robot2Auto\", (e.target as HTMLInputElement).checked ? 1 : 0)}/>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n            <table className={\"borderedTable\"} style={{textAlign: \"center\", marginTop: '4px'}}>\n                <thead>\n                <tr>\n                    <th colSpan={11}>PATTERN</th>\n                </tr>\n                <tr>\n                    <th>GATE</th>\n                    <td className={\"px-2\"}>1</td>\n                    <td className={\"px-2\"}>2</td>\n                    <td className={\"px-2\"}>3</td>\n                    <td className={\"px-2\"}>4</td>\n                    <td className={\"px-2\"}>5</td>\n                    <td className={\"px-2\"}>6</td>\n                    <td className={\"px-2\"}>7</td>\n                    <td className={\"px-2\"}>8</td>\n                    <td className={\"px-2\"}>9</td>\n                    <th>SQUARE</th>\n                </tr>\n                </thead>\n                <tbody>\n                {[ArtifactType.GREEN, ArtifactType.PURPLE, ArtifactType.NONE].map((type) => (\n                    <tr key={type}>\n                        <th>{type}</th>\n                        {(details?.autoClassifierState || mockClassifierState).map((state, idx) => <td key={idx} className={type == state && state == targetPattern[idx % 3] ? 'classifiedMatches' : ''}>\n                            <input disabled={readOnly} type=\"radio\" name={`${idPrefix}-autoClassifier${idx}`}\n                                   checked={state == type}\n                                   onChange={(e) => (e.target as HTMLInputElement).checked ? updateScore(\"autoClassifierState\", replaceClassifierState(type, idx, details!.autoClassifierState)) : null}/>\n                        </td>)}\n                        <th>{type}</th>\n                    </tr>))}\n                </tbody>\n            </table>\n        </fieldset>\n\n        <fieldset>\n            <legend>TELEOP</legend>\n            <div className={\"d-flex\"} style={{flexWrap: 'wrap', gap: '4px', justifyContent: 'start'}}>\n\n                <table className={\"borderedTable\"} style={{textAlign: \"center\"}}>\n                    <thead>\n                    <tr>\n                        <th colSpan={2}>\n                            ARTIFACT\n                        </th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr>\n                        <th>\n                            <label className=\"scoreItem\"\n                                   htmlFor={`${idPrefix}-teleopClassifiedArtifacts`}>{`CLASSIFIED`}</label>\n                        </th>\n                        <td>\n                            <input id={`${idPrefix}-teleopClassifiedArtifacts`} disabled={readOnly} type=\"number\"\n                                   min=\"0\" max=\"1000\"\n                                   value={Math.max(0, details?.teleopClassifiedArtifacts ?? 0)}\n                                   onChange={(e) => updateScore(\"teleopClassifiedArtifacts\", parseInt((e.target as HTMLInputElement).value))}/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <th>\n                            <label className=\"scoreItem\"\n                                   htmlFor={`${idPrefix}-teleopOverflowArtifacts`}>{`OVERFLOW`}</label>\n                        </th>\n                        <td>\n                            <input id={`${idPrefix}-teleopOverflowArtifacts`} disabled={readOnly} type=\"number\" min=\"0\"\n                                   max=\"1000\"\n                                   value={Math.max(0, details?.teleopOverflowArtifacts ?? 0)}\n                                   onChange={(e) => updateScore(\"teleopOverflowArtifacts\", parseInt((e.target as HTMLInputElement).value))}/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <th>\n                            <label className=\"scoreItem\"\n                                   htmlFor={`${idPrefix}-teleopDepotArtifacts`}>{`DEPOT`}</label>\n                        </th>\n                        <td>\n                            <input id={`${idPrefix}-teleopDepotArtifacts`} disabled={readOnly} type=\"number\" min=\"0\"\n                                   max=\"1000\"\n                                   value={Math.max(0, details?.teleopDepotArtifacts ?? 0)}\n                                   onChange={(e) => updateScore(\"teleopDepotArtifacts\", parseInt((e.target as HTMLInputElement).value))}/>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n                <table className={\"borderedTable egNavigated\"} style={{textAlign: \"center\"}}>\n                    <thead>\n                    <tr>\n                        <td>BASE</td>\n                        <th>None</th>\n                        <th>Partial</th>\n                        <th>Full</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr>\n                        <th>{robots.robot1 ? robots.robot1 : \"R1\"}</th>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot1Teleop ?? 0) === 0}\n                                   onChange={(e) => updateScore(\"robot1Teleop\", (e.target as HTMLInputElement).checked ? 0 : 0)}/>\n                        </td>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot1Teleop ?? 0) === 1}\n                                   onChange={(e) => updateScore(\"robot1Teleop\", (e.target as HTMLInputElement).checked ? 1 : 0)}/>\n                        </td>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot1Teleop ?? 0) === 2}\n                                   onChange={(e) => updateScore(\"robot1Teleop\", (e.target as HTMLInputElement).checked ? 2 : 0)}/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <th>{robots.robot2 ? robots.robot2 : \"R2\"}</th>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot2Teleop ?? 0) === 0}\n                                   onChange={(e) => updateScore(\"robot2Teleop\", (e.target as HTMLInputElement).checked ? 0 : 0)}/>\n                        </td>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot2Teleop ?? 0) === 1}\n                                   onChange={(e) => updateScore(\"robot2Teleop\", (e.target as HTMLInputElement).checked ? 1 : 0)}/>\n                        </td>\n                        <td><input disabled={readOnly} type=\"checkbox\"\n                                   checked={Math.max(0, details?.robot2Teleop ?? 0) === 2}\n                                   onChange={(e) => updateScore(\"robot2Teleop\", (e.target as HTMLInputElement).checked ? 2 : 0)}/>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n\n            <table className={\"borderedTable\"} style={{textAlign: \"center\", marginTop: '4px'}}>\n                <thead>\n                <tr>\n                    <th colSpan={11}>PATTERN</th>\n                </tr>\n                <tr>\n                    <th>GATE</th>\n                    <td className={\"px-2\"}>1</td>\n                    <td className={\"px-2\"}>2</td>\n                    <td className={\"px-2\"}>3</td>\n                    <td className={\"px-2\"}>4</td>\n                    <td className={\"px-2\"}>5</td>\n                    <td className={\"px-2\"}>6</td>\n                    <td className={\"px-2\"}>7</td>\n                    <td className={\"px-2\"}>8</td>\n                    <td className={\"px-2\"}>9</td>\n                    <th>SQUARE</th>\n                </tr>\n                </thead>\n                <tbody>\n                {[ArtifactType.GREEN, ArtifactType.PURPLE, ArtifactType.NONE].map((type) => (\n                    <tr key={type}>\n                        <th>{type}</th>\n                        {(details?.teleopClassifierState || mockClassifierState).map((state, idx) => <td key={idx} className={type == state && state == targetPattern[idx % 3] ? 'classifiedMatches' : ''}>\n                            <input disabled={readOnly} type=\"radio\" name={`${idPrefix}-teleopClassifier${idx}`}\n                                   checked={state == type}\n                                   onChange={(e) => (e.target as HTMLInputElement).checked ? updateScore(\"teleopClassifierState\", replaceClassifierState(type, idx, details!.teleopClassifierState)) : null}/>\n                        </td>)}\n                        <th>{type}</th>\n                    </tr>))}\n                </tbody>\n            </table>\n        </fieldset>\n\n        <fieldset className={\"penalties\"}>\n            <legend>{t`FOULS`}</legend>\n            <label htmlFor={`${idPrefix}-minorPenalties`}>{t`MINOR`}&nbsp;</label>\n            <input id={`${idPrefix}-minorPenalties`} disabled={readOnly} type=\"number\" min={0} value={details?.minor}\n                   onChange={(e) => updateScore(\"minor\", parseInt((e.target as HTMLInputElement).value))}/>\n            &nbsp;<label htmlFor={`${idPrefix}-majorPenalties`}>{t`MAJOR`}&nbsp;</label>\n            <input id={`${idPrefix}-majorPenalties`} disabled={readOnly} type=\"number\" min={0} value={details?.major}\n                   onChange={(e) => updateScore('major', parseInt((e.target as HTMLInputElement).value))}/>\n        </fieldset>\n\n        {isPlayoff ? null : <fieldset className={\"violations\"}>\n            <legend>{t`VIOLATIONS`}</legend>\n            <input id={`${idPrefix}-G206`} disabled={readOnly} type=\"checkbox\" checked={details?.violations.includes(\"G206\")}\n                   onChange={(e) => updateScore(\"violations\", e.target.checked ? [...details!.violations, \"G206\"] : details!.violations.filter(v => v != \"G206\"))}/>\n            <label htmlFor={`${idPrefix}-G206`} className={\"mr-3\"}>&nbsp;G206</label>\n            <input id={`${idPrefix}-G417`} disabled={readOnly} type=\"checkbox\" checked={details?.violations.includes(\"G417\") || details?.violations.includes(\"G417.A\")}\n                   onChange={(e) => updateScore(\"violations\", e.target.checked ? [...details!.violations, \"G417.A\"] : details!.violations.filter(v => v != \"G417\" && v != \"G417.A\"))}/>\n            <label htmlFor={`${idPrefix}-G417`} className={\"mr-3\"}>&nbsp;G417.A</label>\n            <input id={`${idPrefix}-G418A`} disabled={readOnly} type=\"checkbox\" checked={details?.violations.includes(\"G418.A\")}\n                   onChange={(e) => updateScore(\"violations\", e.target.checked ? [...details!.violations, \"G418.A\"] : details!.violations.filter(v => v != \"G418.A\"))}/>\n            <label htmlFor={`${idPrefix}-G418A`} className={\"mr-3\"}>&nbsp;G418.A</label>\n            <input id={`${idPrefix}-G418B`} disabled={readOnly} type=\"checkbox\" checked={details?.violations.includes(\"G418.B\")}\n                   onChange={(e) => updateScore(\"violations\", e.target.checked ? [...details!.violations, \"G418.B\"] : details!.violations.filter(v => v != \"G418.B\"))}/>\n            <label htmlFor={`${idPrefix}-G418B`} className={\"mr-3\"}>&nbsp;G418.B</label>\n            <input id={`${idPrefix}-G419B`} disabled={readOnly} type=\"checkbox\" checked={details?.violations.includes(\"G419.B\")}\n                   onChange={(e) => updateScore(\"violations\", e.target.checked ? [...details!.violations, \"G419.B\"] : details!.violations.filter(v => v != \"G419.B\"))}/>\n            <label htmlFor={`${idPrefix}-G419B`} className={\"mr-3\"}>&nbsp;G419.B</label>\n            <input id={`${idPrefix}-G431C`} disabled={readOnly} type=\"checkbox\" checked={details?.violations.includes(\"G431.C\")}\n                   onChange={(e) => updateScore(\"violations\", e.target.checked ? [...details!.violations, \"G431.C\"] : details!.violations.filter(v => v != \"G431.C\"))}/>\n            <label htmlFor={`${idPrefix}-G431C`} className={\"mr-3\"}>&nbsp;G431.C</label>\n        </fieldset>}\n    </>\n}\n\nfunction robotNoshowCombos(robots: RobotData): RobotNumbers {\n    if (robots?.teams[2]) { // 3-teams\n        let robot1 = 0, robot2 = 0;\n        if (!robots.noshows.some(x => x && x > 0)) { // not selected yet! doesnt matter.\n            return {robot1: robots.teams[0] || 0, robot2: robots.teams[1] || 0, ns1: false, ns2: false};\n        }\n        if (!robots.noshows[0]) {\n            robot1 = robots.teams[0] || 0;\n        }\n        if (!robots.noshows[1]) {\n            if (!robot1) {\n                robot1 = robots.teams[1] || 0;\n            } else {\n                robot2 = robots.teams[1] || 0;\n            }\n        }\n        if (!robots.noshows[2]) {\n            if (!robot1) {\n                robot1 = robots.teams[2];\n            } else {\n                robot2 = robots.teams[2];\n            }\n        }\n        return {robot1: robot1, robot2: robot2, ns1: !robot1, ns2: !robot2};\n    } else {\n        return {\n            robot1: robots?.teams[0] || 0,\n            robot2: robots?.teams[1] || 0,\n            ns1: !!(robots?.noshows[0] || !robots?.teams[0]),\n            ns2: !!(robots?.noshows[1] || !robots?.teams[1])\n        };\n    }\n}\n\nexport function DecodeInputBreakdown({score, breakdown, other, isPlayoff}: {\n    score?: ScoreType,\n    breakdown?: DecodeScoresDetail,\n    other?: ScoreType,\n    isPlayoff: boolean,\n}) {\n\n    return <table>\n        <tbody>\n        <tr>\n            <th>AUTO</th>\n            <th>{score?.autonomousPoints || 0}</th>\n        </tr>\n        <tr>\n            <td>LEAVE Points</td>\n            <td>{breakdown?.autoLeavePoints || 0}</td>\n        </tr>\n        <tr>\n            <td>ARTIFACT Points</td>\n            <td>{breakdown?.autoArtifactPoints || 0}</td>\n        </tr>\n        <tr>\n            <td>PATTERN Points</td>\n            <td>{breakdown?.autoPatternPoints || 0}</td>\n        </tr>\n        <tr>\n            <th>TELEOP</th>\n            <th>{score?.teleopPoints || 0}</th>\n        </tr>\n        <tr>\n            <td>ARTIFACT Points</td>\n            <td>{(breakdown?.teleopArtifactPoints || 0) + (breakdown?.teleopDepotPoints || 0)}</td>\n        </tr>\n        <tr>\n            <td>PATTERN Points</td>\n            <td>{breakdown?.teleopPatternPoints || 0}</td>\n        </tr>\n        <tr>\n            <td>BASE Points</td>\n            <td>{breakdown?.teleopBasePoints || 0}</td>\n        </tr>\n        <tr>\n            <th>FOUL</th>\n            <th>{other?.penaltyPoints || 0}</th>\n        </tr>\n        {isPlayoff ? null : <>\n            <tr>\n                <td>Movement RP</td>\n                <td><i className={`fa ${breakdown?.movementRP ? 'fa-check' : 'fa-x'}`}/></td>\n            </tr>\n            <tr>\n                <td>Goal RP</td>\n                <td><i className={`fa ${breakdown?.goalRP ? 'fa-check' : 'fa-x'}`}/></td>\n            </tr>\n            <tr>\n                <td>Pattern RP</td>\n                <td><i className={`fa ${breakdown?.patternRP ? 'fa-check' : 'fa-x'}`}/></td>\n            </tr>\n        </>}\n        </tbody>\n    </table>\n}\n\nexport function Randomization({random}: {\n    random?: number\n}) {\n    const randomizationText = random && random > 0 ? ([\"\", \"MOTIF 1 (ID 21)\", \"MOTIF 2 (ID 22)\", \"MOTIF 3 (ID 23)\"])[random] : \"\";\n    const gateSvg = useAsset('img/decode/gate.svg');\n\n    return <div className={\"randomization\"}>\n        <div className=\"text-center\">{randomizationText ? t`Randomization: ${randomizationText}` : 'MATCH NOT RANDOMIZED!'}</div>\n        <div className=\"text-center hr-artifacts\">\n            <ReactSVG src={gateSvg} className={\"randomizer-icon\"}></ReactSVG>\n            <Artifact value={randomizationText && random ? randomizationArtifacts[random][0] : ArtifactType.NONE} />\n            <Artifact value={randomizationText && random ? randomizationArtifacts[random][1] : ArtifactType.NONE} />\n            <Artifact value={randomizationText && random ? randomizationArtifacts[random][2] : ArtifactType.NONE} />\n            <ReactSVG src={faSquare} className={\"randomizer-icon\"}></ReactSVG>\n        </div>\n    </div>\n}","import {t} from \"ftc-common/i18n\";\n\nimport {useEffect, useRef, useState} from \"react\";\nimport {Button, ButtonProps, Card, Form, Spinner} from \"react-bootstrap\";\nimport {editMatch, getMatchScore, postMatch, unsavedEdit} from \"./api/match\";\n\nimport \"./ScoreEdit.css\";\nimport MatchHistoryDialog from \"./MatchHistoryDialog\";\nimport {useUniqueId} from \"ftc-common/utils\";\nimport {DecodeInput, DecodeInputBreakdown, ScoreDetailType, ScoreType, Randomization} from \"./seasons/Decode\";\nimport {Alliance} from \"../ref/Ref\";\nimport {EventSettings, Match, MatchState, MatchType} from \"../javaTypes\";\nimport {ControlMatch} from \"./connection\";\nimport {confirmDialog} from \"first-common/dialogs\";\n\ntype ScoreTypeSetValue = <K extends keyof ScoreType>(key: K, value: ScoreType[K]) => void\ntype EnrichedScoreType = ScoreType & { breakdown?: ScoreDetailType }\nconst RED_CARD = 2;\nconst YELLOW_CARD = 1;\n\n// @ts-expect-error xs is not an official size\nconst ButtonXs = (props: Omit<ButtonProps, 'size'>) => <Button size={\"xs\"} {...props}/>\n\nfunction AllianceCards({match, isElims, alliance, cardCarries, detailAlliance, right, color, updateScore, readOnly} :{\n    match:  Match | undefined, isElims: boolean, alliance?: Alliance<ScoreType>, cardCarries?: {team1?: string[], team2?: string[]},\n    detailAlliance?: ScoreType, right: boolean, color: string, updateScore: ScoreTypeSetValue, readOnly: boolean\n}) {\n    return <div dir={right ? 'ltr' : 'rtl'} className={`allianceCards ${right ? 'right' : 'left'} ${isElims ? \"elims\" : \"\"}`}>\n        <table>\n        <tbody>\n            <tr>\n                <td>{color}</td>\n                {isElims ? <td title={t`Not Playing`}>NP</td> : <td title={t`No ROBOT. (With Team Member present)`}>NR</td>}\n                <td title={t`DISQUALIFIED`}>DQ</td>\n                <td title={t`YELLOW CARD. Check Y & R if 2nd+ YELLOW CARD.`}>Y</td>\n                <td title={t`RED CARD.`}>R</td>\n            </tr>\n            {([1, 2, 3] as const).map(i => {\n                // We never have card or DQ related fields for i == 3, so we use the card data from team 1\n                const cardIdx = isElims || i == 3 ? 1 : i;\n                const carries = cardCarries?.[`team${cardIdx}`];\n                const hasCarry = carries && carries.length > 0;\n                // need to check if we are editing a card - it needs to be removable\n                const isOnlyCarrySource = carries && carries.filter(x => x !== match?.shortName).length === 0;\n                const redChecked = ((detailAlliance?.[`card${cardIdx}`] || 0) & RED_CARD) !== 0;\n                const yellowChecked = ((detailAlliance?.[`card${cardIdx}`] || 0) & YELLOW_CARD) !== 0;\n                return !alliance || alliance[`team${i}`] ? <tr key={i}>\n                    <td style={{backgroundColor: hasCarry ? 'yellow' : 'transparent'}}\n                        title={hasCarry ? t`Earned cards in ${carries}` : ''}>{alliance?.[`team${i}Display`]}</td>\n                    {isElims ? <>\n                        <td><input type=\"checkbox\" checked={detailAlliance?.[`noshow${i}`] === 1} onChange={(e) => updateScore(`noshow${i}`, (e.target as HTMLInputElement).checked ? 1 : 0)} disabled={readOnly}/></td>\n                        <td><input type=\"checkbox\" checked={detailAlliance?.dq1 === 1} onChange={(e) => updateScore(`dq1`, (e.target as HTMLInputElement).checked ? 1 : 0)} disabled={readOnly || ((detailAlliance?.card1 ?? 0) & RED_CARD) !== 0}/></td>\n                    </> : <>\n                        <td><input type=\"checkbox\" checked={(detailAlliance?.[`noshow${i}`] ?? 0) > 0} onChange={(e) => updateScore(`noshow${i}`, (e.target as HTMLInputElement).checked ? 2 : 0)} disabled={readOnly} /></td>\n                        <td><input type=\"checkbox\" checked={detailAlliance?.[`dq${cardIdx}`] === 1} onChange={(e) => {\n                            updateScore(`dq${cardIdx}`, (e.target as HTMLInputElement).checked ? 1 : 0)\n                            // noshow == 1 means DQ + no show, so if clearing the DQ, downgrade the noshow to a \"regular\" noshow\n                            if(detailAlliance?.[`noshow${cardIdx}`] == 1) {\n                                updateScore(`noshow${cardIdx}`, 2)\n                            }\n                        }} disabled={readOnly || redChecked } /></td>\n                    </>}\n                    <td><input type=\"checkbox\" checked={yellowChecked} onChange={(e) => {\n                        let newCard = (e.target as HTMLInputElement).checked ? detailAlliance![`card${cardIdx}`] | YELLOW_CARD : detailAlliance![`card${cardIdx}`] & ~YELLOW_CARD;\n                        if ((newCard & YELLOW_CARD) && hasCarry && !isOnlyCarrySource) {\n                            newCard |= RED_CARD;\n                        }\n                        updateScore(`card${cardIdx}`, newCard);\n                    }} disabled={readOnly} /></td>\n                    <td><input type=\"checkbox\" checked={((detailAlliance?.[`card${cardIdx}`] || 0) & RED_CARD) !== 0} onChange={(e) => {\n                        let newCard = (e.target as HTMLInputElement).checked ? detailAlliance![`card${cardIdx}`] | RED_CARD : detailAlliance![`card${cardIdx}`] & ~RED_CARD;\n                        if ((newCard & YELLOW_CARD) && hasCarry && !isOnlyCarrySource) {\n                            newCard |= RED_CARD;\n                        }\n                        updateScore(`card${cardIdx}`, newCard);\n                    }} disabled={readOnly || (yellowChecked && hasCarry && !isOnlyCarrySource)} title={(yellowChecked && hasCarry && !isOnlyCarrySource) ? t`Because of prior CARD, any YELLOW CARD in this MATCH must lead to a RED CARD. To remove the RED CARD, first remove the YELLOW CARD.` : ''}/></td>\n                </tr> : null\n            })}\n        </tbody>\n        </table>\n    </div>\n}\n\nfunction Breakdown({score, breakdown, showAdjust, other, updateScore, isPlayoff}: {\n    score?: ScoreType, breakdown?: ScoreDetailType, showAdjust: boolean, other?: ScoreType, updateScore: ScoreTypeSetValue, isPlayoff: boolean\n}) {\n    const tiebreakRule = 'T605.B';\n    const simultaneousDqRule = 'T605.C';\n    const adjustUniqueId = useUniqueId();\n    return <>\n        <legend>{t`Score Breakdown`}</legend>\n        <DecodeInputBreakdown score={score} breakdown={breakdown} other={other} isPlayoff={isPlayoff} />\n        {showAdjust ? <Card bg={\"warning\"} style={{width: '250px'}}>\n            <Card.Body>\n                <Card.Title style={{textAlign: 'center'}}>{t`Adjust`}</Card.Title>\n                <Card.Text>\n                    {t`Use this field to give 1 point to the ALLIANCE that was DISQUALIFIED second (The winner by ${tiebreakRule}), unless it was simultaneous (${simultaneousDqRule})`}\n                </Card.Text>\n                <Form.Check\n                    type={'checkbox'}\n                    label={t`Tiebreak Point`}\n                    checked={score!.adjust > 0}\n                    onChange={e => updateScore('adjust', e.target.checked ? 1 : 0)}\n                    id={adjustUniqueId}\n                />\n            </Card.Body>\n        </Card> : null}\n    </>;\n}\n\nconst readOnlyStates: (MatchState | undefined)[] = [MatchState.AUTO, MatchState.TELEOP, MatchState.REVIEW]\n\ninterface MatchDetails {\n    number: number,\n    type: MatchType,\n    red: ScoreType,\n    blue: ScoreType,\n    redBreakdown: ScoreDetailType,\n    blueBreakdown: ScoreDetailType,\n    redCardCarries1?: string[],\n    redCardCarries2?: string[],\n    blueCardCarries1?: string[],\n    blueCardCarries2?: string[],\n    historySize?: number\n}\n\nexport default function ScoreEdit({isArchived, showHelp, settings, match, eventCode, openMatchForEditing, lockoutMatch, commitMatch, active, activeMatchRunning}:\n                          {isArchived?: boolean, showHelp?: () => void, settings: Partial<EventSettings>, match?: ControlMatch<ScoreType, ScoreDetailType>, eventCode: string,\n                              openMatchForEditing?: (number: number) => void, lockoutMatch?: (number: number) => Promise<boolean>,\n                              commitMatch?: (number: number, post: boolean) => void, active?: boolean, activeMatchRunning?: boolean}) {\n    const [loading, setLoading] = useState(!active);\n    const [matchDetails, setMatchDetails] = useState<MatchDetails>();\n    const [hasEdits, setHasEdits] = useState(false);\n    const [reload, setReload] = useState(false);\n    const prevState = useRef<MatchState>();\n    const [showMatchHistory, setShowMatchHistory] = useState(false);\n\n    useEffect(() => {\n        (async () => {\n            if(active || !match?.number) {\n                return;\n            }\n            if(matchDetails?.number === match.number && matchDetails?.type === match.type && !reload && readOnlyStates.includes(prevState.current) === readOnlyStates.includes(match.state)) {\n                prevState.current = match.state;\n                return;\n            }\n\n            if(!readOnlyStates.includes(match.state)) {\n                setLoading(true)\n                setMatchDetails(await getMatchScore(eventCode, match.number))\n                setLoading(false)\n                setReload(false)\n                setHasEdits(false)\n            } else {\n                setMatchDetails(undefined)\n                setLoading(false)\n            }\n        })()\n    }, [match?.type, match?.number, match?.state, reload]);\n\n    if(!active && !match) {\n        return null;\n    }\n\n    if(loading) {\n        return <div>Loading match data...<Spinner animation={\"border\"}/></div>\n    }\n\n    /**\n     * If alliance === 'both', the first value provided is red, the second is blue. This allows updating both at once without worrying about the order the server handles them.\n     */\n    function updateScore<K extends keyof ScoreType>(alliance: 'red' | 'blue', field: K, value: ScoreType[K]): Promise<void>;\n    function updateScore<K extends keyof ScoreType>(alliance: 'both', field: K, redValue: ScoreType[K], blueValue: ScoreType[K]): Promise<void>;\n    async function updateScore<K extends keyof ScoreType>(alliance: 'red' | 'blue' | 'both', field: K, value: ScoreType[K], value2?: ScoreType[K]) {\n        const src2 = alliance === 'both'\n                ? { red: Object.assign({}, matchDetails!.red, { [field]: value}),\n                        blue: Object.assign({}, matchDetails!.blue, { [field]: value2})}\n                : { [alliance]: Object.assign({}, matchDetails![alliance], { [field]: value }) };\n        const payload = Object.assign({},\n            { red: matchDetails!.red, blue: matchDetails!.blue },\n            src2\n        )\n        // RED CARD -> DISQUALIFICATION, cards are never set together\n        if ((alliance === 'red' || alliance === 'blue')) {\n            if (field === 'card1' && (value as number) > 1) {\n                payload[alliance].dq1 = 1;\n            }\n            if (field === 'card2' && (value as number) > 1) {\n                payload[alliance].dq2 = 1;\n            }\n            if ((!payload.red.dq1 || !payload.blue.dq1) && (payload.blue.adjust || payload.red.adjust)) {\n                payload.red.adjust = 0;\n                payload.blue.adjust = 0;\n            }\n        }\n\n        // todo be smarter and reset back to false if unchanged\n        setHasEdits(true)\n        setMatchDetails(await unsavedEdit(eventCode, match!.number, payload))\n    }\n\n    async function editScore() {\n        await editMatch(eventCode, match!.number, { red: matchDetails!.red, blue: matchDetails!.blue })\n        setHasEdits(false)\n    }\n\n    async function forceEdit() {\n        if(!await confirmDialog({\n            label: t`Override Referees?`,\n            text: t`This will lock out referee devices from submitting any more scores. Any unsubmitted changes on their devices will be lost.`,\n            buttonText: t`Lockout`\n        })) {\n            return;\n        }\n        await lockoutMatch!(match!.number)\n    }\n\n    async function commitScore() {\n        if(hasEdits || match!.state !== 'SUBMITTED') {\n            await editScore()\n            commitMatch!(match!.number, false)\n        } else {\n            commitMatch!(match!.number, true)\n        }\n    }\n\n    let readOnly = active || false;\n    let topBanner;\n    if (isArchived) {\n        readOnly = true;\n        topBanner = <div className={\"editBanner\"}>{t`This event has been archived and uploaded to FIRST. If you need to make any changes, please contact FIRST event help.`}<button className={\"btn btn-link\"} onClick={showHelp}>{t`Contact Information`}</button> </div>\n    } else if (active || !match) {\n        if(match && match.state !== 'AUTO' && match.state !== 'TELEOP' && openMatchForEditing) {\n            topBanner = <div className={\"editBanner\"} style={{fontSize: '20px'}}>{t`Showing scores for previous match.  Scores will clear at start of next match.`} <ButtonXs className={\"ml-2\"} style={{fontSize: '20px'}} variant={\"info\"} onClick={() => openMatchForEditing(match.number)}>To Edit Click Here</ButtonXs> </div>\n        }\n    } else if(!readOnlyStates.includes(match.state)) {\n        topBanner = <div className={\"editBanner p-1\"}>\n            <ButtonXs className=\"mx-2\" variant=\"primary\" disabled={match.type === 'TEST' || matchDetails?.historySize === 0} onClick={() => setShowMatchHistory(true)}>{t`View History`}</ButtonXs>\n            <ButtonXs className=\"mx-2\" variant=\"primary\" disabled={!hasEdits} onClick={() => setReload(true)}>{t`Cancel Edits`}</ButtonXs>\n            <ButtonXs className=\"mx-2\" variant=\"primary\" disabled={!hasEdits} onClick={() => editScore()}>{t`Save Edits`}</ButtonXs>\n            <ButtonXs className=\"mx-2\" variant=\"primary\" disabled={match.state === 'COMMITTED' && !hasEdits} onClick={() => commitScore()}>{t`Commit`}</ButtonXs>\n            <ButtonXs className=\"mx-2\" variant=\"primary\" disabled={match.state !== 'COMMITTED' || activeMatchRunning || hasEdits} onClick={() => postMatch(eventCode, match.number)}>{t`Post Results`}</ButtonXs>\n        </div>\n    } else {\n        readOnly = true;\n        let missingPeople;\n        if(!match.red.reviewSubmitted && !match.blue.reviewSubmitted) {\n            missingPeople = t`Red, Blue`\n        } else if(!match.red.reviewSubmitted) {\n            missingPeople = t`Red`\n        } else if(!match.blue.reviewSubmitted) {\n            missingPeople = t`Blue`\n        } else {\n            missingPeople = t`HR`\n        }\n\n        const forceEditButton = <ButtonXs className={\"ml-2\"} style={{fontSize: '20px'}} variant={\"danger\"} onClick={() => forceEdit()}>Force Edit</ButtonXs>;\n        topBanner = <div className={\"editBanner\"} style={{fontSize: '20px'}}>{t`Waiting for referees (${missingPeople}) to submit scores.`} {match.state === \"REVIEW\" ? forceEditButton : null} </div>\n    }\n\n    const redScoreObj = matchDetails ? matchDetails.red : match?.red?.scores;\n    const blueScoreObj = matchDetails ? matchDetails.blue : match?.blue?.scores;\n    const redBreakdown = matchDetails ? matchDetails.redBreakdown : match?.red?.breakdown;\n    const blueBreakdown = matchDetails ? matchDetails.blueBreakdown : match?.blue?.breakdown;\n\n    const redCardCarries = matchDetails ? { team1: matchDetails.redCardCarries1, team2: matchDetails.redCardCarries2 } : match?.red?.cardCarries;\n    const blueCardCarries = matchDetails ? { team1: matchDetails.blueCardCarries1, team2: matchDetails.blueCardCarries2 } : match?.blue?.cardCarries;\n\n    let redTotal = redScoreObj ? redScoreObj.scoredPoints + blueScoreObj!.penaltyPoints - (match!.state !== 'AUTO' ? 0 : redScoreObj.teleopToSubtractFromAuto) - (match!.state !== 'AUTO' && match!.state !== 'TELEOP' ? 0 : redScoreObj.teleopToSubtractFromInMatch) : 0\n    let blueTotal = blueScoreObj ? blueScoreObj.scoredPoints + redScoreObj!.penaltyPoints - (match!.state !== 'AUTO' ? 0 : blueScoreObj.teleopToSubtractFromAuto) - (match!.state !== 'AUTO' && match!.state !== 'TELEOP' ? 0 : blueScoreObj.teleopToSubtractFromInMatch) : 0\n\n    const isElims = match?.type === 'ELIMS';\n    const showAdjust = isElims && (redScoreObj?.dq1 || 0) > 0 && (blueScoreObj?.dq1 || 0) > 0;\n\n    if (isElims) {\n        // Force scores to adjust when elims red card\n        redTotal = (redScoreObj?.dq1 || 0) > 0 ? (redScoreObj?.adjust ?? 0) : redTotal;\n        blueTotal = (blueScoreObj?.dq1 || 0) > 0 ? (blueScoreObj?.adjust ?? 0) : blueTotal;\n    }\n\n    return <div className={`scoreEditContent contrast-${settings.controlContrast}`}>\n        {topBanner}\n\n        <div className={\"scoreEditBody\"}>\n            <div className={\"matchOverview\"}>\n                <span className={\"name\"}>{match ? match.name : t`No Active Match`}</span>\n                <hr/>\n                <span className={\"totalScore\"}>{settings.flipControl ? redTotal : blueTotal}</span>\n                <span className={\"totalScore\"}>{settings.flipControl ? blueTotal : redTotal}</span>\n                {match?.hrReview && active ? <span className={\"reviewBanner\"}>{t`Referee Review`}</span> : null }\n\n                <AllianceCards match={match} isElims={isElims} color={t`Red`} cardCarries={redCardCarries} alliance={match?.red} detailAlliance={redScoreObj} right={!settings.flipControl} updateScore={(field, value) => updateScore('red', field, value)} readOnly={readOnly} />\n                <AllianceCards match={match} isElims={isElims} color={t`Blue`} cardCarries={blueCardCarries} alliance={match?.blue} detailAlliance={blueScoreObj} right={!!settings.flipControl} updateScore={(field, value) => updateScore('blue', field, value)} readOnly={readOnly} />\n\n                <Randomization random={match?.randomization} />\n\n                <fieldset className={`scoreBreakdown ${settings.flipControl ? 'left' : 'right'}`}>\n                    <Breakdown score={redScoreObj} other={blueScoreObj} breakdown={redBreakdown} showAdjust={showAdjust} updateScore={(field, value) => updateScore('red', field, value)} isPlayoff={isElims} />\n                </fieldset>\n                <fieldset className={`scoreBreakdown ${settings.flipControl ? 'right' : 'left'}`}>\n                    <Breakdown score={blueScoreObj} other={redScoreObj} breakdown={blueBreakdown} showAdjust={showAdjust} updateScore={(field, value) => updateScore('blue', field, value)} isPlayoff={isElims} />\n                </fieldset>\n            </div>\n            <div dir={settings.flipControl ? 'ltr' : 'rtl'}>\n                <div className={`scoreSection red ${settings.flipControl ? 'left' : 'right'}`}>\n                    <DecodeInput color={\"Red\"} readOnly={readOnly} random={match?.randomization} details={redScoreObj} otherDetails={blueScoreObj} teams={([1,2,3] as const).map(x => match?.red[`team${x}`])} otherTeams={([1,2,3] as const).map(x => match?.blue[`team${x}`])} updateScore={(field, value) => updateScore('red', field, value)} updateBothScores={(field, red, blue) => updateScore('both', field, red, blue)} isPlayoff={isElims} />\n                </div>\n                <div className={`scoreSection blue ${settings.flipControl ? 'right' : 'left'}`}>\n                    <DecodeInput color={\"Blue\"} readOnly={readOnly} random={match?.randomization} details={blueScoreObj} otherDetails={redScoreObj} teams={([1,2,3] as const).map(x => match?.blue[`team${x}`])} otherTeams={([1,2,3] as const).map(x => match?.red[`team${x}`])}  updateScore={(field, value) => updateScore('blue', field, value)} updateBothScores={(field, red, blue) => updateScore('both', field, red, blue)} isPlayoff={isElims} />\n                </div>\n            </div>\n        </div>\n        <MatchHistoryDialog visible={showMatchHistory} close={() => setShowMatchHistory(false)} match={match} eventCode={eventCode} updateMatchDetails={(data) => {\n            setMatchDetails(data)\n            setHasEdits(true)\n        }}/>\n    </div>\n\n}","import {Button, Col, Row} from \"react-bootstrap\";\nimport {t} from 'ftc-common/i18n';\n\nimport * as api from './api/allianceSelection';\n\nimport './AllianceSelection.css'\nimport {showAllianceSelection} from \"./api/display\";\nimport {SelectionMethod, SelectionOp, SelectionState} from \"ftc-common/javaTypes\";\nimport {EventSettings, Match, MatchType} from \"../javaTypes\";\nimport {confirmDialog, messageDialog, promptDialog} from \"first-common/dialogs\";\nimport {Temporal} from \"temporal-polyfill\";\nimport {useState} from \"react\";\n\nconst tableButtonAttrs = {\n    className: 'btn-xs',\n    variant: 'light'\n} as const\n\nexport default function AllianceSelection({matches, eventCode, selectionState, activeType, settings}: {\n    matches: Match[],\n    eventCode: string,\n    selectionState?: SelectionState,\n    activeType: MatchType,\n    settings: Partial<EventSettings>\n}) {\n    const [targetAlliance, setTargetAlliance] = useState<number | null>(null);\n\n    // TODO finish backporting this from CRI\n    // The even slots (until each alliance has made their first pick) are captain slots, and there is no active acceptance\n    // required for them, so pre-label them as captains\n    const isBackupOnly = activeType == MatchType.ELIMS\n    const isCaptainSlot = !isBackupOnly && selectionState && [...Array(selectionState.alliances.length).keys()].map(x => x * 2).includes(selectionState?.nextSlot)\n    const nextCaptain = selectionState?.teams?.find(t => !t.removed && !t.captain && !t.picked)\n    let disabledSlots = selectionState?.teams?.map((team) => {\n        if(team.removed) {\n            return t`Unavailable`\n        } else if(team.picked) {\n            return t`Selected`\n        } else if(team.captain) {\n            return t`Captain`;\n        } else if(isCaptainSlot && team.number === nextCaptain?.number) {\n            return t`Next Captain`\n        } else if(team.declined) {\n            return t`Unavailable - declined`\n        } else {\n            return false;\n        }\n    }) || []\n\n    const teamCount = selectionState ? selectionState.teams.length : 0\n\n    async function startSelection() {\n        const unplayedMatches = matches.filter(m => m.state !== \"COMMITTED\").length\n        if(unplayedMatches > 0){\n            if(!await confirmDialog({\n                label: t`Start Alliance Selection?`,\n                text: t`WARNING: There are ${unplayedMatches} un-committed matches. Any Qualification matches committed after starting alliance selection will NOT be considered in the rankings used during Alliance Selection.`,\n                buttonText: t`Start`})) {\n                    return;\n            }\n        }\n\n        const startTime = await promptDialog({\n            label: 'Playoff Match Start Time',\n            text: 'Enter the time the first playoff match is expected to start',\n            customInputParams: {\n                type: 'datetime-local',\n                step: 300\n            },\n            defaultValue: Temporal.Now.plainDateTimeISO().add({minutes: 30}).round({ roundingIncrement: 5, roundingMode: 'ceil', smallestUnit: 'minute' }).toString().slice(0, 16),\n            buttonText: 'Submit'\n        })\n        if(!startTime) {\n            return;\n        }\n\n        const newState = await api.startSelection(eventCode, startTime)\n        if(!newState) {\n            messageDialog({\n                label: t`Failed to Start Selection`,\n                text: t`Starting Selection Failed.`\n            })\n        }\n    }\n\n    async function submitSelection(team: number, type: SelectionOp) {\n        const newState = await api.submitSelection(eventCode, team, type, SelectionMethod.CONTROL)\n        if(!newState) {\n            messageDialog({\n                label: t`Failed to Submit Selection`,\n                text: t`Selection Submission Failed.`\n            })\n        }\n    }\n\n    async function undoSelection() {\n        const selectionState = await api.undoSelection(eventCode)\n        if(!selectionState) {\n            messageDialog({\n                label: t`Failed to Submit Selection`,\n                text: t`Selection Undo Failed.`\n            })\n        }\n    }\n\n    async function finishSelection() {\n        let confirmationWarning = null;\n        const availableCount = selectionState!.teams.filter(x => !x.declined && !x.removed && !x.captain && !x.removed).length;\n        if(selectionState!.alliances.some(a => !a[1])) {\n            if (availableCount > 1) {\n                // if available count is 1, then the only team left is the currently selecting captain. Don't show the warning\n                confirmationWarning = t`Alliances are not full (2 Teams each).`;\n            }\n        } else if (selectionState!.teamsPerAlliance > 2 && selectionState!.nextSlot < 12) {\n            confirmationWarning = t`Alliances are not full (3 Teams each).`;\n        }\n\n        if(confirmationWarning && !await confirmDialog({\n                label: t`Finish Alliance Selection?`,\n                text: t`WARNING: ${confirmationWarning} Are you sure you want to generate Elimination Matches with these alliances?`,\n                buttonText: t`Generate`\n            })) {\n            return;\n        }\n\n        const startTime = await promptDialog({\n            label: 'Playoff Match Start Time',\n            text: 'Confirm the time the first playoff match is expected to start',\n            customInputParams: {\n                type: 'datetime-local',\n                step: 300\n            },\n            defaultValue: selectionState!.playoffStartTime,\n            buttonText: 'Submit'\n        })\n        if(!startTime) {\n            return;\n        }\n\n        if(!await api.finishSelection(eventCode, startTime)) {\n            messageDialog({\n                label: t`Failed to Generate Elimination Matches`,\n                text: t`Unable to complete alliance selection.`\n            })\n        }\n    }\n\n    async function addBackup(seed: number, team: number) {\n        if(await api.addBackup(eventCode, seed, team)) {\n            setTargetAlliance(null)\n        } else {\n            messageDialog({\n                label: t`Failed to Submit Backup`,\n                text: t`Backup Selection Failed.`\n            })\n        }\n    }\n\n    async function removeBackup(seed: number) {\n        if(!await confirmDialog({\n            label: t`Remove Backup Team`,\n            text: t`Backup teams should only be removed if they were added in error and have not played in a match yet.`,\n            buttonText: t`Remove`\n        })) {\n            return;\n        }\n\n        try {\n            if (!await api.removeBackup(eventCode, seed)) {\n                messageDialog({\n                    label: t`Failed to Remove Backup`,\n                    text: t`Backup Removal Failed.`\n                })\n            }\n        } catch (e: any) {\n            messageDialog({\n                label: t`Failed to Remove Backup`,\n                text: e.message || t`Backup Removal Failed.`\n            })\n        }\n    }\n\n    const matchStartTime = selectionState ? Temporal.PlainDateTime.from(selectionState.playoffStartTime).toPlainTime().toLocaleString(undefined, { timeStyle: 'short' }) : null;\n\n    let overrideString = \"\";\n    if (settings.allianceCountOverride) {\n        overrideString += settings.allianceCountOverride + \" alliances\";\n    }\n    if (settings.teamsPerAllianceOverride) {\n        if (settings.allianceCountOverride) overrideString += \" of \" + settings.teamsPerAllianceOverride + \" teams\";\n        else overrideString = settings.teamsPerAllianceOverride + \"-team alliances\"\n        if (settings.allowBackupsOverride) {\n            overrideString += \" + backups\"\n        }\n    }\n    if (settings.playoffTypeOverride) {\n        const prefix = overrideString.length ? \" in \" : \"\";\n        switch (settings.playoffTypeOverride) {\n            case \"DOUBLE_ELIMINATION_WITH_FINALS\": overrideString += prefix + \"double elimination with finals\"; break;\n            case \"SINGLE_ELIMINATION\": overrideString += prefix + \"single elimination\"; break;\n        }\n    }\n\n    return <div className={\"container-fluid\"}>\n        <Row>\n            <Col>\n                <div className={\"mx-auto\"} style={{width: 'fit-content'}}>\n                    { activeType === 'ELIMS' ? <div className={\"mb-2\"}>\n                        <h3>{t`Backup Team Selection`}</h3>\n                        {targetAlliance\n                            ? <>\n                                {t`Adding a backup team to Alliance ${targetAlliance}`} <Button variant={\"primary\"} size={\"sm\"} onClick={() => setTargetAlliance(null)}>{t`Cancel`}</Button></>\n                            : null}\n                    </div> : <>\n                        <Button className={\"m-2\"} variant={selectionState ? 'light' : 'success'} disabled={!!selectionState} onClick={startSelection}>{t`Start Alliance Selection`}</Button>\n                        <Button className={\"m-2\"} variant='success' onClick={() => showAllianceSelection(eventCode)}>{t`Set Audience Display`}</Button>\n                    </>}\n                </div>\n            </Col>\n        </Row>\n        <Row>\n            <Col sm=\"4\">\n                {overrideString ? <div className={\"alert alert-warning text-center\"}>Elimination Override: {overrideString}</div> : null}\n                <table className={\"alliancesTable mx-auto\"}>\n                    <thead>\n                        <tr>\n                            <th>{t`Alliance`}</th>\n                            <th>{t`Captain`}</th>\n                            {(selectionState?.teamsPerAlliance || 0) > 2 ? <>\n                                <th>{t`1st Pick`}</th>\n                                <th>{t`2nd Pick`}</th>\n                            </>: <th>{t`Partner`}</th>}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {selectionState?.alliances.map((a, aidx) => <tr key={aidx}>\n                            <th>{aidx+1}</th>\n                            {a.map((t, idx) => <td key={idx}>\n                                {selectionState.teams.find(t2 => t2.number == t)?.displayNumber}\n                                {isBackupOnly && idx == 2 ? ((t ? <><br /><Button {...tableButtonAttrs} variant={\"danger\"}\n                                                                                  onClick={() => removeBackup(aidx + 1)}>Remove</Button></>\n                                    : <Button {...tableButtonAttrs} variant={\"outline-warning\"} disabled={!!t}\n                                              onClick={() => setTargetAlliance(aidx + 1)}>Add Backup</Button>)) : null}\n                            </td>)}\n                        </tr>)}\n                    </tbody>\n                </table>\n                {isBackupOnly ? null : <div className={\"mx-auto\"} style={{width: 'fit-content'}}>\n                    <Button className={\"m-2\"} variant={!selectionState ? 'light' : 'success'} disabled={!selectionState} onClick={undoSelection}>{t`Undo`}</Button>\n                    <Button className={\"m-2\"} variant={!selectionState ? 'light' : 'success'} disabled={!selectionState} onClick={finishSelection}>{t`Generate Matches`}</Button>\n                </div>}\n                <div className={\"mx-auto text-center\"}>\n                    <span>{matchStartTime && !isBackupOnly ? t`Playoff matches begin at ${matchStartTime}` : null}</span>\n                </div>\n            </Col>\n            <Col sm=\"8\">\n                <table className={\"alliancesTable mx-auto\"}>\n                    <thead>\n                        <tr>\n                            <th>{t`Rank`}</th>\n                            <th>{t`Number`}</th>\n                            <th>{t`Name`}</th>\n                            <th style={{width: '100px'}}>{t`Select`}</th>\n                            {isBackupOnly ? null : <>\n                                <th style={{width: '100px'}}>{t`Decline`}</th>\n                                <th style={{width: '100px'}}>{t`Remove`}</th>\n                            </>}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {selectionState?.teams?.map((team, idx) => <tr key={team.number}>\n                            <th>{team.rank}</th>\n                            <td>{team.displayNumber}</td>\n                            <td>{team.name}</td>\n                            {disabledSlots[idx] || (isBackupOnly ? !targetAlliance : (selectionState.nextSlot >= (selectionState.alliances.length * selectionState.teamsPerAlliance))) ? <td colSpan={isBackupOnly ? 1 : 2}>{disabledSlots[idx]}</td> : <>\n                                <td>\n                                    <Button {...tableButtonAttrs}\n                                            onClick={async () => {\n                                                isBackupOnly && targetAlliance ? await addBackup(targetAlliance, team.number) : await submitSelection(team.number, SelectionOp.ACCEPT)\n                                            }}>\n                                        {t`Accept`}\n                                    </Button>\n                                </td>\n                                {isBackupOnly ? null : <td>\n                                    <Button {...tableButtonAttrs}\n                                            onClick={() => submitSelection(team.number, SelectionOp.DECLINE)}>\n                                        {t`Decline`}\n                                    </Button>\n                                </td>}\n                            </>}\n                            {team.removed || (disabledSlots[idx] && (!isCaptainSlot || team.number !== nextCaptain?.number)) || isBackupOnly ? null : <td>\n                                <Button {...tableButtonAttrs}\n                                        onClick={() => submitSelection(team.number, SelectionOp.REMOVE)}\n                                        title=\"Use if e.g. the team has left the venue\">\n                                    {t`Remove`}\n                                </Button>\n                            </td>}\n                        </tr>)}\n                    </tbody>\n                </table>\n\n            </Col>\n        </Row>\n    </div>\n}\n","import { Nav, TabContainer, TabContent, TabPane, TabsProps } from \"react-bootstrap\";\nimport ErrorBoundary from \"../LocalErrorBoundary\";\nimport { map } from \"react-bootstrap/ElementChildren\";\nimport { ReactElement } from \"react\";\n\nfunction renderTab(child: ReactElement) {\n    const { title, eventKey, disabled, tabClassName, id } = child.props;\n    if (title == null) {\n        return null;\n    }\n\n    return (\n        <Nav.Item>\n            <Nav.Link as={\"button\"}\n                eventKey={eventKey}\n                disabled={disabled}\n                id={id}\n                className={tabClassName}>{title}</Nav.Link>\n        </Nav.Item>\n    );\n}\n\n// adapted from https://github.com/react-bootstrap/react-bootstrap/blob/bs4-dev/src/Tabs.tsx\nexport default function ButtonTabs({ children, activeKey, onSelect, ...navProps }: TabsProps & { className?: string }) {\n    return <TabContainer\n        activeKey={activeKey}\n        onSelect={onSelect}\n    >\n        <Nav {...navProps} variant=\"tabs\" role=\"tablist\" as=\"nav\">\n            {map(children, renderTab)}\n        </Nav>\n\n        <TabContent>\n            {map(children, child => {\n                const childProps = { ...child.props };\n\n                delete childProps.title;\n                delete childProps.disabled;\n                delete childProps.tabClassName;\n\n                const children = childProps.children;\n                delete childProps.children;\n\n                return <TabPane {...childProps} >\n                    <ErrorBoundary>\n                        {children}\n                    </ErrorBoundary>\n                </TabPane>;\n            })}\n        </TabContent>\n    </TabContainer>\n}","import {Alert, Button} from 'react-bootstrap';\nimport './DeauthNotifications.css'\nimport {useState} from \"react\";\nimport {DeauthEvent} from \"./DeauthDetails\";\n\nexport default function DeauthNotifications({deauthEvents, showDeauthDetails} : {\n    deauthEvents: Record<string, DeauthEvent[]>,\n    showDeauthDetails: () => void\n}) {\n    const [hiddenAlerts, setHiddenAlerts] = useState<Record<string, number>>({});\n\n    return <div className=\"deauth-alerts\">{Object.entries(deauthEvents).sort(([name1], [name2]) => name2.localeCompare(name1)).map(([name, entries]) => {\n        if(hiddenAlerts[name] == entries.length) {\n            return null;\n        }\n        const counts = entries.reduce<Record<number, number>>(function (acc, curr) {\n            acc[curr.team] ? acc[curr.team] += 1 : acc[curr.team] = 1;\n            return acc\n        }, {});\n        return <Alert key={name} variant=\"warning\" dismissible onClose={() => setHiddenAlerts(was => Object.assign({}, was, {[name]: entries.length}))}>\n            <Alert.Heading>Deauth event detected in match {name}.</Alert.Heading>\n            <p>\n                Please inform FTA & HR before committing the match.<br/>\n                Affected teams: {Object.entries(counts).map(([team, count]) => `${team} [${count}]`).join(\", \")}\n            </p>\n\n            <Button onClick={() => showDeauthDetails()} variant=\"outline-dark\">\n                Details\n            </Button>\n        </Alert>\n    })}</div>\n}","import {Alert, Button, Modal} from 'react-bootstrap';\nimport './DeauthNotifications.css'\nimport {useState} from \"react\";\n\nexport interface DeauthEvent {\n    \"ssid\": string,\n    \"num\": number,\n    \"code\": string,\n    \"match\": number,\n    \"victim\": string,\n    \"last_seen\": string,\n    \"active\": boolean,\n    \"pkt_count\": string,\n    \"matchTimeRemaining\": string,\n    \"matchShortName\": string,\n    \"team\": number\n}\n\nexport default function DeauthDetails({deauthEvents, hide} : {\n    deauthEvents: Record<string, DeauthEvent[]>,\n    hide: () => void\n}) {\n    return <Modal show onHide={hide} className={\"text-dark\"}>\n        <Modal.Header closeButton>\n            <Modal.Title>Deauth Events</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n            {Object.entries(deauthEvents).sort(([name1], [name2]) => name2.localeCompare(name1)).map(([name, entries]) => {\n                return <>\n                    <b>Match {name}</b>\n                    {entries.map((e, idx) => <pre key={idx}>{JSON.stringify(e, undefined, 2)}</pre>)}\n                </>\n            })}\n        </Modal.Body>\n    </Modal>;\n}","import {useState} from \"react\";\nimport {Tab} from \"react-bootstrap\";\n\nimport {useTimer} from \"ftc-common/hooks\"\nimport {confirmDialog, messageDialog} from \"first-common/dialogs\";\n\nimport \"./MatchControl.css\";\nimport VideoSwitch from \"./VideoSwitch\";\nimport Settings from \"./Settings\";\nimport Schedule from \"./Schedule\";\nimport CurrentMatches from \"./CurrentMatches\";\nimport ActionButtons from \"./ActionButtons\";\nimport ScoreEdit from \"./ScoreEdit\";\nimport { lockoutMatch, postMatch } from \"./api/match\";\nimport AllianceSelection from \"./AllianceSelection\";\nimport SupportChat from \"../chat/SupportChat\";\nimport {resetSelection} from \"./api/allianceSelection\";\nimport ButtonTabs from \"./ButtonTabs\";\nimport DeauthNotifications from \"./DeauthNotifications\";\nimport DeauthDetails from \"./DeauthDetails\";\nimport {\n    abortMatch, commitMatch,\n    previewMatch,\n    randomizeMatch,\n    showMatch,\n    showRandom,\n    startMatch,\n    useControlConnection\n} from \"./connection\";\nimport { t } from \"ftc-common/i18n\";\nimport { EventKey } from \"react-bootstrap/esm/types\";\nimport {AllianceLastMatchTimeout, LastOnFieldTimeout, MatchInfo, MatchTeam, ScheduledStartTimeout, T206Timeout, TimeoutReference, TimeoutType} from \"ftc-common/javaTypes\";\nimport {isT206DependencyTimeout, isT206Timeout} from \"ftc-common/timeoutUtils\";\nimport {getExpectedStartTimer} from \"ftc-common/displays/util\";\nimport PresentAwards from \"ftc-common/awards/manage/PresentAwards\";\nimport {delayStr} from \"../util\";\n\nasync function resetElims(eventCode: string) {\n    if(!await confirmDialog({\n        label: t`Reset Alliance Selection?`,\n        text: t`This will delete all generated elimination matches and undo all of alliance selections. This action cannot be undone.`,\n        buttonText: t`Reset Alliances`\n    })) {\n        return;\n    }\n    // TODO does this need to display any special error messages?\n    if(!await resetSelection(eventCode)) {\n        messageDialog({\n            label: t`Failed to Reset Alliances`,\n            text: t`Unable to reset alliances`\n        })\n    }\n}\n\nfunction isApplicableTimeout(nextMatch: MatchInfo<MatchTeam>, timeout: TimeoutReference) {\n    switch (timeout.type) {\n        case TimeoutType.G301: return false;\n        case TimeoutType.RUNNING_MATCH: return false;\n        case TimeoutType.SCHEDULED_START: return (timeout as ScheduledStartTimeout).match === nextMatch?.number;\n        case TimeoutType.T206: return (timeout as T206Timeout).targetMatch === nextMatch.number;\n        case TimeoutType.LAST_ON_FIELD: return (timeout as LastOnFieldTimeout).field === nextMatch.field;\n        case TimeoutType.ALLIANCE_LAST: return [nextMatch.red.seed, nextMatch.blue.seed].includes((timeout as AllianceLastMatchTimeout).alliance);\n        case TimeoutType.T206_MATCH_DEPENDENCY: return true;\n    }\n}\n\nconst initialTab = window.location.hash.replace(\"#\", \"\") || 'schedule';\n\nexport default function MatchControl({eventCode, isMeet, fieldCount, pinField, isDualDivisionParent, divisions, isDivision}: {\n    eventCode: string, isMeet: boolean, fieldCount: number, pinField: number, isDualDivisionParent: boolean, divisions: string[], isDivision: boolean\n}) {\n    const [deauthDetailsVisible, setDeauthDetailsVisible] = useState(false);\n    const [tab, setTab] = useState(initialTab);\n    const [unreadMessages, setUnreadMessages] = useState(0);\n    const [editingMatchNum, setEditingMatchNum] = useState(initialTab.startsWith(\"edit\") ? parseInt(initialTab.split(\"-\")[1]) : -1);\n    const {\n        nowCallback,\n        isConnected,\n        matchData,\n        displayUpdates,\n        deauthEvents,\n        settings,\n        qualsActive,\n        practiceActive,\n        selectionState,\n        timeoutData,\n        isArchived,\n        syncStatus,\n        displayData,\n        loadedMatch,\n        activeMatch,\n        remaining,\n        loadMatch,\n        nextMatchNum\n    } = useControlConnection(eventCode, pinField, () => {\n        setEditingMatchNum(-1)\n        goToTab(\"schedule\")\n    });\n\n    function goToTab(tab: EventKey | null) {\n        window.location.hash = tab as string;\n        setTab(tab as string);\n    }\n\n    // Derived state\n    const matches = matchData.matches;\n    const activeType = matchData.activeType;\n    const unsavedMatches = matches.filter(m => m.state === 'SUBMITTED' || m.state === 'REVIEW');\n    const editingMatch = matches.find(m => m.number === editingMatchNum);\n\n\n    async function editMatch(num: number) {\n        setEditingMatchNum(num)\n        goToTab(`edit-${num}`)\n    }\n\n    const scheduleArgs = {\n        liveScoring: settings.liveScoring,\n        archived: isArchived,\n        loadMatch,\n        eventCode,\n        fieldCount,\n        editMatch,\n        commitMatch: (num: number) => commitMatch(eventCode, num, matches),\n        postMatch: async (num: number) => {\n            if(!await postMatch(eventCode, num)) {\n                messageDialog({\n                    label: t`Failed to Post Match`,\n                    text: t`Match post failed.  Please refresh and try again.`\n                })\n            }\n        },\n        replayMatch: async (num: number) => {\n            const match = matches.find(m => m.number === num)\n            const matchName = match!.name\n            if(!await confirmDialog({\n                label: t`Replay ${matchName}?`,\n                text: t`This will overwrite any saved scores and data for ${matchName}!`,\n                buttonText: t`Replay Match`\n            })) {\n                return;\n            }\n            await loadMatch(num)\n        },\n        qualsActive,\n        practiceActive\n    }\n\n    const lastRunMatch = [...matches].sort((m1, m2) => m2.start - m1.start)[0];\n\n    const assumedNextMatch = timeoutData.assumedNext?.filter(x => !!x)[0];\n    const expectedTimeout = assumedNextMatch && timeoutData.activeTimeouts ? getExpectedStartTimer(assumedNextMatch, timeoutData.activeTimeouts, isApplicableTimeout, nowCallback) : timeoutData.activeTimeouts?.find(isT206DependencyTimeout)\n    const timeoutTimer = useTimer({\n        startAt: expectedTimeout?.timeoutStart,\n        duration:  (expectedTimeout?.timeoutDuration ?? 0) / 1000,\n        nowCallback\n    });\n\n    const headerRow = <div className={\"d-flex justify-content-center\"}>\n        <h1>{t`Match Control`} <span className={\"badge badge-primary\"}>{pinField ? t`Field ${pinField}` : ''}</span> {activeType === 'TEST' ? t`- TEST MODE` : ''} {activeType === 'PRACTICE' ? t`- Practice Matches` : ''}</h1>\n    </div>\n\n    const activeMatchRunning = !!(activeMatch && activeMatch?.state !== 'REVIEW' && activeMatch?.state !== 'SUBMITTED');\n\n    return <>\n        <div className={`controlHeading ${activeType === 'TEST' || activeType === 'PRACTICE' ? 'test' : ''}`}>\n            {headerRow}\n            {isConnected ? null : <div className={\"alert alert-warning text-center h6 fixed-top w-25 mx-auto\"}>{t`DISCONNECTED!!`}</div>}\n            <CurrentMatches loadedMatch={loadedMatch} activeMatch={activeMatch} matchRemaining={remaining} timeoutTimer={timeoutTimer} timeout={expectedTimeout} settings={settings}/>\n            {settings.hrControl ? <div className={\"alert alert-danger text-center\"} style={{margin: '1ch'}}>Match flow is being controlled from the HR Page!</div> : null}\n            <ActionButtons loadedMatch={loadedMatch} activeMatch={activeMatch} editingMatch={editingMatch}\n                           previewMatch={(number, forceFullscreen) => previewMatch(eventCode, number, forceFullscreen)}\n                           randomizeMatch={(number, opts) => randomizeMatch(eventCode, number, opts)}\n                           showRandom={(number) => showRandom(eventCode, number)}\n                           showMatch={(number) => showMatch(eventCode, number)}\n                           startMatch={(number) => startMatch(eventCode, number)}\n                           abortMatch={(number) => abortMatch(eventCode, number)}\n                           commitAndPostMatch={(number) => commitMatch(eventCode, number, matches, true)}\n                           hasNextMatch={nextMatchNum > 0}\n                           loadNextMatch={() => loadMatch(nextMatchNum)}\n                           displayUpdates={Object.values(displayUpdates)}\n                           showSeparatePreviews={matches.length > 0 && matches[0].type === 'ELIMS' && displayData.some(d => d.data.overlay)}\n                           settings={settings} isArchived={isArchived} warnIfNotPost={false} />\n        </div>\n\n        <ButtonTabs\n            activeKey={tab}\n            onSelect={goToTab}\n            className=\"controlTabs\"\n        >\n            <Tab eventKey=\"schedule\" title={t`Schedule`}>\n                <Schedule matches={matches} {...scheduleArgs} testMode={activeType === 'TEST'} activeMatchRunning={activeMatchRunning}/>\n            </Tab>\n            <Tab eventKey=\"incomplete\" title={<span>{t`Incomplete Matches`} {unsavedMatches.length > 0 ? <span className={\"tabBadge badge badge-danger\"}>{unsavedMatches.length}</span> : null}</span>}>\n                <Schedule matches={unsavedMatches} {...scheduleArgs} activeMatchRunning={activeMatchRunning} />\n            </Tab>\n            <Tab eventKey={`edit-${editingMatchNum}`} title={t`Score Edit`} disabled={!editingMatch}>\n                <ScoreEdit settings={settings} match={editingMatch} eventCode={eventCode} isArchived={isArchived}\n                           showHelp={() => goToTab(\"help\")}\n                           lockoutMatch={(number: number) => lockoutMatch(eventCode, number)}\n                           commitMatch={(number: number, verifyCommit: boolean) => commitMatch(eventCode, number, matches, false, verifyCommit)}\n                           activeMatchRunning={activeMatchRunning}\n                />\n            </Tab>\n            <Tab eventKey=\"active\" title={t`Active Match`} disabled={!settings.liveScoring}>\n                <ScoreEdit active eventCode={eventCode} settings={settings} match={activeMatch} openMatchForEditing={editMatch}/>\n            </Tab>\n            <Tab eventKey=\"settings\" title={t`Settings`} disabled={pinField > 0}>\n                <Settings eventCode={eventCode} settings={settings} selectionState={selectionState}\n                          isMeet={isMeet} activeMatch={activeMatch} activeType={activeType} timeoutData={timeoutData}\n                          resetElims={() => resetElims(eventCode)}\n                          syncStatus={syncStatus} nowCallback={nowCallback} isArchived={isArchived}\n                          showDeauthDetails={Object.keys(deauthEvents).length > 0 ? () => setDeauthDetailsVisible(true) : undefined} showHelp={() => goToTab(\"help\")}\n                          isDualDivisionParent={isDualDivisionParent} matches={matches} unsavedMatchCount={unsavedMatches.length} />\n            </Tab>\n            <Tab eventKey=\"alliance\" title={t`Alliance Selection`} disabled={activeType === 'TEST' || activeType == 'PRACTICE' || (activeType == 'ELIMS' && !settings.allowBackupsOverride) || isArchived || pinField > 0 || isDualDivisionParent}>\n                <AllianceSelection eventCode={eventCode} matches={matches} selectionState={selectionState} activeType={activeType} settings={settings} />\n            </Tab>\n            <Tab eventKey=\"video\" title={t`Video Switch`}>\n                <VideoSwitch eventCode={eventCode} displayData={displayData} fieldCount={fieldCount} pinField={pinField} showMeetRankings={!!settings.showMeetRankings}\n                             isDualDivisionParent={isDualDivisionParent} isDivision={isDivision} divisions={divisions}/>\n            </Tab>\n            <Tab eventKey=\"awards\" title={t`Present Awards`}>\n                <div className={\"p-3\"}>\n                    <PresentAwards />\n                </div>\n            </Tab>\n            <Tab eventKey=\"help\" title={<span>{t`Help`} {unreadMessages > 0 ? <span className={\"tabBadge badge badge-warning\"}>{unreadMessages}</span> : null}</span>} >\n                <div ref={(el) => el && el.appendChild(document.getElementById(\"feedbackContent\")!)} />\n                <SupportChat setUnreadMessages={setUnreadMessages}/>\n            </Tab>\n        </ButtonTabs>\n\n        <div className=\"footer\">\n            <div className={`syncStatusLight ${syncStatus.status}`}\n                 title={syncStatus.description + (syncStatus.lastSyncTime > 0 ? \"\\r\\nLast Success: \" + new Date(syncStatus.lastSyncTime).toLocaleTimeString() : \"\")}></div>\n            <span>{delayStr(lastRunMatch?.scheduledStart, lastRunMatch?.start)}</span>\n        </div>\n\n        <DeauthNotifications deauthEvents={deauthEvents} showDeauthDetails={() => setDeauthDetailsVisible(true)} />\n        {deauthDetailsVisible ? <DeauthDetails deauthEvents={deauthEvents} hide={() => setDeauthDetailsVisible(false)}/> : null}\n    </>\n}\n","import MatchControl from \"./MatchControl\";\nimport ErrorBoundary from \"../LocalErrorBoundary\";\nimport { createRoot } from \"react-dom/client\";\nimport {QueryClientProvider} from \"@tanstack/react-query\";\nimport {queryClient} from \"./connection\";\n\nconst root = createRoot(document.getElementById(\"matchControl\"));\n\nroot.render(<ErrorBoundary>\n    <QueryClientProvider client={queryClient}>\n        <MatchControl\n            eventCode={window.eventCode}\n            isMeet={window.isMeet}\n            fieldCount={window.fieldCount}\n            pinField={window.pinField}\n            isDualDivisionParent={window.isDualDivisionParent}\n            isDivision={window.isDivision}\n            divisions={window.divisions}\n        />\n    </QueryClientProvider>\n</ErrorBoundary>)\n"],"names":["_excluded","Spinner","React","_ref","ref","bsPrefix","variant","animation","size","children","_ref$as","Component","className","props","_objectWithoutPropertiesLoose","useBootstrapPrefix","bsSpinnerPrefix","_extends","classNames","showSponsors","eventCode","field","PermissiveURLSearchParams","showBracket","style","params","showAllianceSelection","showRanks","showInspectionStatus","showWifi","showSlideshow","showSafetySecurity","showBlank","showVideo","showAudienceKey","showOnlineResults","res","messageDialog","showMessage","message","playVideo","videoUrl","subtitleUrl","stopVideo","setConfig","id","config","bulkReconfigure","ids","division","key","value","setTestMode","state","advanceToQuals","returnToPractice","testSync","syncNow","downloadVideos","DisplaysTable","displayData","fieldCount","showMeetRankings","isDualDivisionParent","divisions","selectedDisplay","setSelectedDisplay","useState","sortedDisplays","setSortedDisplays","checkedDisplays","setCheckedDisplays","showBulkReconfigure","setShowBulkReconfigure","bulkDivision","setBulkDivision","bulkField","setBulkField","useEffect","d","a","b","aName","bName","typeMap","row","data","configBtn","jsx","divisionDisplay","intro","jsxs","Fragment","e","ip","sendBulkUpdate","api.bulkReconfigure","Button","ConfigDialog","cfg","api.setConfig","Modal","Row","Form","Col","i","fieldNo","VideoUpdater","updateProgress","setUpdateProgress","updateStatusText","setUpdateStatusText","queryClient","useQueryClient","updateVideos","ws","evt","msg","ProgressBar","VideoPlayback","videoQuery","useQuery","selectedVideo","setSelectedVideo","subtitleLocale","setSubtitleLocale","customSubtitles","setCustomSubtitles","videoData","_a","Alert","v","fileUploadDialog","file","was","s","VideoSwitch","pinField","isDivision","setMessage","hasMessage","setHasMessage","advancedEditor","setAdvancedEditor","el","BracketStyle","ReactQuill","content","old","Settings","settings","isMeet","isArchived","showHelp","activeType","activeMatch","syncStatus","timeoutData","resetElims","nowCallback","selectionState","showDeauthDetails","matches","unsavedMatchCount","setSetting","useCallback","testMode","connectionTestResponse","setConnectionTestResponse","syncNowResponse","setSyncNowResponse","baseId","useId","activeMatchRunning","silently","alwaysSilent","meetRankingsUniqueId","useUniqueId","transitionTestMode","mode","transitionToPractice","parts","m","buttonAttrs","ButtonXs","isSeriesAllianceDescription","description","Schedule","liveScoring","archived","loadMatch","editMatch","commitMatch","postMatch","replayMatch","qualsActive","practiceActive","testMatchCreateVisible","setTestMatchCreateVisible","hide3","hasRounds","editable","m2","_b","_c","TestMatchDialog","MatchHistoryDialog","visible","close","match","updateMatchDetails","commits","setCommits","selectedRecord","setSelectedRecord","sheetData","setSheetData","newHistory","getMatchHistory","url","html","handleClose","copyToEditor","restoreMatchHistory","idx","toRobotData","teams","details","x","replaceClassifierState","position","existing","newState","mockClassifierState","ArtifactType","DecodeInput","color","updateScore","otherDetails","updateBothScores","readOnly","otherTeams","random","isPlayoff","idPrefix","robots","robotNoshowCombos","targetPattern","randomizationArtifacts","type","robot1","robot2","DecodeInputBreakdown","score","breakdown","other","Randomization","randomizationText","gateSvg","useAsset","ReactSVG","Artifact","faSquare","RED_CARD","YELLOW_CARD","AllianceCards","isElims","alliance","cardCarries","detailAlliance","right","cardIdx","carries","hasCarry","isOnlyCarrySource","redChecked","yellowChecked","newCard","Breakdown","showAdjust","tiebreakRule","simultaneousDqRule","adjustUniqueId","Card","readOnlyStates","MatchState","ScoreEdit","openMatchForEditing","lockoutMatch","active","loading","setLoading","matchDetails","setMatchDetails","hasEdits","setHasEdits","reload","setReload","prevState","useRef","showMatchHistory","setShowMatchHistory","getMatchScore","value2","src2","payload","unsavedEdit","editScore","forceEdit","confirmDialog","commitScore","topBanner","missingPeople","forceEditButton","redScoreObj","blueScoreObj","redBreakdown","blueBreakdown","_d","redCardCarries","_e","blueCardCarries","_f","redTotal","blueTotal","red","blue","tableButtonAttrs","AllianceSelection","targetAlliance","setTargetAlliance","isBackupOnly","MatchType","isCaptainSlot","nextCaptain","t","disabledSlots","team","startSelection","unplayedMatches","startTime","promptDialog","Temporal","api.startSelection","submitSelection","api.submitSelection","SelectionMethod","undoSelection","api.undoSelection","finishSelection","confirmationWarning","availableCount","api.finishSelection","addBackup","seed","api.addBackup","removeBackup","api.removeBackup","matchStartTime","overrideString","prefix","aidx","t2","SelectionOp","renderTab","child","title","eventKey","disabled","tabClassName","Nav","ButtonTabs","activeKey","onSelect","navProps","TabContainer","map","TabContent","childProps","TabPane","ErrorBoundary","DeauthNotifications","deauthEvents","hiddenAlerts","setHiddenAlerts","name1","name2","name","entries","counts","acc","curr","count","DeauthDetails","hide","resetSelection","isApplicableTimeout","nextMatch","timeout","TimeoutType","initialTab","MatchControl","deauthDetailsVisible","setDeauthDetailsVisible","tab","setTab","unreadMessages","setUnreadMessages","editingMatchNum","setEditingMatchNum","isConnected","matchData","displayUpdates","loadedMatch","remaining","nextMatchNum","useControlConnection","goToTab","unsavedMatches","editingMatch","num","scheduleArgs","matchName","lastRunMatch","m1","assumedNextMatch","expectedTimeout","getExpectedStartTimer","isT206DependencyTimeout","timeoutTimer","useTimer","headerRow","CurrentMatches","ActionButtons","number","forceFullscreen","previewMatch","opts","randomizeMatch","showRandom","showMatch","startMatch","abortMatch","Tab","verifyCommit","PresentAwards","SupportChat","delayStr","root","createRoot","QueryClientProvider"],"mappings":"siFAEA,IAAIA,GAAY,CAAC,WAAY,UAAW,YAAa,OAAQ,WAAY,KAAM,WAAW,EAItFC,GAAuBC,GAAM,WAAW,SAAUC,EAAMC,EAAK,CAC/D,IAAIC,EAAWF,EAAK,SAChBG,EAAUH,EAAK,QACfI,EAAYJ,EAAK,UACjBK,EAAOL,EAAK,KACZM,EAAWN,EAAK,SAChBO,EAAUP,EAAK,GACfQ,EAAYD,IAAY,OAAS,MAAQA,EACzCE,EAAYT,EAAK,UACjBU,EAAQC,GAA8BX,EAAMH,EAAS,EAEzDK,EAAWU,GAAmBV,EAAU,SAAS,EACjD,IAAIW,EAAkBX,EAAW,IAAME,EACvC,OAAoBL,GAAM,cAAcS,EAAWM,GAAS,CAC1D,IAAKb,CACN,EAAES,EAAO,CACR,UAAWK,GAAWN,EAAWI,EAAiBR,GAAQQ,EAAkB,IAAMR,EAAMF,GAAW,QAAUA,CAAO,CACrH,CAAA,EAAGG,CAAQ,CACd,CAAC,EACDR,GAAQ,YAAc,UCnBA,eAAAkB,GAAaC,EAAmBC,EAAgB,CAC5D,MAAA,MAAM,UAAUD,CAAS,qBAAsB,CACjD,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,CACL,CAEsB,eAAAE,GAAYH,EAAmBI,EAAqBH,EAAgB,CACtF,MAAMI,EAGF,CAAC,EACFD,IACCC,EAAO,MAAQD,GAEhBH,IACCI,EAAO,MAAQJ,GAEb,MAAA,MAAM,UAAUD,CAAS,oBAAqB,CAChD,OAAQ,OACR,KAAME,EAA0BG,CAAM,CAAA,CACzC,CACL,CAEsB,eAAAC,GAAsBN,EAAmBC,EAAgB,CACrE,MAAA,MAAM,UAAUD,CAAS,2BAA4B,CACvD,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,CACL,CAEsB,eAAAM,GAAUP,EAAmBC,EAAgB,CACzD,MAAA,MAAM,UAAUD,CAAS,kBAAmB,CAC9C,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,CACL,CAEsB,eAAAO,GAAqBR,EAAmBC,EAAgB,CACpE,MAAA,MAAM,UAAUD,CAAS,mBAAoB,CAC/C,OAAQ,OACR,KAAMC,EAAOC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACvD,CACL,CAEsB,eAAAQ,GAAST,EAAmBC,EAAgB,CACxD,MAAA,MAAM,UAAUD,CAAS,yBAA0B,CACrD,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,CACL,CAEsB,eAAAS,GAAcV,EAAmBC,EAAgB,CAC7D,MAAA,MAAM,UAAUD,CAAS,8BAA+B,CAC1D,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,CACL,CAEsB,eAAAU,GAAmBX,EAAmBC,EAAgB,CAClE,MAAA,MAAM,UAAUD,CAAS,oCAAqC,CAChE,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,CACL,CAEsB,eAAAW,GAAUZ,EAAmBC,EAAgB,CACzD,MAAA,MAAM,UAAUD,CAAS,0BAA2B,CACtD,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,CACL,CAEsB,eAAAY,GAAUb,EAAmBC,EAAgB,CACzD,MAAA,MAAM,UAAUD,CAAS,0BAA2B,CACtD,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,CACL,CAEsB,eAAAa,GAAgBd,EAAmBC,EAAgB,CAC/D,MAAA,MAAM,UAAUD,CAAS,wBAAyB,CACpD,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,CACL,CAEsB,eAAAc,GAAkBf,EAAmBC,EAAgB,CACvE,MAAMe,EAAM,MAAM,MAAM,UAAUhB,CAAS,2BAA4B,CACnE,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,MAAAD,CAAO,CAAA,EAAI,IAAA,CACxD,GACG,CAACe,EAAI,IAAO,MAAMA,EAAI,SAAY,OACpBC,EAAA,CACV,MAAO,iCACP,KAAM,2DAAA,CACT,CAET,CAEsB,eAAAC,GAAYlB,EAAmBmB,EAAiBlB,EAAgB,CAC5E,MAAA,MAAM,UAAUD,CAAS,oBAAqB,CAChD,OAAQ,OACR,KAAMC,EAAQC,EAA0B,CAAE,IAAKiB,EAAS,MAAAlB,CAAM,CAAC,EAAIC,EAA0B,CAAE,IAAKiB,CAAS,CAAA,CAAA,CAChH,CACL,CAEA,eAAsBC,GAAUpB,EAAmBqB,EAAkBC,EAAqBrB,EAAgB,CAChG,MAAA,MAAM,UAAUD,CAAS,uBAAwB,CACnD,OAAQ,OACR,KAA4EE,EAA0B,CAAE,SAAAmB,EAAU,YAAAC,CAAa,CAAA,CAAA,CAClI,CACL,CAEsB,eAAAC,GAAUvB,EAAmBC,EAAgB,CACzD,MAAA,MAAM,UAAUD,CAAS,+BAAgC,CAC3D,OAAQ,OACR,KAAsD,IAAA,CACzD,CACL,CAEsB,eAAAwB,GAAUxB,EAAmByB,EAAYC,EAAuB,CAClF,MAAM,MAAM,UAAU1B,CAAS,2BAA2ByB,CAAE,IAAK,CAC7D,OAAQ,OACR,KAAM,KAAK,UAAUC,CAAM,CAAA,CAC9B,CACL,CAEA,eAAsBC,GAAgB3B,EAAmB4B,EAAeC,EAAkB5B,EAAe,CAC/F,MAAA,MAAM,UAAUD,CAAS,gCAAiC,CAC5D,OAAQ,OACR,KAAM,KAAK,UAAU,CACjB,IAAA4B,EACA,SAAAC,EACA,MAAA5B,CACH,CAAA,CAAA,CACJ,CACL,CC/IsB,eAAAuB,GAAUxB,EAAmB8B,EAAaC,EAAY,CAClE,MAAA,MAAM,UAAU/B,CAAS,eAAgB,CAC3C,OAAQ,OACR,KAAM,IAAI,gBAAgB,CAAE,IAAA8B,EAAK,MAAAC,CAAO,CAAA,CAAA,CAC3C,CACL,CAEsB,eAAAC,GAAYhC,EAAmBiC,EAAgB,CACjE,MAAM,MAAM,UAAUjC,CAAS,qBAAqBiC,CAAK,IAAK,CAC1D,OAAQ,MAAA,CACX,CACL,CAEA,eAAsBC,GAAelC,EAAmB,CAC9C,MAAA,MAAM,UAAUA,CAAS,kBAAmB,CAC9C,OAAQ,MAAA,CACX,CACL,CAEA,eAAsBmC,GAAiBnC,EAAmB,CAChD,MAAA,MAAM,UAAUA,CAAS,qBAAsB,CACjD,OAAQ,MAAA,CACX,CACL,CAEA,eAAsBoC,GAASpC,EAAmB,CAIvC,OAAA,MAHK,MAAM,MAAM,UAAUA,CAAS,sBAAuB,CAC9D,OAAQ,MAAA,CACX,GACgB,KAAK,CAC1B,CAEA,eAAsBqC,GAAQrC,EAAmB,CAItC,OAAA,MAHK,MAAM,MAAM,UAAUA,CAAS,qBAAsB,CAC7D,OAAQ,MAAA,CACX,GACgB,KAAK,CAC1B,CAEA,eAAsBsC,IAAiB,CAInC,OAHY,MAAM,MAAM,0BAA2B,CAC/C,OAAQ,MAAA,CACX,GACU,EACf,CCdA,SAASC,GAAc,CAAC,UAAAvC,EAAW,YAAAwC,EAAa,WAAAC,EAAY,iBAAAC,EAAkB,qBAAAC,EAAsB,UAAAC,GAOjG,CACC,KAAM,CAACC,EAAiBC,CAAkB,EAAIC,WAAgC,EACxE,CAACC,EAAgBC,CAAiB,EAAIF,EAAAA,SAAkC,CAAA,CAAE,EAC1E,CAACG,EAAiBC,CAAkB,EAAIJ,EAAAA,SAAmB,CAAA,CAAE,EAC7D,CAACK,EAAqBC,CAAsB,EAAIN,EAAAA,SAAS,EAAK,EAC9D,CAACO,EAAcC,CAAe,EAAIR,EAAAA,SAAS,CAAC,EAC5C,CAACS,EAAWC,CAAY,EAAIV,EAAAA,SAAS,CAAC,EAC5CW,EAAAA,UAAU,IAAM,CAERb,GAAmB,CAACL,EAAY,QAAUmB,EAAE,MAAOd,GAAA,YAAAA,EAAiB,GAAE,GACtEC,EAAmB,MAAS,CAChC,EACD,CAACD,EAAiBL,CAAW,CAAC,EAEjCkB,EAAAA,UAAU,IAAM,CACZT,EAAkB,CAAC,GAAGT,CAAW,EAAE,KAAK,CAACoB,EAAGC,IAAM,CAC3C,GAAAD,EAAE,UAAYC,EAAE,SACR,OAAAD,EAAE,SAAWC,EAAE,YAChBD,EAAE,KAAK,OAASC,EAAE,KAAK,KAAM,CAC7B,MAAAC,EAAQF,EAAE,KAAK,KACfG,EAAQF,EAAE,KAAK,KAClB,OAAAC,GAAS,CAACC,EACF,EACD,CAACD,GAASC,EACT,GACDD,GAASC,EACRD,EAAM,cAAcC,CAAK,EAEzB,CACX,KAEA,QAAOH,EAAE,GAAG,cAAcC,EAAE,EAAE,CAClC,CACH,CAAC,CAAA,EACH,CAACrB,CAAW,CAAC,EAChB,MAAMwB,EAAU,CACZ,SAAU,YACV,MAAO,SACP,OAAQ,UACR,IAAK,OACL,QAAS,WACb,EACMC,EAAOC,GAAgC,CACzC,IAAIxC,EAASwC,GAAA,YAAAA,EAAM,KACnB,GAAI,CAACxC,EACM,OAAA,KAEL,MAAAyC,EAAaC,EAAA,IAAA,SAAA,CAAO,UAAW,sBAAuB,QAAS,IAAMtB,EAAmBoB,CAAI,EAAI,SAAU,SAAA,CAAA,EAC1GG,EAAkBH,EAAK,SAAWtB,EAAUsB,EAAK,SAAW,CAAC,EAAI,UACjEI,EACFC,EAAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAAAJ,MAAC,KAAG,CAAA,SAAAA,EAAA,IAAC,QAAA,CAAM,KAAK,WACL,QAASlB,EAAgB,SAASgB,EAAK,EAAE,EACzC,SAAWO,GAAM,CACRA,EAAE,OAA4B,QAC/BtB,EAAmB,CAAC,GAAGD,EAAiBgB,EAAK,EAAE,CAAC,EAEhDf,EAAmBD,EAAgB,OAAOwB,GAAMA,IAAOR,EAAK,EAAE,CAAC,CACnE,CACJ,CAAA,EACT,EACFE,EAAAA,IAAC,KAAI,CAAA,SAAAF,EAAK,EAAG,CAAA,EACZvB,EAAuByB,EAAA,IAAC,KAAI,CAAA,SAAAC,CAAgB,CAAA,EAAQ,KACrDD,EAAAA,IAAC,KAAI,CAAA,SAAA1C,EAAO,IAAK,CAAA,EAChB0C,EAAA,IAAA,KAAA,CAAI,SAAQJ,EAAAtC,EAAO,IAAI,CAAE,CAAA,CAAA,EAC9B,EACA,OAAIA,EAAO,OAAS,OAASA,EAAO,OAAS,iBACjC,KAAI,CAAA,SAAA,CAAA4C,QAAO,KAAG,EAAA,QAAM,KAAG,EAAA,QAAM,KAAG,EAAA,QAAM,KAAG,EAAA,QAAM,KAAG,EAAA,EAAKF,EAAAA,IAAC,MAAI,SAAUD,CAAA,CAAA,CAAA,EAAK,SAG/E,KACH,CAAA,SAAA,CAAAG,QACA,KAAI,CAAA,SAAA5C,EAAO,cAAgB,MAAQ,OAASA,EAAO,WAAY,CAAA,EAChE0C,EAAA,IAAC,MAAI,SAAO1C,EAAA,QAAU,WAAcA,EAAO,gBAAkB,SAAW,YAAa,EACpF0C,EAAAA,IAAA,KAAA,CAAI,SAAO1C,EAAA,KAAO,OAAS,KAAM,CAAA,QACjC,KAAI,CAAA,SAAAA,EAAO,qBAAuB,SAAW,UAAY,MAAO,CAAA,QAChE,KAAI,CAAA,SAAAA,EAAO,sBAAwB,WAAa,0BAA4B,yBAA0B,CAAA,EACvG0C,EAAAA,IAAC,MAAI,SAAUD,CAAA,CAAA,CAAA,CAAA,EAPHD,EAAK,EAQrB,CACJ,EAEA,SAASS,GAAiB,CACtBC,GAAoB5E,EAAWkD,EAAiBI,EAAcE,CAAS,EACvEL,EAAmB,CAAA,CAAE,EACrBE,EAAuB,EAAK,CAAA,CAGhC,OACIkB,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAD,OAAC,SAAM,MAAO,CAAC,MAAO,OAAQ,UAAW,QACrC,EAAA,SAAA,CAAAH,EAAAA,IAAC,SACD,SAACG,OAAA,KAAA,CAAG,MAAO,CAAC,aAAc,mBACtB,SAAA,CAAAH,EAAA,IAAC,KAAG,EAAA,EACJA,EAAA,IAAC,MAAI,SAAM,KAAA,CAAA,EACVzB,EAAuByB,EAAAA,IAAC,KAAI,CAAA,SAAA,WAAY,CAAA,EAAQ,KACjDA,EAAA,IAAC,MAAI,SAAQ,OAAA,CAAA,EACbA,EAAA,IAAC,MAAI,SAAQ,OAAA,CAAA,EACbA,EAAA,IAAC,MAAI,SAAS,QAAA,CAAA,EACdA,EAAA,IAAC,MAAI,SAAe,cAAA,CAAA,EACpBA,EAAA,IAAC,MAAI,SAAS,QAAA,CAAA,EACdA,EAAA,IAAC,MAAI,SAAe,cAAA,CAAA,EACpBA,EAAA,IAAC,MAAI,SAAwB,uBAAA,CAAA,EAC7BA,EAAAA,IAAC,MAAI,SAAU,SAAA,CAAA,CAAA,CAAA,CACnB,CACA,CAAA,EACAA,MAAC,SACA,SAAepB,EAAA,IAAKW,GAAMM,EAAIN,CAAC,CAAC,CACjC,CAAA,CAAA,EACJ,QACCkB,EAAO,CAAA,UAAW,OAAQ,QAAS,UAAW,KAAM,KAAM,SAAU3B,EAAgB,QAAU,EAAG,QAAS,IAAMG,EAAuB,EAAI,EAAI,SAAoB,oBAAA,EACnKV,EACG4B,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAJ,MAACS,GAAO,UAAW,OAAQ,QAAS,YAAa,KAAM,KAAM,QAAS,IAAM1B,EAAmBH,EAAe,IAAIW,GAAKA,EAAE,EAAE,CAAC,EAAI,SAAc,cAAA,EAC7IS,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,YAAa,KAAM,KAAM,QAAS,IAAM1B,EAAmB,CAAE,CAAA,EAAI,SAAmB,kBAAA,CAAA,CAAA,CAAA,CAC5H,EAAK,KACJN,GAAA,MAAAA,EAAiB,KAClBuB,EAAA,IAACU,GAAA,CAAa,KAAM,CAAC,CAACjC,EAAiB,YAAa,IAAMC,EAAmB,MAAS,EAAG,WAAYD,EAAgB,SAAW,EAAKJ,GAAc,EACrI,OAAQI,GAAA,YAAAA,EAAiB,KAAM,UAAYkC,GAAQ,CAC1BjC,EAAA,OAAO,OAAO,CAAC,EAAGD,EAAiB,CAAC,KAAMkC,CAAG,CAAC,CAAC,EAClEC,GAAchF,EAAW6C,EAAgB,GAAIkC,CAAG,CACtD,EAAG,qBAAsBpC,GAAwB,CAACE,EAAgB,SAAU,MAAO,UAAW,iBAAAH,EAAoC,aAAc,EAAA,CAAA,EACxJ,KACN6B,OAACU,GAAM,KAAM7B,EAAqB,OAAQ,IAAMC,EAAuB,EAAK,EACxE,SAAA,CAACe,EAAAA,IAAAa,EAAM,OAAN,CAAa,YAAW,GACrB,eAACA,EAAM,MAAN,CAAY,SAAA,+BAAA,CAA6B,CAC9C,CAAA,EAECb,EAAA,IAAAa,EAAM,KAAN,CACG,gBAACC,GACA,CAAA,SAAA,CAAAvC,EACC4B,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAJ,EAAAA,IAACe,EAAK,MAAL,CAAW,OAAM,GAAC,GAAG,IAAK,SAAY,WAAA,CAAA,EACvCf,EAAAA,IAACgB,IAAI,GAAG,IACJ,gBAACD,EAAK,QAAL,CAAa,GAAG,SAAS,OAAM,GAAC,MAAO7B,EAAc,SAAemB,GAAAlB,EAAgB,SAASkB,EAAE,OAAO,KAAK,CAAC,EACvG,SAAA,CAACL,MAAA,SAAA,CAAO,MAAO,EAAI,SAAU,UAAA,EAC5BxB,EAAU,IAAI,CAACe,EAAG0B,IAAMjB,EAAA,IAAC,SAAe,CAAA,MAAOiB,EAAI,EAAI,SAAlB1B,CAAA,EAAA0B,CAAoB,CAAS,CAAA,CAAA,CACzE,CACJ,CAAA,CAAA,CAAA,CACF,EAAK,KACLjB,EAAAA,IAACe,EAAK,MAAL,CAAW,OAAM,GAAC,GAAG,IAAK,SAAiB,gBAAA,CAAA,EAC5Cf,EAAAA,IAACgB,IAAI,GAAG,IACJ,gBAACD,EAAK,QAAL,CAAa,GAAG,SAAS,OAAM,GAAC,MAAO3B,EAAW,SAAeiB,GAAAhB,EAAa,SAASgB,EAAE,OAAO,KAAK,CAAC,EACnG,SAAA,CAACL,MAAA,SAAA,CAAO,MAAO,EAAI,SAAS,SAAA,EAC3B,CAAC,GAAG,MAAMd,EAAe,EAAKb,GAAc,CAAE,EAAE,KAAM,CAAA,EAAE,IAAS4C,GAAA,CAC9D,MAAMC,EAAUD,EAAI,EACpB,aAAQ,SAAqB,CAAA,MAAOC,EAAU,SAAU,UAAAA,CAAO,IAA3CA,CAA8C,CACrE,CAAA,CAAA,CAAA,CACL,CACJ,CAAA,CAAA,CAAA,CACA,CACJ,CAAA,EAEAf,EAAAA,KAACU,EAAM,OAAN,CACG,SAAA,CAACb,EAAAA,IAAAS,EAAA,CAAO,QAAQ,YAAY,QAAS,IAAMxB,EAAuB,EAAK,EAAG,SAAK,OAAA,CAAA,EAC/Ee,MAACS,GAAO,QAAQ,UAAU,QAAS,IAAMF,EAAA,EAAkB,SAAc,gBAAA,CAAA,CAAA,CAC7E,CAAA,CAAA,CACJ,CAAA,CAAA,EACJ,CACJ,CAEA,SAASY,IAAe,CACpB,KAAM,CAACC,EAAgBC,CAAiB,EAAI1C,EAAAA,SAA6B,MAAS,EAC5E,CAAC2C,EAAkBC,CAAmB,EAAI5C,EAAAA,SAAS,EAAE,EACrD6C,EAAcC,GAAe,EAEnC,eAAeC,GAAe,CAGvB,GAFHL,EAAkB,MAAS,EAC3BE,EAAoB,qBAAqB,EACtC,CAAC,MAAMrD,KAAkB,CACxBqD,EAAoB,iCAAiC,EACrD,MAAA,CAEJ,MAAMI,EAAK,IAAI,UAAU,GAAG,OAAO,SAAS,WAAa,SAAW,MAAQ,IAAI,MAAM,OAAO,SAAS,IAAI,uCAAuC,EAC9IA,EAAA,UAAY,SAASC,EAAK,CACzB,MAAMC,EAAM,KAAK,MAAMD,EAAI,IAAI,EAC5BC,EAAI,UACHR,EAAkBQ,EAAI,QAAQ,EAC9BN,EAAoB,wBAAwB,GACtCM,EAAI,UACVR,EAAkB,CAAC,EACnBE,EAAoB,2BAA2B,EAC/CC,EAAY,kBAAkB,CAAE,SAAU,CAAC,iBAAiB,EAAG,GACzDK,EAAI,QACVR,EAAkB,CAAC,EACCE,EAAA,2BAA6BM,EAAI,KAAK,IAE3DA,EAAI,UAAYA,EAAI,QACnBF,EAAG,MAAM,CAEjB,CAAA,CAGJ,cAAQ,MACJ,CAAA,SAAA,CAAC3B,EAAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAMiB,EAAa,EAAI,SAA0B,yBAAA,CAAA,EACxGJ,SAAoB,MACjB,CAAA,SAAA,CAAAtB,EAAAA,IAAC,OAAK,SAAiBsB,CAAA,CAAA,EACtBF,GAAkB,KAAapB,EAAA,IAAA8B,GAAA,CAAY,IAAKV,EAAgB,IAAK,EAAG,EAAiB,IAAA,CAAA,CAC9F,EAAS,IAAA,EACb,CACJ,CAYA,SAASW,GAAc,CAAC,UAAAnG,GAErB,OACC,MAAMoG,EAAaC,GAAwB,CACvC,SAAU,CAAC,iBAAiB,EAC5B,QAAS,gBAAiB,CAChB,MAAArF,EAAM,MAAM,MAAM,gCAAgC,EACrD,GAAAA,EAAI,QAAU,IACb,MAAO,CAAC,EACZ,GAAYA,EAAI,GAGL,OAAA,MAAMA,EAAI,KAAK,EAFtB,MAAM,IAAI,MAAM,kCAAkCA,EAAI,UAAU,EAAE,CAGtE,CACJ,CACH,EAEK,CAACsF,EAAeC,CAAgB,EAAIxD,EAAAA,SAAwB,IAAI,EAChE,CAACyD,EAAgBC,CAAiB,EAAI1D,EAAAA,SAAiB,IAAI,EAC3D,CAAC2D,EAAiBC,CAAkB,EAAI5D,EAAAA,SAAmC,CAAA,CAAE,EAE7E6D,GAAYC,EAAAT,EAAW,OAAX,YAAAS,EAAiB,KAAUlD,GAAAA,EAAE,KAAO2C,GAEtD,cAAQ,WACJ,CAAA,SAAA,CAAAlC,EAAA,IAAC,UAAQ,SAAU,SAAA,CAAA,EACnBG,EAAAA,KAACuC,GAAM,CAAA,QAAS,UACX,SAAA,CAAA,4CAAuC,KAAE,EAAA,EACzC,mDAA8C,KAAE,EAAA,EAChD,uHAAkH,KAAE,EAAA,EACpH,6MAAA,EACL,EACCV,EAAW,MAAQA,EAAW,KAAK,OAAS,EAAK7B,EAAA,KAAAY,EAAK,QAAL,CAAa,GAAG,SAAS,OAAM,GAAC,MAAO,CAAC,MAAO,MAAM,EAAG,UAAW,OAAQ,MAAOmB,GAAiB,OAAW,SAAW7B,GAAM8B,EAAiB9B,EAAE,OAAO,KAAK,EAC5M,SAAA,CAACL,MAAA,SAAA,CAAO,MAAM,GAAI,SAAkB,kBAAA,EACnCgC,EAAW,KAAK,IAAKW,GAAO3C,EAAAA,IAAA,SAAA,CAAmB,MAAO2C,EAAE,IAAM,SAAAA,EAAE,IAAxB,EAAAA,EAAE,GAA2B,CAAS,CACnF,CAAA,CAAA,EAAmBX,EAAW,KAAOhC,EAAAA,IAAC,QAAK,UAAW,OAAS,sCAA6B,EAAU,KACrGG,EAAA,KAAAY,EAAK,MAAL,CAAW,UAAW,OACnB,SAAA,CAACf,EAAA,IAAAe,EAAK,MAAL,CAAY,SAAa,aAAA,EAC1BZ,EAAAA,KAACY,EAAK,QAAL,CAAa,GAAG,SAAS,OAAM,GAAC,MAAO,CAAC,MAAO,MAAM,EAAG,UAAW,OAAQ,MAAOqB,EAAgB,SAAW/B,GAAMgC,EAAkBhC,EAAE,OAAO,KAAK,EAAG,SAAU,CAAC6B,EAC7J,SAAA,EAAAM,GAAA,YAAAA,EAAW,gBAAgB,IAAKG,SAAO,SAAsB,CAAA,MAAOA,EAAE,OAAS,SAAI,IAAA,KAAK,aAAa,SAAS,gBAAgB,KAAM,CACjI,KAAM,UAAA,CACT,EAAE,GAAGA,EAAE,MAAM,CAAA,EAFsCA,EAAE,MAEtC,KAAe3C,EAAA,IAAA,SAAA,CAAQ,SAAsB,qBAAA,CAAA,EAC5DA,EAAA,IAAA,SAAA,CAAO,MAAO,KAAO,SAAU,SAAA,CAAA,CAAA,EACpC,EACCoC,GAAkB,MAAQF,EAAiBlC,EAAA,IAAAS,EAAA,CAAO,QAAU6B,EAAgBJ,CAAa,EAAgB,YAAZ,UAAyB,UAAW,OAAQ,QAAS,IAAMU,GAAiB,CACtK,MAAO,wBACP,KAAM,kDACN,WAAaC,GAAoB,CAC1BA,GACoBN,EAAAO,IAAQ,CAAC,GAAGA,EAAK,CAACZ,CAAa,EAAGW,GAAM,CAEnE,EACA,OAAQ,CACJ,MAAO,WACP,MAAO,oCAAA,CACX,CACH,EAAI,SAAAP,EAAgBJ,CAAa,EAAI,UAAY,SAAS,EAAY,IAAA,EAC3E,QACCzB,EAAO,CAAA,UAAW,YAAa,QAAS,UAAW,QAAS,WAAM,OAAAzD,GAAUpB,EAAW4G,EAAW,KAAMJ,GAAkB,KAAOE,EAAgBJ,CAAc,EAAE,aAAaO,EAAAD,EAAW,gBAAgB,QAAUO,EAAE,QAAUX,CAAc,IAA/D,YAAAK,EAAkE,OAAQ,EAAE,GAAG,SAAU,CAACP,GAAkBE,GAAkB,MAAQ,CAACE,EAAgBJ,CAAa,EAAK,SAAc,cAAA,EACrWlC,EAAA,IAAAS,EAAA,CAAO,UAAW,YAAa,QAAS,UAAW,QAAS,IAAMtD,GAAUvB,CAAS,EAAG,SAAU,CAACsG,EAAgB,SAAe,eAAA,QAClIf,GAAa,CAAA,CAAA,CAAA,EAClB,CACJ,CAEwB,SAAA6B,GAAY,CAAC,UAAApH,EAAW,YAAAwC,EAAa,WAAAC,EAAY,iBAAAC,EAAkB,SAAA2E,EAAU,qBAAA1E,EAAsB,WAAA2E,EAAY,UAAA1E,GASpI,CACC,KAAM,CAACzB,EAASoG,CAAU,EAAIxE,EAAAA,SAAS,EAAE,EACnC,CAACyE,EAAYC,CAAa,EAAI1E,EAAAA,SAAS,EAAK,EAC5C,CAAC2E,EAAgBC,CAAiB,EAAI5E,EAAAA,SAAS,EAAK,EAE1DW,OAAAA,EAAAA,UAAU,IAAM,CACN,MAAAkE,EAAK,SAAS,cAAc,KAAK,EACvCA,EAAG,UAAYzG,EACf,IAAIqG,EAAa,GACjBA,OAAAA,MAAeI,EAAG,YAAcA,EAAG,YAAY,OAAS,EAAI,IAC5DJ,MAAeI,EAAG,qBAAqB,KAAK,EAAE,OAAS,GACvDJ,MAAeI,EAAG,qBAAqB,OAAO,EAAE,OAAS,GACzDJ,MAAeI,EAAG,qBAAqB,QAAQ,EAAE,OAAS,GAC1DH,EAAcD,CAAU,EACjB,IAAMI,EAAG,OAAO,CAAA,EACxB,CAACzG,CAAO,CAAC,SAEJ,MACJ,CAAA,SAAA,CAAAoD,OAAC,WACG,CAAA,SAAA,CAAAH,EAAA,IAAC,UAAQ,SAAuB,sBAAA,CAAA,EAC/BA,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAMnE,GAAcV,EAAWqH,CAAQ,EAAI,SAAkB,kBAAA,EACpHjD,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAM9E,GAAaC,EAAWqH,CAAQ,EAAI,SAAiB,iBAAA,EAClHjD,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAMpE,GAAST,EAAWqH,CAAQ,EAAI,SAAsB,sBAAA,EACnHjD,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAM/D,GAAgBd,EAAWqH,CAAQ,EAAI,SAAqB,qBAAA,EACzHjD,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAMlE,GAAmBX,EAAWqH,CAAQ,EAAI,SAA0B,yBAAA,CAAA,CAAA,EACtI,SACC,WACG,CAAA,SAAA,CAAAjD,EAAA,IAAC,UAAQ,SAAgB,eAAA,CAAA,EAEtBzB,GAAwB2E,EAAclD,MAACS,GAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAM1E,GAAYH,EAAW6H,GAAa,UAAWR,CAAQ,EAAI,SAAaC,EAAA,gCAAkC,uCAAuC,EAAY,KAClQ3E,GAAwB2E,EAAc,KAAOlD,EAAAA,IAACS,GAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAM1E,GAAYH,EAAW6H,GAAa,KAAMR,CAAQ,EAAK,SAAwB1E,GAAA2E,EAAc,uBAAyB,eAAgB,CAAA,QAClPzC,EAAO,CAAA,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAMvE,GAAsBN,EAAWqH,CAAQ,EAAG,SAAU,CAAC,CAACA,EAAW,SAA2B,0BAAA,CAAA,CAAA,EAChK,SACC,WACG,CAAA,SAAA,CAAAjD,EAAA,IAAC,UAAQ,SAAkB,iBAAA,CAAA,EAC1BA,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAMtE,GAAUP,EAAWqH,CAAQ,EAAI,SAAwB,wBAAA,EACtHjD,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAMjE,GAAUZ,EAAWqH,CAAQ,EAAI,SAAqB,qBAAA,EACnHjD,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAMhE,GAAUb,EAAWqH,CAAQ,EAAI,SAA6B,6BAAA,EAC3HjD,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAM9D,GAAkBf,EAAWqH,CAAQ,EAAI,SAA4B,4BAAA,EAClIjD,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,IAAMrE,GAAqBR,EAAWqH,CAAQ,EAAI,SAA0B,yBAAA,CAAA,CAAA,EACxI,SACC,WACG,CAAA,SAAA,CAAAjD,EAAA,IAAC,UAAQ,SAAW,UAAA,CAAA,EACnBsD,EAAiBtD,EAAA,IAAC,WAAS,CAAA,UAAW,gBAAiB,SAAWK,GAAM8C,EAAY9C,EAAE,OAA+B,KAAK,EACtH,UACL,CAAA,EAAcL,EAAA,IAAC0D,GAAA,CAAW,UAAU,mCAAmC,MAAM,OAAO,MAAO3G,EAC/E,QAAS,CAAC,QAAS,CACX,CAAC,CAAE,MAAS,IAAM,SAAU,YAAa,QAAQ,EACjD,CAAC,CAAC,KAAQ,SAAA,EAAY,CAAC,KAAQ,SAAS,EACxC,CAAC,OAAO,EACR,CAAC,OAAO,CAAA,CACX,EACL,SAAW4G,GAAY,CACnBR,EAAWQ,CAAO,CAAA,CACtB,CAAG,QACdlD,EAAO,CAAA,UAAW,cAAe,QAAS,QAAS,QAAS,IAAM8C,EAAmBK,GAAQ,CAACA,CAAG,EAC7F,SAAAN,EAAiB,gBAAkB,YACxC,QAAU,KAAE,EAAA,QACX7C,EAAO,CAAA,UAAW,OAAQ,QAAS,UAAW,SAAU,CAAC2C,EAAY,QAAS,IAAMtG,GAAYlB,EAAWmB,EAASkG,CAAQ,EAAI,SAAgB,eAAA,CAAA,CAAA,EACrJ,EACAjD,MAAC+B,IAAc,UAAAnG,EAAsB,SACpC,WACG,CAAA,SAAA,CAAAoE,EAAA,IAAC,UAAQ,SAAsB,qBAAA,CAAA,QAC9B7B,GAAc,CAAA,UAAAvC,EAAsB,YAAAwC,EAA0B,WAAAC,EAAwB,iBAAAC,EAAoC,qBAAAC,EAA4C,UAAAC,CAAsB,CAAA,CAAA,CACjM,CAAA,CAAA,EACJ,CACJ,CChXA,SAAwBqF,GAAS,CAAC,SAAAC,EAAU,UAAAlI,EAAW,OAAAmI,EAAQ,WAAAC,EAAY,SAAAC,EAAU,WAAAC,EAAY,YAAAC,EACrE,WAAAC,EAAY,YAAAC,EAAa,WAAAC,EAAY,YAAAC,EAAa,eAAAC,EAClD,kBAAAC,EAAmB,qBAAAlG,EAAsB,QAAAmG,EAAS,kBAAAC,CAAiB,EAiB5F,CACC,MAAMC,EAAaC,EAAAA,YAAY,MAAOnH,EAAaC,IAAe,CACxD,MAAAP,GAAUxB,EAAW8B,EAAKC,CAAK,CACzC,EAAG,EAAE,EACCmH,EAAWZ,IAAe,OAC1B,CAACa,EAAwBC,CAAyB,EAAIrG,EAAAA,SAAS,EAAE,EACjE,CAACsG,EAAiBC,CAAkB,EAAIvG,EAAAA,SAAS,EAAE,EACnDwG,EAASC,EAAAA,MAAM,EAEfC,EAAqBlB,IAAeA,GAAA,YAAAA,EAAa,SAAU,WAAYA,GAAA,YAAAA,EAAa,SAAU,YAExFI,EAAY,EA+BlB,MAAAe,EAAW,cAAc,WAAW,gBACpCC,EAAe,cAAc,gBAAgB,gBAC7CC,EAAuBC,EAAY,EAEnCC,EAAqBb,EAAAA,YAAY,MAAOjJ,EAAmB+J,IAAkB,CAE5E,GAAAhB,EAAoB,GAAKgB,EAAM,CAChB9I,EAAA,CACV,MAAO,uBACP,KAAM,cAAc8H,CAAiB,oEAAA,CACxC,EACD,MAAA,CAEE,MAAA/G,GAAYhC,EAAW+J,CAAI,CAAA,EAClC,CAAChB,CAAiB,CAAC,EAEhBiB,EAAuBf,cAAY,MAAOjJ,GAAsB,CAElE,GAAG+I,EAAoB,EAAG,CACR9H,EAAA,CACV,MAAO,uBACP,KAAM,cAAc8H,CAAiB,+EAAA,CACxC,EACD,MAAA,CAEJ,MAAM5G,GAAiBnC,CAAS,CAAA,EACjC,CAAC+I,CAAiB,CAAC,EAEtB,cAAQ,MACH,CAAA,SAAA,CAAAX,SAAc,WACX,CAAA,SAAA,CAAAhE,EAAA,IAAC,UAAQ,SAAkB,iBAAA,CAAA,EAC1B,+HAA0H,SAAO,CAAA,UAAW,eAAgB,QAASiE,EAAW,SAAuB,sBAAA,CAAA,CAAA,CAAA,CAC5M,EAAc,YACb,WACG,CAAA,SAAA,CAAAjE,EAAA,IAAC,UAAQ,SAAyB,wBAAA,CAAA,EAClCA,EAAAA,IAACS,GAAO,UAAW,OAAQ,QAASuD,GAAcqB,EAAqB,QAAU,UAAW,SAAUrB,GAAcqB,EAAoB,QAAS,IAAMK,EAAmB9J,EAAW,CAACkJ,CAAQ,EAAI,SAAWA,EAAA,kBAAoB,kBAAmB,CAAA,EACpP9E,EAAAA,IAACS,EAAO,CAAA,UAAW,OAAQ,QAASuD,GAAcqB,EAAqB,QAAU,UAAW,SAAUrB,GAAcqB,GAAsBnB,IAAe,WAAY,MAAOA,IAAe,OAAS,8CAAgD,OAAW,QAAS,IAAMpG,GAAelC,CAAS,EAAI,SAAoB,mBAAA,CAAA,EAC9ToE,EAAAA,IAACS,EAAO,CAAA,UAAW,OAAQ,QAASuD,GAAcqB,EAAqB,QAAU,UAAW,SAAUrB,GAAcqB,GAAsBnB,IAAe,QAAS,MAAOA,IAAe,OAAS,gDAAkD,OAAW,QAAS,IAAM0B,EAAqBhK,CAAS,EAAI,SAAsB,qBAAA,CAAA,CAAA,EACzU,SACC,WACG,CAAA,SAAA,CAAAoE,EAAA,IAAC,UAAQ,SAAmB,kBAAA,CAAA,EAK3BA,MAAC,OAAI,wBAAyB,CAAC,OAAQ,6GAA6GuF,CAAY,IAAI,EACpKvF,MAAC,OAAI,wBAAyB,CAAC,OAAQ,kCAAkCsF,CAAQ,0HAA2H,CAAA,CAAA,EAEjN,SACC,WACG,CAAA,SAAA,CAAAtF,EAAA,IAAC,UAAQ,SAAgB,eAAA,CAAA,EACzBA,EAAA,IAACe,EAAK,MAAL,CACG,KAAM,WACN,MAAO,oBACP,QAAS+C,EAAS,aAAe,GACjC,SAAUE,EACV,SAAe3D,GAAAuE,EAAW,cAAevE,EAAE,OAAO,OAAO,EACzD,GAAIoF,EAAY,CAAA,CACpB,EACAzF,EAAA,IAACe,EAAK,MAAL,CACG,KAAM,WACN,MAAO,kDACP,QAAS+C,EAAS,mBAAqB,GACvC,SAAezD,GAAAuE,EAAW,oBAAqBvE,EAAE,OAAO,OAAO,EAC/D,GAAIoF,EAAY,CAAA,CACpB,EACAzF,EAAA,IAACe,EAAK,MAAL,CACG,KAAM,WACN,MAAUZ,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAA,kCAAkC,IAAEJ,EAAA,IAAA,IAAA,CAAE,UAAW,wBAAyB,MAAO,2CAA4C,CAAA,CAAA,EAAE,EACzI,QAAS8D,EAAS,WAAa,GAC/B,SAAezD,GAAAuE,EAAW,YAAavE,EAAE,OAAO,OAAO,EACvD,GAAIoF,EAAY,CAAA,CACpB,EACAzF,EAAA,IAACe,EAAK,MAAL,CACG,KAAM,WACN,MAAO,gCACP,QAAS+C,EAAS,eAClB,SAAUE,EACV,SAAe3D,GAAAuE,EAAW,iBAAkBvE,EAAE,OAAO,OAAO,EAC5D,GAAIoF,EAAY,CAAA,CAAA,CACpB,EACJ,SACC,WACG,CAAA,SAAA,CAAAzF,EAAA,IAAC,UAAQ,SAA2B,0BAAA,CAAA,EACpCA,EAAA,IAACe,EAAK,MAAL,CACG,KAAM,WACN,MAAO,gCACP,QAAS+C,EAAS,aAAe,GACjC,SAAezD,GAAAuE,EAAW,cAAevE,EAAE,OAAO,OAAO,EACzD,GAAIoF,EAAY,CAAA,CACpB,EACC,wBACDtF,EAAA,KAAC,SAAA,CAAO,MAAO2D,EAAS,iBAAmB,WACvC,SAAezD,GAAAuE,EAAW,kBAAmBvE,EAAE,OAAO,KAAK,EAC3D,SAAA,CAACL,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAQ,WAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAG,MAAA,EACtBA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAS,WAAA,CAAA,CAAA,CAAA,CAAA,CAClC,EACJ,EACE+D,SAAU,WACR,CAAA,SAAA,CAAA/D,EAAA,IAAC,UAAQ,SAA+B,8BAAA,CAAA,EACxCA,EAAA,IAACe,EAAK,MAAL,CACG,KAAM,WACN,MAAO,uDACP,QAAS+C,EAAS,iBAClB,SAAezD,GAAAuE,EAAW,mBAAoBvE,EAAE,OAAO,OAAO,EAC9D,GAAImF,CAAA,CAAA,CACR,CAAA,CACJ,EAAc,YACb,WACG,CAAA,SAAA,CAAAxF,EAAA,IAAC,UAAQ,SAAiB,gBAAA,CAAA,EACzB,gBACDA,EAAA,IAAC,IAAA,CAAE,UAAU,yBACV,MAAO,+KAAA,CAAiL,EAC3LG,EAAA,KAAC,SAAA,CAAO,MAAO2D,EAAS,UAChB,SAAWzD,GAAMuE,EAAW,YAAavE,EAAE,OAAO,KAAK,EAC3D,SAAA,CAACL,MAAA,SAAA,CAAO,MAAM,KAAM,SAAc,cAAA,EACjCA,MAAA,SAAA,CAAO,MAAM,KAAM,SAAc,cAAA,EACjCA,MAAA,SAAA,CAAO,MAAM,KAAM,SAAY,YAAA,EAC/BA,EAAA,IAAA,SAAA,CAAO,MAAM,MAAO,SAAa,YAAA,CAAA,CAAA,CAAA,CACtC,QAAU,KAAE,EAAA,EAAE,yBACSoE,EAAW,aAAe,EAAI,IAAI,KAAKA,EAAW,YAAY,EAAE,mBAAA,EAAuB,aAAQ,KAAE,EAAA,EACvHpE,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,SAAYuE,EAA0B,MAAMhH,GAASpC,CAAS,CAAC,EAAI,SAAyB,yBAAA,EAAS,IAACoE,EAAAA,IAAC,QAAM,SAAuB+E,CAAA,CAAA,QAAQ,KAAE,EAAA,EACrM/E,EAAA,IAAAS,EAAA,CAAO,UAAW,OAAQ,QAAS,UAAW,QAAS,SAAYyE,EAAmB,MAAMjH,GAAQrC,CAAS,CAAC,EAAI,SAAY,YAAA,EAAS,IAACoE,EAAAA,IAAC,QAAM,SAAgBiF,CAAA,CAAA,CAAA,EACpK,EACCnB,EAAS,sBAAwB3D,EAAAA,KAAC,WAC/B,CAAA,SAAA,CAAAH,EAAA,IAAC,UAAQ,SAAmC,kCAAA,CAAA,EAC3CG,EAAA,KAAA,QAAA,CAAM,QAAS,GAAGgF,CAAM,gBAAkB,SAAA,CAAA,iBAAiB,GAAA,EAAM,EAClEhF,EAAA,KAAC,SAAA,CAAO,MAAO2D,EAAS,oBAAqB,GAAI,GAAGqB,CAAM,gBAAiB,SAAUnB,GAAcE,GAAc,SAAW,CAAC,CAACM,EACtH,SAAenE,GAAA,CACAuE,EAAA,sBAAuBvE,EAAE,OAAO,KAAK,EAC5CyD,EAAS,uBAAyB,GAAKzD,EAAE,OAAO,QAAU,sBAC1DuE,EAAW,wBAAyB,CAAC,CAE7C,EACJ,SAAA,CAAC5E,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAS,YAAA,EACzBA,EAAA,IAAA,SAAA,CAAO,MAAM,qBAAqB,SAAkB,qBAAA,EACpDA,EAAA,IAAA,SAAA,CAAO,MAAM,iCAAiC,SAA0C,6CAAA,EACxFA,EAAA,IAAA,SAAA,CAAO,MAAM,qBAAqB,SAAkB,oBAAA,CAAA,CAAA,CAAA,CACzD,QAAU,KAAE,EAAA,EACXG,EAAA,KAAA,QAAA,CAAM,QAAS,GAAGgF,CAAM,kBAAoB,SAAA,CAAA,mBAAmB,GAAA,EAAM,EACtEhF,EAAA,KAAC,SAAA,CAAO,MAAO2D,EAAS,sBAAuB,GAAI,GAAGqB,CAAM,kBAAmB,SAAUnB,GAAcE,GAAc,SAAW,CAAC,CAACM,EAC1H,SAAenE,GAAAuE,EAAW,wBAAyBvE,EAAE,OAAO,KAAK,EACrE,SAAA,CAACL,EAAA,IAAA,SAAA,CAAO,MAAM,IAAI,SAAS,YAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,IAAI,SAAC,IAAA,EAClBA,EAAA,IAAA,SAAA,CAAO,MAAM,IAAI,SAAC,IAAA,EACnBA,EAAAA,IAAC,UAAO,MAAM,IAAI,SAAU8D,EAAS,qBAAuB,qBAAsB,SAAC,GAAA,CAAA,EAClF9D,EAAA,IAAA,SAAA,CAAO,MAAM,IAAI,SAAC,GAAA,CAAA,CAAA,CAAA,CACvB,QAAU,KAAE,EAAA,EACXG,EAAA,KAAA,QAAA,CAAM,QAAS,GAAGgF,CAAM,sBAAwB,SAAA,CAAA,uBAAuB,GAAA,EAAM,EAC9EhF,EAAA,KAAC,SAAA,CAAO,MAAO,GAAG2D,EAAS,wBAAwB,IAAIA,EAAS,oBAAoB,GAAI,GAAI,GAAGqB,CAAM,sBAAuB,SAAUnB,GAAcE,GAAc,SAAW,CAAC,CAACM,EACvK,SAAenE,GAAA,CACX,MAAMwF,EAAQxF,EAAE,OAAO,MAAM,MAAM,GAAG,EAC3BuE,EAAA,2BAA4BiB,EAAM,CAAC,CAAC,EACpCjB,EAAA,uBAAwBiB,EAAM,CAAC,CAAC,CAC/C,EACJ,SAAA,CAAC7F,EAAA,IAAA,SAAA,CAAO,MAAM,KAAK,SAAS,YAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAC,IAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAgB,mBAAA,EACtCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAC,GAAA,CAAA,CAAA,CAAA,CAAA,CAC7B,CAAA,CACJ,EAAc,YACb,WACG,CAAA,SAAA,CAAAA,EAAA,IAAC,UAAQ,SAAe,cAAA,CAAA,EACxBA,EAAA,IAACS,EAAO,CAAA,UAAW,YAAa,QAAS,SAAU,QAAS,IAAM6D,EAAA,EAAc,SAAWJ,IAAe,SAAW,CAACM,GAAmBR,GAAeE,IAAe,SAAWQ,EAAQ,KAAKoB,GAAKA,EAAE,QAAU,WAAW,EAAK,SAAuBvH,EAAA,yBAA2B,4BAA4B,EAC7SkG,GAAqBzE,EAAAA,IAAAS,EAAA,CAAO,UAAW,YAAa,QAAS,UAAW,QAASgE,EAAoB,SAAA,uBAAwB,CAAA,CAAY,CAC9I,CAAA,CAAA,EACJ,CACJ,CC5OA,MAAMsB,GAAc,CAChB,UAAW,OACX,QAAS,OACb,EAGMC,GAAY3K,GAAqC2E,MAACS,GAAO,KAAM,KAAO,GAAGpF,EAAM,EAE9E,SAAS4K,GAA4BC,EAA4E,CACpH,MAAO,WAAYA,CACvB,CAEA,SAAwBC,GAAS,CAAC,QAAAzB,EAAS,YAAA0B,EAAa,SAAAC,EAAU,UAAAC,EAAW,UAAAC,EAAW,YAAAC,EAAa,UAAAC,EAAW,YAAAC,EAC5G,SAAA5B,EAAU,UAAAlJ,EAAW,WAAAyC,EAAY,YAAAsI,EAAa,eAAAC,EAAgB,mBAAAvB,CAAkB,EAejF,CACC,KAAM,CAACwB,EAAwBC,CAAyB,EAAInI,EAAAA,SAAS,EAAK,EACvE,GAAA+F,EAAQ,OAAS,GAAKA,EAAQ,CAAC,EAAE,OAAS,SAAW,CAACiC,EAC9C,OAAAxG,EAAA,KAAC,MAAI,CAAA,UAAW,aAClB,SAAA,CAAA,+CAA0C,KAAE,EAAA,QAC5C,IAAE,CAAA,OAAO,SAAS,KAAK,+BAAgC,SAAqB,oBAAA,CAAA,CAAA,EACjF,EAED,GAAAuE,EAAQ,OAAS,GAAKA,EAAQ,CAAC,EAAE,OAAS,YAAc,CAACkC,EACjD,OAAAzG,EAAA,KAAC,MAAI,CAAA,UAAW,aAClB,SAAA,CAAA,0CAAqC,KAAE,EAAA,QACvC,IAAE,CAAA,OAAO,SAAS,KAAK,kCAAmC,SAAqB,oBAAA,CAAA,CAAA,EACpF,EAEE,MAAA4G,EAAQ,CAACrC,EAAQ,KAAKoB,GAAKA,EAAE,KAAK,cAAgBA,EAAE,IAAI,YAAY,EACpEkB,EAAYtC,EAAQ,KAAUoB,UAAA,OAAArD,EAAAqD,EAAE,oBAAF,YAAArD,EAAqB,MAAK,EAC9D,OACItC,EAAA,KAAAC,WAAA,CAAA,SAAA,CAACD,EAAAA,KAAA,QAAA,CAAM,UAAW,WACd,SAAA,CAACH,EAAA,IAAA,QAAA,CACG,gBAAC,KACG,CAAA,SAAA,CAAAA,EAAAA,IAAC,MAAG,SAAK,OAAA,CAAA,EACRgH,EAAYhH,EAAA,IAAC,KAAG,CAAA,SAAA,OAAK,CAAA,EAAQ,KAC9BA,EAAAA,IAAC,MAAG,SAAK,OAAA,CAAA,EACTA,EAAAA,IAAC,MAAG,SAAK,OAAA,CAAA,EACTA,EAAAA,IAAC,MAAG,SAAS,WAAA,CAAA,EACZgH,EAAYhH,EAAA,IAAC,KAAG,CAAA,SAAA,KAAG,CAAA,EAAQ,KAC5BA,EAAAA,IAAC,MAAG,SAAK,OAAA,CAAA,EACTA,EAAAA,IAAC,MAAG,SAAK,OAAA,CAAA,EACRA,EAAA,IAAA,KAAA,CAAG,OAAQ+G,EAAO,SAAK,QAAA,EACxB/G,EAAAA,IAAC,MAAG,SAAM,QAAA,CAAA,EACVA,EAAAA,IAAC,MAAG,SAAM,QAAA,CAAA,EACTA,EAAA,IAAA,KAAA,CAAG,OAAQ+G,EAAO,SAAM,SAAA,EACxBC,EAAYhH,EAAA,IAAC,KAAG,CAAA,SAAA,MAAI,CAAA,EAAQ,KAC7BA,EAAAA,IAAC,MAAG,SAAU,YAAA,CAAA,QACb,KAAE,EAAA,QACF,KAAE,EAAA,QACF,KAAE,EAAA,QACF,KAAE,CAAA,CAAA,CAAA,CAAA,CACP,CACJ,CAAA,EACCA,EAAA,IAAA,QAAA,CACA,SAAS0E,GAAA,YAAAA,EAAA,IAASoB,GAAA,OACf,MAAMmB,EAAWnB,EAAE,OAAS,SAAW,CAACpB,EAAQ,OAAOwC,GAAMA,EAAG,OAAS,WAAW,EAAE,QAAW,WAAA,OAAAA,EAAG,oBAC9FjB,GAA4BiB,EAAG,kBAAkB,GAAG,GAAKA,EAAG,kBAAkB,IAAI,UAAUzE,EAAAqD,EAAE,oBAAF,YAAArD,EAAqB,SAC9GwD,GAA4BiB,EAAG,kBAAkB,IAAI,GAAKA,EAAG,kBAAkB,KAAK,UAAUC,EAAArB,EAAE,oBAAF,YAAAqB,EAAqB,UAGnHrB,EAAE,mBAAqBA,EAAE,kBAAkB,UAAUsB,EAAAF,EAAG,oBAAH,YAAAE,EAAsB,SAAUF,EAAG,OAASpB,EAAE,QAAUoB,EAAG,OAASpB,EAAE,kBAAkB,aAAa,EAC7JpG,EAAS,GACP,CAAC,GAAK,EAAE,SAAW,EAAU,GACzB,EAAE,OAAO,CAAC,GAAK,KAAO,EAAE,OAAO,CAAC,GAAK,IAAO,IAAM,EAAI,EAElE,cAAQ,KACJ,CAAA,SAAA,CAACM,EAAAA,IAAA,KAAA,CAAI,WAAE,IAAK,CAAA,EACXgH,EAAahH,EAAAA,IAAA,KAAA,CAAI,UAAEyC,EAAAqD,EAAA,oBAAA,YAAArD,EAAmB,KAAM,CAAA,EAAQ,KACrDzC,EAAAA,IAAC,KAAI,CAAA,SAAA8F,EAAE,KAAM,CAAA,QACZ,KAAI,CAAA,SAAAA,EAAE,QAAU,SAAW,YAAcA,EAAE,MAAM,EAClD9F,EAAAA,IAAC,MAAI,SAAK,KAAA,IAAI,EAAG8F,EAAE,UAAY,CAAC,EAAE,EACjCkB,EAAahH,EAAAA,IAAA,KAAA,CAAI,WAAM8F,EAAE,OAAO,CAAE,CAAA,EAAQ,KAC1C9F,EAAA,IAAA,KAAA,CAAI,SAAE8F,EAAA,IAAI,aAAa,EACvB9F,EAAA,IAAA,KAAA,CAAI,SAAE8F,EAAA,IAAI,aAAa,QACvB,KAAG,CAAA,OAAQiB,EAAQ,SAAAjB,EAAE,IAAI,aAAa,EACtC9F,EAAA,IAAA,KAAA,CAAI,SAAE8F,EAAA,KAAK,aAAa,EACxB9F,EAAA,IAAA,KAAA,CAAI,SAAE8F,EAAA,KAAK,aAAa,QACxB,KAAG,CAAA,OAAQiB,EAAQ,SAAAjB,EAAE,KAAK,aAAa,EACvCkB,EAAahH,EAAAA,IAAA,KAAA,CAAI,WAAM8F,EAAE,QAAQ,CAAE,CAAA,EAAQ,KAC5C9F,EAAAA,IAAC,MAAI,SAAK,KAAA,IAAI,EAAG8F,EAAE,WAAa,CAAC,EAAE,EAClCmB,IAAanB,EAAE,QAAU,YAAcA,EAAE,QAAU,eAAiBA,EAAE,OAAS,EAC5E3F,EAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAAAJ,EAAAA,IAAC,MAAG,SAACA,MAAAgG,GAAA,CAAS,GAAI,0BAA0BF,EAAE,OAAS,GAAGC,GAAa,QAAS,IAAMO,EAAUR,EAAE,MAAM,EAAG,SAAUO,EAAW,iBAAQ,CAAW,CAAA,QAClJ,KAAG,CAAA,SAAArG,MAACgG,IAAS,GAAI,iCAAiCF,EAAE,OAAS,GAAGC,GAAa,QAAS,IAAMQ,EAAUT,EAAE,MAAM,EAAG,SAAUO,EAAW,wBAAgB,CAAA,CAAW,CAAA,CAAA,CAAA,CACtK,EAAK,KACJP,EAAE,QAAU,aAAeA,EAAE,QAAU,YAAe9F,EAAAA,IAAA,KAAA,CAAI,SAAWiH,EAAAjH,EAAAA,IAACgG,GAAU,CAAA,GAAGD,GAAa,QAAS,IAAMW,EAAYZ,EAAE,MAAM,EAAG,SAAUO,EAAW,SAAA,SAAA,CAAU,EAAc,EAAA,CAAG,EAAQ,KAC9LP,EAAE,QAAU,aAAeM,EAAepG,EAAA,IAAA,KAAA,CAAG,eAACgG,GAAU,CAAA,GAAGD,GAAa,QAAS,IAAMS,EAAYV,EAAE,MAAM,EAAI,SAAA,SAAA,CAAU,CAAW,CAAA,EAAQ,KAC5IA,EAAE,QAAU,kBAAe,KAAG,CAAA,SAAA9F,MAACgG,IAAU,GAAGD,GAAa,QAAS,IAAMU,EAAUX,EAAE,MAAM,EAAG,SAAUT,EAAqB,SAAA,QAAQ,EAAW,EAAQ,KACvJ4B,IAAanB,EAAE,QAAU,aAAeA,EAAE,QAAU,aAAgB9F,EAAA,IAAA,KAAA,CAAG,SAACA,EAAAA,IAAAgG,GAAA,CAAU,GAAGD,GAAa,QAAS,IAAMQ,EAAUT,EAAE,MAAM,EAAI,SAAAM,GAAeN,EAAE,QAAU,YAAc,QAAU,eAAgB,CAAA,CAAW,CAAA,EAAQ,KAC7NA,EAAE,QAAU,SAAY9F,MAAA,KAAA,CAAG,eAACgG,GAAU,CAAA,GAAGD,GAAa,QAAS,IAAMQ,EAAUT,EAAE,MAAM,EAAI,SAAA,OAAA,CAAQ,CAAW,CAAA,EAAQ,KAEvH9F,EAAAA,IAAC,KAAG,CAAA,QAAS,CAAE,CAAA,CAAA,CAAA,EAzBH8F,EAAE,MA0BlB,CAAA,EAEJ,CAAA,CAAA,EACJ,EACChB,EACG3E,EAAA,KAAAC,WAAA,CAAA,SAAA,CAACD,EAAAA,KAAA,MAAA,CAAI,UAAW,aACX,SAAA,CAAA,0DAA0D,IAACH,EAAAA,IAACS,GAAO,QAAS,UAAW,QAAS,IAAMqG,EAA0B,EAAI,EAAI,SAAkB,iBAAA,CAAA,QAAU,KAAE,EAAA,EACtK,0CAAA,EACL,EACA9G,EAAAA,IAACqH,GAAgB,CAAA,UAAAzL,EAAsB,MAAO,IAAMkL,EAA0B,EAAK,EAAG,QAASD,EAAwB,WAAAxI,CAAwB,CAAA,CAAA,CAAA,CACnJ,EAAK,IAAA,EACT,CACJ,CCtHA,SAAwBiJ,GAAmB,CAAC,QAAAC,EAAS,MAAAC,EAAO,UAAA5L,EAAW,MAAA6L,EAAO,mBAAAC,GAE3E,CACC,KAAM,CAACC,EAASC,CAAU,EAAIjJ,EAAAA,SAAmB,CAAA,CAAE,EAC7C,CAACkJ,EAAgBC,CAAiB,EAAInJ,EAAAA,SAAS,EAAE,EACjD,CAACoJ,EAAWC,CAAY,EAAIrJ,WAA2B,EA2B7D,GAzBAW,EAAAA,UAAU,IAAM,EACX,SAAY,CACN,GAAA,CAACiI,GAAW,CAACE,EAAO,CACnBK,EAAkB,EAAE,EACpB,MAAA,CAEJ,MAAMG,EAAa,MAAMC,GAAgBtM,EAAW6L,EAAM,MAAM,EAChEG,EAAWK,CAAU,EACHH,EAAAG,EAAW,OAAS,CAAC,CAAA,GACxC,CAAA,EACJ,CAACV,EAASE,CAAK,CAAC,EAEnBnI,EAAAA,UAAU,IAAM,EACX,SAAY,CACL,GAAA,CAACmI,GAASI,EAAiB,EAAG,CAC9BG,EAAa,MAAS,EACtB,MAAA,CAEJ,MAAMG,EAAM,UAAUvM,CAAS,UAAU+L,EAAQE,CAAc,EAAE,MAAM,GAAG,EAAE,CAAC,EAAE,YAAa,CAAA,YAAYA,CAAc,eAEhHO,EAAO,MADI,MAAM,MAAMD,CAAG,GACJ,KAAK,EACpBH,EAAA,CAAE,OAAQI,EAAM,CAAA,GAC9B,CAAA,EACJ,CAACX,EAAOI,CAAc,CAAC,EAEvB,CAACJ,EACA,OAASzH,EAAA,IAAAI,EAAA,SAAA,EAAA,EAGb,SAASiI,GAAc,CACnBT,EAAW,CAAA,CAAE,EACPJ,EAAA,CAAA,CAGV,eAAec,GAAe,CAC1BZ,EAAmB,MAAMa,GAAoB3M,EAAW6L,EAAO,OAAQI,CAAc,CAAC,EAC1EQ,EAAA,CAAA,CAGT,OAAAlI,OAACU,GAAM,KAAM0G,EAAS,OAAQc,EAAa,gBAAiB,oBAAqB,WAAY,GAChG,SAAA,CAAArI,EAAA,IAACa,EAAM,OAAN,CAAa,YAAW,GACrB,SAAAb,EAAAA,IAACa,EAAM,MAAN,CAAa,SAAA,uBAAuB4G,EAAM,IAAI,EAAG,CAAA,EACtD,EACAtH,EAAAA,KAACU,EAAM,KAAN,CACI,SAAA,CAAA,uBACA,SAAO,CAAA,UAAW,YAAa,MAAOgH,EAAgB,SAAWjG,GAAQkG,EAAkB,SAAUlG,EAAI,OAA6B,KAAK,CAAC,EACxI,SAAC,CAAA,GAAG+F,CAAO,EAAE,UAAU,IAAI,CAAC,EAAGa,IAASxI,EAAA,IAAA,SAAA,CAAO,MAAO2H,EAAQ,OAASa,EAAM,EAAc,SAAN,GAAAA,CAAQ,CAAS,EAC3G,EACAxI,EAAA,IAACS,EAAO,CAAA,UAAW,OAAQ,QAAS,UAAW,SAAUoH,EAAiB,EAAG,QAASS,EAAe,SAAkB,kBAAA,EACtHP,EAAa/H,EAAAA,IAAA,MAAA,CAAI,UAAU,sBAAsB,wBAAyB+H,EAAU,EAAK,IAAA,CAC9F,CAAA,CAAA,EACJ,CACJ,CCnCA,SAASU,GAAYC,EAA+BC,EAAgC,CAChF,MAAO,CAAC,MAAAD,EAAc,QAAU,CAAC,EAAG,EAAG,CAAC,EAAY,OAASC,GAAA,YAAAA,EAAU,SAASC,CAAC,GAAG,CAAC,CACzF,CAEA,SAASC,GAAuBhL,EAAqBiL,EAAkBC,EAA0C,CACvG,MAAAC,EAAW,CAAC,GAAGD,CAAQ,EAC7B,GAAID,EAAW,GAAKA,GAAYE,EAAS,OACrC,MAAM,IAAI,MAAM,oBAAoBF,CAAQ,uBAAuB,EAEvE,OAAAE,EAASF,CAAQ,EAAIjL,EACdmL,CACX,CAEA,MAAMC,GAAsB,CAACC,EAAa,KAAMA,EAAa,KAAMA,EAAa,KAAMA,EAAa,KAAMA,EAAa,KAAMA,EAAa,KAAMA,EAAa,KAAMA,EAAa,KAAMA,EAAa,IAAI,EAE/L,SAASC,GAAY,CACI,QAAAR,EACA,MAAAS,EACA,YAAAC,EACA,aAAAC,EACA,iBAAAC,EACA,SAAAC,EACA,MAAAd,EACA,WAAAe,EACA,OAAAC,EACA,UAAAC,CACJ,EAWzB,CACC,MAAMC,EAAWnE,EAAY,EACvBoE,EAASC,GAAkBrB,GAAYC,EAAOC,CAAO,CAAC,EAEtDoB,EAAgBL,GAAUA,EAAS,EAAIM,GAAuBN,CAAM,EAAIM,GAAuB,CAAC,EAEtG,OACI7J,EAAA,KAAAC,WAAA,CAAA,SAAA,CAACD,EAAAA,KAAA,WAAA,CAAS,UAAW,aACjB,SAAA,CAAAH,EAAAA,IAAC,UAAO,SAAI,MAAA,CAAA,EACXG,EAAAA,KAAA,MAAA,CAAI,UAAW,SAAU,MAAO,CAAC,SAAU,OAAQ,IAAK,MAAO,eAAgB,OAAA,EAC5E,SAAA,CAAAA,OAAC,SAAM,UAAW,gBAAiB,MAAO,CAAC,UAAW,QAClD,EAAA,SAAA,CAACH,EAAA,IAAA,QAAA,CACD,eAAC,KACG,CAAA,SAAAA,EAAAA,IAAC,MAAG,QAAS,EAAG,SAEhB,UAAA,CAAA,CACJ,CAAA,EACA,SACC,QACD,CAAA,SAAA,CAAAG,OAAC,KACG,CAAA,SAAA,CAAAH,MAAC,KACG,CAAA,SAAAA,EAAA,IAAC,QAAA,CAAM,UAAU,YACV,QAAS,GAAG4J,CAAQ,2BAA6B,SAAA,YAAA,CAAA,EAC5D,QACC,KACG,CAAA,SAAA5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,2BAA4B,SAAUJ,EAAU,KAAK,SAAS,IAAI,IACjF,IAAI,OACJ,MAAO,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,0BAA2B,CAAC,EACxD,SAAWtI,GAAMgJ,EAAY,0BAA2B,SAAUhJ,EAAE,OAA4B,KAAK,CAAC,CAAA,CAAA,CACjH,CAAA,CAAA,EACJ,SACC,KACG,CAAA,SAAA,CAAAL,MAAC,KACG,CAAA,SAAAA,EAAA,IAAC,QAAA,CAAM,UAAU,YACV,QAAS,GAAG4J,CAAQ,yBAA2B,SAAA,UAAA,CAAA,EAC1D,QACC,KACG,CAAA,SAAA5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,yBAA0B,SAAUJ,EAAU,KAAK,SAAS,IAAI,IAC/E,IAAI,OACJ,MAAO,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,wBAAyB,CAAC,EACtD,SAAWtI,GAAMgJ,EAAY,wBAAyB,SAAUhJ,EAAE,OAA4B,KAAK,CAAC,CAAA,CAAA,CAC/G,CAAA,CAAA,CACJ,CAAA,CAAA,CACA,CAAA,CAAA,EACJ,EACAF,OAAC,SAAM,UAAW,gBAAiB,MAAO,CAAC,UAAW,QAClD,EAAA,SAAA,CAACH,EAAA,IAAA,QAAA,CACD,gBAAC,KACG,CAAA,SAAA,CAAAA,EAAAA,IAAC,MAAG,SAAQ,UAAA,CAAA,EACZA,EAAAA,IAAC,MAAG,SAAI,MAAA,CAAA,EACRA,EAAAA,IAAC,MAAG,SAAK,OAAA,CAAA,CAAA,CAAA,CACb,CACA,CAAA,SACC,QACD,CAAA,SAAA,CAAAG,OAAC,KACG,CAAA,SAAA,CAAAH,MAAC,KAAI,CAAA,SAAA6J,EAAO,OAASA,EAAO,OAAS,KAAK,QACzC,KAAG,CAAA,SAAA7J,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,aAAc,CAAC,IAAM,EACnD,SAAWtI,GAAMgJ,EAAY,cAAehJ,EAAE,OAA4B,QAAU,EAAK,CAAA,CAAA,EACpG,QACC,KAAG,CAAA,SAAAL,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,aAAc,CAAC,IAAM,EACnD,SAAWtI,GAAMgJ,EAAY,aAAehJ,EAAE,OAA4B,QAAU,EAAI,CAAC,CAAA,CAAA,CACpG,CAAA,CAAA,EACJ,SACC,KACG,CAAA,SAAA,CAAAL,MAAC,KAAI,CAAA,SAAA6J,EAAO,OAASA,EAAO,OAAS,KAAK,QACzC,KAAG,CAAA,SAAA7J,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,aAAc,CAAC,IAAM,EACnD,SAAWtI,GAAMgJ,EAAY,cAAehJ,EAAE,OAA4B,QAAU,EAAK,CAAA,CAAA,EACpG,QACC,KAAG,CAAA,SAAAL,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,aAAc,CAAC,IAAM,EACnD,SAAWtI,GAAMgJ,EAAY,aAAehJ,EAAE,OAA4B,QAAU,EAAI,CAAC,CAAA,CAAA,CACpG,CAAA,CAAA,CACJ,CAAA,CAAA,CACA,CAAA,CAAA,CACJ,CAAA,CAAA,EACJ,EACAF,EAAAA,KAAC,QAAM,CAAA,UAAW,gBAAiB,MAAO,CAAC,UAAW,SAAU,UAAW,KAAA,EACvE,SAAA,CAAAA,OAAC,QACD,CAAA,SAAA,CAAAH,EAAAA,IAAC,MACG,SAACA,EAAA,IAAA,KAAA,CAAG,QAAS,GAAI,mBAAO,CAC5B,CAAA,SACC,KACG,CAAA,SAAA,CAAAA,EAAAA,IAAC,MAAG,SAAI,MAAA,CAAA,EACPA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACxBA,EAAAA,IAAC,MAAG,SAAM,QAAA,CAAA,CAAA,CACd,CAAA,CAAA,EACA,EACCA,EAAA,IAAA,QAAA,CACA,SAAC,CAAAkJ,EAAa,MAAOA,EAAa,OAAQA,EAAa,IAAI,EAAE,IAAKe,UAC9D,KACG,CAAA,SAAA,CAAAjK,EAAAA,IAAC,MAAI,SAAKiK,CAAA,CAAA,IACRtB,GAAA,YAAAA,EAAS,sBAAuBM,IAAqB,IAAI,CAACpL,EAAO2K,IAASxI,MAAA,KAAA,CAAa,UAAWiK,GAAQpM,GAASA,GAASkM,EAAcvB,EAAM,CAAC,EAAI,oBAAsB,GACzK,SAAAxI,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,QAAQ,KAAM,GAAGI,CAAQ,kBAAkBpB,CAAG,GACvE,QAAS3K,GAASoM,EAClB,SAAW5J,GAAOA,EAAE,OAA4B,QAAUgJ,EAAY,sBAAuBR,GAAuBoB,EAAMzB,EAAKG,EAAS,mBAAmB,CAAC,EAAI,IAAA,CAAA,CAAK,EAH5FH,CAIpF,CAAK,EACLxI,EAAAA,IAAC,MAAI,SAAKiK,CAAA,CAAA,CAAA,CAPL,EAAAA,CAQT,CAAM,CACV,CAAA,CAAA,CACJ,CAAA,CAAA,EACJ,SAEC,WACG,CAAA,SAAA,CAAAjK,EAAAA,IAAC,UAAO,SAAM,QAAA,CAAA,EACbG,EAAAA,KAAA,MAAA,CAAI,UAAW,SAAU,MAAO,CAAC,SAAU,OAAQ,IAAK,MAAO,eAAgB,OAAA,EAE5E,SAAA,CAAAA,OAAC,SAAM,UAAW,gBAAiB,MAAO,CAAC,UAAW,QAClD,EAAA,SAAA,CAACH,EAAA,IAAA,QAAA,CACD,eAAC,KACG,CAAA,SAAAA,EAAAA,IAAC,MAAG,QAAS,EAAG,SAEhB,UAAA,CAAA,CACJ,CAAA,EACA,SACC,QACD,CAAA,SAAA,CAAAG,OAAC,KACG,CAAA,SAAA,CAAAH,MAAC,KACG,CAAA,SAAAA,EAAA,IAAC,QAAA,CAAM,UAAU,YACV,QAAS,GAAG4J,CAAQ,6BAA+B,SAAA,YAAA,CAAA,EAC9D,QACC,KACG,CAAA,SAAA5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,6BAA8B,SAAUJ,EAAU,KAAK,SACtE,IAAI,IAAI,IAAI,OACZ,MAAO,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,4BAA6B,CAAC,EAC1D,SAAWtI,GAAMgJ,EAAY,4BAA6B,SAAUhJ,EAAE,OAA4B,KAAK,CAAC,CAAA,CAAA,CACnH,CAAA,CAAA,EACJ,SACC,KACG,CAAA,SAAA,CAAAL,MAAC,KACG,CAAA,SAAAA,EAAA,IAAC,QAAA,CAAM,UAAU,YACV,QAAS,GAAG4J,CAAQ,2BAA6B,SAAA,UAAA,CAAA,EAC5D,QACC,KACG,CAAA,SAAA5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,2BAA4B,SAAUJ,EAAU,KAAK,SAAS,IAAI,IACjF,IAAI,OACJ,MAAO,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,0BAA2B,CAAC,EACxD,SAAWtI,GAAMgJ,EAAY,0BAA2B,SAAUhJ,EAAE,OAA4B,KAAK,CAAC,CAAA,CAAA,CACjH,CAAA,CAAA,EACJ,SACC,KACG,CAAA,SAAA,CAAAL,MAAC,KACG,CAAA,SAAAA,EAAA,IAAC,QAAA,CAAM,UAAU,YACV,QAAS,GAAG4J,CAAQ,wBAA0B,SAAA,OAAA,CAAA,EACzD,QACC,KACG,CAAA,SAAA5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,wBAAyB,SAAUJ,EAAU,KAAK,SAAS,IAAI,IAC9E,IAAI,OACJ,MAAO,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,uBAAwB,CAAC,EACrD,SAAWtI,GAAMgJ,EAAY,uBAAwB,SAAUhJ,EAAE,OAA4B,KAAK,CAAC,CAAA,CAAA,CAC9G,CAAA,CAAA,CACJ,CAAA,CAAA,CACA,CAAA,CAAA,EACJ,EACAF,OAAC,SAAM,UAAW,4BAA6B,MAAO,CAAC,UAAW,QAC9D,EAAA,SAAA,CAACH,EAAA,IAAA,QAAA,CACD,gBAAC,KACG,CAAA,SAAA,CAAAA,EAAAA,IAAC,MAAG,SAAI,MAAA,CAAA,EACRA,EAAAA,IAAC,MAAG,SAAI,MAAA,CAAA,EACRA,EAAAA,IAAC,MAAG,SAAO,SAAA,CAAA,EACXA,EAAAA,IAAC,MAAG,SAAI,MAAA,CAAA,CAAA,CAAA,CACZ,CACA,CAAA,SACC,QACD,CAAA,SAAA,CAAAG,OAAC,KACG,CAAA,SAAA,CAAAH,MAAC,KAAI,CAAA,SAAA6J,EAAO,OAASA,EAAO,OAAS,KAAK,QACzC,KAAG,CAAA,SAAA7J,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,eAAgB,CAAC,IAAM,EACrD,SAAWtI,GAAMgJ,EAAY,gBAAiBhJ,EAAE,OAA4B,QAAU,EAAK,CAAA,CAAA,EACtG,QACC,KAAG,CAAA,SAAAL,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,eAAgB,CAAC,IAAM,EACrD,SAAWtI,GAAMgJ,EAAY,eAAiBhJ,EAAE,OAA4B,QAAU,EAAI,CAAC,CAAA,CAAA,EACtG,QACC,KAAG,CAAA,SAAAL,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,eAAgB,CAAC,IAAM,EACrD,SAAWtI,GAAMgJ,EAAY,eAAiBhJ,EAAE,OAA4B,QAAU,EAAI,CAAC,CAAA,CAAA,CACtG,CAAA,CAAA,EACJ,SACC,KACG,CAAA,SAAA,CAAAL,MAAC,KAAI,CAAA,SAAA6J,EAAO,OAASA,EAAO,OAAS,KAAK,QACzC,KAAG,CAAA,SAAA7J,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,eAAgB,CAAC,IAAM,EACrD,SAAWtI,GAAMgJ,EAAY,gBAAiBhJ,EAAE,OAA4B,QAAU,EAAK,CAAA,CAAA,EACtG,QACC,KAAG,CAAA,SAAAL,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,eAAgB,CAAC,IAAM,EACrD,SAAWtI,GAAMgJ,EAAY,eAAiBhJ,EAAE,OAA4B,QAAU,EAAI,CAAC,CAAA,CAAA,EACtG,QACC,KAAG,CAAA,SAAAL,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,WACzB,QAAS,KAAK,IAAI,GAAGb,GAAA,YAAAA,EAAS,eAAgB,CAAC,IAAM,EACrD,SAAWtI,GAAMgJ,EAAY,eAAiBhJ,EAAE,OAA4B,QAAU,EAAI,CAAC,CAAA,CAAA,CACtG,CAAA,CAAA,CACJ,CAAA,CAAA,CACA,CAAA,CAAA,CACJ,CAAA,CAAA,EACJ,EAEAF,EAAAA,KAAC,QAAM,CAAA,UAAW,gBAAiB,MAAO,CAAC,UAAW,SAAU,UAAW,KAAA,EACvE,SAAA,CAAAA,OAAC,QACD,CAAA,SAAA,CAAAH,EAAAA,IAAC,MACG,SAACA,EAAA,IAAA,KAAA,CAAG,QAAS,GAAI,mBAAO,CAC5B,CAAA,SACC,KACG,CAAA,SAAA,CAAAA,EAAAA,IAAC,MAAG,SAAI,MAAA,CAAA,EACPA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACvBA,EAAA,IAAA,KAAA,CAAG,UAAW,OAAQ,SAAC,IAAA,EACxBA,EAAAA,IAAC,MAAG,SAAM,QAAA,CAAA,CAAA,CACd,CAAA,CAAA,EACA,EACCA,EAAA,IAAA,QAAA,CACA,SAAC,CAAAkJ,EAAa,MAAOA,EAAa,OAAQA,EAAa,IAAI,EAAE,IAAKe,UAC9D,KACG,CAAA,SAAA,CAAAjK,EAAAA,IAAC,MAAI,SAAKiK,CAAA,CAAA,IACRtB,GAAA,YAAAA,EAAS,wBAAyBM,IAAqB,IAAI,CAACpL,EAAO2K,IAASxI,MAAA,KAAA,CAAa,UAAWiK,GAAQpM,GAASA,GAASkM,EAAcvB,EAAM,CAAC,EAAI,oBAAsB,GAC3K,SAAAxI,EAAA,IAAC,QAAA,CAAM,SAAUwJ,EAAU,KAAK,QAAQ,KAAM,GAAGI,CAAQ,oBAAoBpB,CAAG,GACzE,QAAS3K,GAASoM,EAClB,SAAW5J,GAAOA,EAAE,OAA4B,QAAUgJ,EAAY,wBAAyBR,GAAuBoB,EAAMzB,EAAKG,EAAS,qBAAqB,CAAC,EAAI,IAAA,CAAA,CAAK,EAH9FH,CAItF,CAAK,EACLxI,EAAAA,IAAC,MAAI,SAAKiK,CAAA,CAAA,CAAA,CAPL,EAAAA,CAQT,CAAM,CACV,CAAA,CAAA,CACJ,CAAA,CAAA,EACJ,EAEA9J,EAAAA,KAAC,WAAS,CAAA,UAAW,YACjB,SAAA,CAAAH,EAAA,IAAC,UAAQ,SAAS,QAAA,CAAA,EACjBG,EAAA,KAAA,QAAA,CAAM,QAAS,GAAGyJ,CAAQ,kBAAoB,SAAA,CAAA,SAAS,GAAA,EAAM,EAC9D5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,kBAAmB,SAAUJ,EAAU,KAAK,SAAS,IAAK,EAAG,MAAOb,GAAA,YAAAA,EAAS,MAC5F,SAAWtI,GAAMgJ,EAAY,QAAS,SAAUhJ,EAAE,OAA4B,KAAK,CAAC,CAAA,CAAE,EAAE,IACxFF,EAAA,KAAA,QAAA,CAAM,QAAS,GAAGyJ,CAAQ,kBAAoB,SAAA,CAAA,SAAS,GAAA,EAAM,EACpE5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,kBAAmB,SAAUJ,EAAU,KAAK,SAAS,IAAK,EAAG,MAAOb,GAAA,YAAAA,EAAS,MAC5F,SAAWtI,GAAMgJ,EAAY,QAAS,SAAUhJ,EAAE,OAA4B,KAAK,CAAC,CAAA,CAAA,CAAE,EACjG,EAECsJ,EAAY,KAAQxJ,OAAA,WAAA,CAAS,UAAW,aACrC,SAAA,CAAAH,EAAA,IAAC,UAAQ,SAAc,aAAA,CAAA,EACvBA,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,QAAS,SAAUJ,EAAU,KAAK,WAAW,QAASb,GAAA,YAAAA,EAAS,WAAW,SAAS,QAClG,SAAWtI,GAAMgJ,EAAY,aAAchJ,EAAE,OAAO,QAAU,CAAC,GAAGsI,EAAS,WAAY,MAAM,EAAIA,EAAS,WAAW,OAAYhG,GAAAA,GAAK,MAAM,CAAC,CAAA,CAAE,EACtJ3C,EAAAA,IAAC,SAAM,QAAS,GAAG4J,CAAQ,QAAS,UAAW,OAAQ,SAAU,OAAA,CAAA,EACjE5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,QAAS,SAAUJ,EAAU,KAAK,WAAW,SAASb,GAAA,YAAAA,EAAS,WAAW,SAAS,WAAWA,GAAA,YAAAA,EAAS,WAAW,SAAS,WAC1I,SAAWtI,GAAMgJ,EAAY,aAAchJ,EAAE,OAAO,QAAU,CAAC,GAAGsI,EAAS,WAAY,QAAQ,EAAIA,EAAS,WAAW,UAAYhG,GAAK,QAAUA,GAAK,QAAQ,CAAC,CAAA,CAAE,EACzK3C,EAAAA,IAAC,SAAM,QAAS,GAAG4J,CAAQ,QAAS,UAAW,OAAQ,SAAY,SAAA,CAAA,EACnE5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,SAAU,SAAUJ,EAAU,KAAK,WAAW,QAASb,GAAA,YAAAA,EAAS,WAAW,SAAS,UACnG,SAAWtI,GAAMgJ,EAAY,aAAchJ,EAAE,OAAO,QAAU,CAAC,GAAGsI,EAAS,WAAY,QAAQ,EAAIA,EAAS,WAAW,OAAYhG,GAAAA,GAAK,QAAQ,CAAC,CAAA,CAAE,EAC1J3C,EAAAA,IAAC,SAAM,QAAS,GAAG4J,CAAQ,SAAU,UAAW,OAAQ,SAAY,SAAA,CAAA,EACpE5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,SAAU,SAAUJ,EAAU,KAAK,WAAW,QAASb,GAAA,YAAAA,EAAS,WAAW,SAAS,UACnG,SAAWtI,GAAMgJ,EAAY,aAAchJ,EAAE,OAAO,QAAU,CAAC,GAAGsI,EAAS,WAAY,QAAQ,EAAIA,EAAS,WAAW,OAAYhG,GAAAA,GAAK,QAAQ,CAAC,CAAA,CAAE,EAC1J3C,EAAAA,IAAC,SAAM,QAAS,GAAG4J,CAAQ,SAAU,UAAW,OAAQ,SAAY,SAAA,CAAA,EACpE5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,SAAU,SAAUJ,EAAU,KAAK,WAAW,QAASb,GAAA,YAAAA,EAAS,WAAW,SAAS,UACnG,SAAWtI,GAAMgJ,EAAY,aAAchJ,EAAE,OAAO,QAAU,CAAC,GAAGsI,EAAS,WAAY,QAAQ,EAAIA,EAAS,WAAW,OAAYhG,GAAAA,GAAK,QAAQ,CAAC,CAAA,CAAE,EAC1J3C,EAAAA,IAAC,SAAM,QAAS,GAAG4J,CAAQ,SAAU,UAAW,OAAQ,SAAY,SAAA,CAAA,EACpE5J,EAAA,IAAC,QAAA,CAAM,GAAI,GAAG4J,CAAQ,SAAU,SAAUJ,EAAU,KAAK,WAAW,QAASb,GAAA,YAAAA,EAAS,WAAW,SAAS,UACnG,SAAWtI,GAAMgJ,EAAY,aAAchJ,EAAE,OAAO,QAAU,CAAC,GAAGsI,EAAS,WAAY,QAAQ,EAAIA,EAAS,WAAW,OAAYhG,GAAAA,GAAK,QAAQ,CAAC,CAAA,CAAE,EAC1J3C,EAAAA,IAAC,SAAM,QAAS,GAAG4J,CAAQ,SAAU,UAAW,OAAQ,SAAY,SAAA,CAAA,CAAA,CACxE,CAAA,CAAA,EACJ,CACJ,CAEA,SAASE,GAAkBD,EAAiC,CACpD,GAAAA,GAAA,MAAAA,EAAQ,MAAM,GAAI,CACd,IAAAK,EAAS,EAAGC,EAAS,EACrB,OAACN,EAAO,QAAQ,QAAUjB,GAAKA,EAAI,CAAC,GAGnCiB,EAAO,QAAQ,CAAC,IACRK,EAAAL,EAAO,MAAM,CAAC,GAAK,GAE3BA,EAAO,QAAQ,CAAC,IACZK,EAGQC,EAAAN,EAAO,MAAM,CAAC,GAAK,EAFnBK,EAAAL,EAAO,MAAM,CAAC,GAAK,GAK/BA,EAAO,QAAQ,CAAC,IACZK,EAGQC,EAAAN,EAAO,MAAM,CAAC,EAFdK,EAAAL,EAAO,MAAM,CAAC,GAKxB,CAAC,OAAAK,EAAgB,OAAAC,EAAgB,IAAK,CAACD,EAAQ,IAAK,CAACC,CAAM,GAnBvD,CAAC,OAAQN,EAAO,MAAM,CAAC,GAAK,EAAG,OAAQA,EAAO,MAAM,CAAC,GAAK,EAAG,IAAK,GAAO,IAAK,EAAK,CAmB5B,KAE3D,OAAA,CACH,QAAQA,GAAA,YAAAA,EAAQ,MAAM,KAAM,EAC5B,QAAQA,GAAA,YAAAA,EAAQ,MAAM,KAAM,EAC5B,IAAK,CAAC,EAAEA,GAAA,MAAAA,EAAQ,QAAQ,IAAM,EAACA,GAAA,MAAAA,EAAQ,MAAM,KAC7C,IAAK,CAAC,EAAEA,GAAA,MAAAA,EAAQ,QAAQ,IAAM,EAACA,GAAA,MAAAA,EAAQ,MAAM,IACjD,CAER,CAEO,SAASO,GAAqB,CAAC,MAAAC,EAAO,UAAAC,EAAW,MAAAC,EAAO,UAAAZ,GAK5D,CAEQ,OAAA3J,EAAAA,IAAC,QACJ,CAAA,SAAAG,EAAAA,KAAC,QACD,CAAA,SAAA,CAAAA,OAAC,KACG,CAAA,SAAA,CAAAH,EAAAA,IAAC,MAAG,SAAI,MAAA,CAAA,EACPA,EAAA,IAAA,KAAA,CAAI,UAAOqK,GAAA,YAAAA,EAAA,mBAAoB,CAAE,CAAA,CAAA,EACtC,SACC,KACG,CAAA,SAAA,CAAArK,EAAAA,IAAC,MAAG,SAAY,cAAA,CAAA,EACfA,EAAA,IAAA,KAAA,CAAI,UAAWsK,GAAA,YAAAA,EAAA,kBAAmB,CAAE,CAAA,CAAA,EACzC,SACC,KACG,CAAA,SAAA,CAAAtK,EAAAA,IAAC,MAAG,SAAe,iBAAA,CAAA,EAClBA,EAAA,IAAA,KAAA,CAAI,UAAWsK,GAAA,YAAAA,EAAA,qBAAsB,CAAE,CAAA,CAAA,EAC5C,SACC,KACG,CAAA,SAAA,CAAAtK,EAAAA,IAAC,MAAG,SAAc,gBAAA,CAAA,EACjBA,EAAA,IAAA,KAAA,CAAI,UAAWsK,GAAA,YAAAA,EAAA,oBAAqB,CAAE,CAAA,CAAA,EAC3C,SACC,KACG,CAAA,SAAA,CAAAtK,EAAAA,IAAC,MAAG,SAAM,QAAA,CAAA,EACTA,EAAA,IAAA,KAAA,CAAI,UAAOqK,GAAA,YAAAA,EAAA,eAAgB,CAAE,CAAA,CAAA,EAClC,SACC,KACG,CAAA,SAAA,CAAArK,EAAAA,IAAC,MAAG,SAAe,iBAAA,CAAA,QAClB,KAAK,CAAA,WAAAsK,GAAA,YAAAA,EAAW,uBAAwB,KAAMA,GAAA,YAAAA,EAAW,oBAAqB,EAAG,CAAA,CAAA,EACtF,SACC,KACG,CAAA,SAAA,CAAAtK,EAAAA,IAAC,MAAG,SAAc,gBAAA,CAAA,EACjBA,EAAA,IAAA,KAAA,CAAI,UAAWsK,GAAA,YAAAA,EAAA,sBAAuB,CAAE,CAAA,CAAA,EAC7C,SACC,KACG,CAAA,SAAA,CAAAtK,EAAAA,IAAC,MAAG,SAAW,aAAA,CAAA,EACdA,EAAA,IAAA,KAAA,CAAI,UAAWsK,GAAA,YAAAA,EAAA,mBAAoB,CAAE,CAAA,CAAA,EAC1C,SACC,KACG,CAAA,SAAA,CAAAtK,EAAAA,IAAC,MAAG,SAAI,MAAA,CAAA,EACPA,EAAA,IAAA,KAAA,CAAI,UAAOuK,GAAA,YAAAA,EAAA,gBAAiB,CAAE,CAAA,CAAA,EACnC,EACCZ,EAAY,KACTxJ,EAAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAAAD,OAAC,KACG,CAAA,SAAA,CAAAH,EAAAA,IAAC,MAAG,SAAW,aAAA,CAAA,EACfA,EAAA,IAAC,KAAG,CAAA,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAW,MAAMsK,GAAA,MAAAA,EAAW,WAAa,WAAa,MAAM,EAAG,CAAA,CAAE,CAAA,CAAA,EAC5E,SACC,KACG,CAAA,SAAA,CAAAtK,EAAAA,IAAC,MAAG,SAAO,SAAA,CAAA,EACXA,EAAA,IAAC,KAAG,CAAA,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAW,MAAMsK,GAAA,MAAAA,EAAW,OAAS,WAAa,MAAM,EAAG,CAAA,CAAE,CAAA,CAAA,EACxE,SACC,KACG,CAAA,SAAA,CAAAtK,EAAAA,IAAC,MAAG,SAAU,YAAA,CAAA,EACdA,EAAA,IAAC,KAAG,CAAA,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAW,MAAMsK,GAAA,MAAAA,EAAW,UAAY,WAAa,MAAM,EAAG,CAAA,CAAE,CAAA,CAAA,CAC3E,CAAA,CAAA,CACJ,CAAA,CAAA,CAAA,CACA,CACJ,CAAA,CACJ,CAEgB,SAAAE,GAAc,CAAC,OAAAd,GAE5B,CACO,MAAAe,EAAoBf,GAAUA,EAAS,EAAK,CAAC,GAAI,kBAAmB,kBAAmB,iBAAiB,EAAGA,CAAM,EAAI,GACrHgB,EAAUC,GAAS,qBAAqB,EAEvC,OAAAxK,EAAA,KAAC,MAAI,CAAA,UAAW,gBACnB,SAAA,CAAAH,EAAAA,IAAC,OAAI,UAAU,cAAe,WAAoB,mBAAmByK,CAAiB,GAAK,uBAAwB,CAAA,EACnHtK,EAAAA,KAAC,MAAI,CAAA,UAAU,2BACX,SAAA,CAAAH,EAAA,IAAC4K,GAAS,CAAA,IAAKF,EAAS,UAAW,kBAAmB,EACtD1K,EAAAA,IAAC6K,GAAS,CAAA,MAAOJ,GAAqBf,EAASM,GAAuBN,CAAM,EAAE,CAAC,EAAIR,EAAa,IAAM,CAAA,EACtGlJ,EAAAA,IAAC6K,GAAS,CAAA,MAAOJ,GAAqBf,EAASM,GAAuBN,CAAM,EAAE,CAAC,EAAIR,EAAa,IAAM,CAAA,EACtGlJ,EAAAA,IAAC6K,GAAS,CAAA,MAAOJ,GAAqBf,EAASM,GAAuBN,CAAM,EAAE,CAAC,EAAIR,EAAa,IAAM,CAAA,EACrGlJ,EAAA,IAAA4K,GAAA,CAAS,IAAKE,GAAU,UAAW,iBAAmB,CAAA,CAAA,CAC3D,CAAA,CAAA,EACJ,CACJ,CCzbA,MAAMC,GAAW,EACXC,GAAc,EAGdhF,GAAY3K,GAAqC2E,MAACS,GAAO,KAAM,KAAO,GAAGpF,EAAM,EAErF,SAAS4P,GAAc,CAAC,MAAAxD,EAAO,QAAAyD,EAAS,SAAAC,EAAU,YAAAC,EAAa,eAAAC,EAAgB,MAAAC,EAAO,MAAAlC,EAAO,YAAAC,EAAa,SAAAG,CAAA,EAGvG,CACC,aAAQ,MAAI,CAAA,IAAK8B,EAAQ,MAAQ,MAAO,UAAW,iBAAiBA,EAAQ,QAAU,MAAM,IAAIJ,EAAU,QAAU,EAAE,GAClH,SAAClL,EAAAA,IAAA,QAAA,CACD,gBAAC,QACG,CAAA,SAAA,CAAAG,OAAC,KACG,CAAA,SAAA,CAAAH,EAAAA,IAAC,MAAI,SAAMoJ,CAAA,CAAA,EACV8B,EAAWlL,EAAAA,IAAA,KAAA,CAAG,MAAO,eAAgB,SAAE,IAAA,CAAA,EAASA,MAAA,KAAA,CAAG,MAAO,wCAAyC,SAAE,KAAA,EACrGA,MAAA,KAAA,CAAG,MAAO,gBAAiB,SAAE,KAAA,EAC7BA,MAAA,KAAA,CAAG,MAAO,iDAAkD,SAAC,IAAA,EAC7DA,EAAA,IAAA,KAAA,CAAG,MAAO,aAAc,SAAC,GAAA,CAAA,CAAA,EAC9B,EACE,CAAC,EAAG,EAAG,CAAC,EAAY,IAASiB,GAAA,CAE3B,MAAMsK,EAAUL,GAAWjK,GAAK,EAAI,EAAIA,EAClCuK,EAAUJ,GAAA,YAAAA,EAAc,OAAOG,CAAO,IACtCE,EAAWD,GAAWA,EAAQ,OAAS,EAEvCE,EAAoBF,GAAWA,EAAQ,UAAY5C,KAAMnB,GAAA,YAAAA,EAAO,UAAS,EAAE,SAAW,EACtFkE,KAAeN,GAAA,YAAAA,EAAiB,OAAOE,CAAO,MAAO,GAAKR,MAAc,EACxEa,KAAkBP,GAAA,YAAAA,EAAiB,OAAOE,CAAO,MAAO,GAAKP,MAAiB,EAC7E,MAAA,CAACG,GAAYA,EAAS,OAAOlK,CAAC,EAAE,SAAK,KACxC,CAAA,SAAA,CAAAjB,EAAA,IAAC,KAAA,CAAG,MAAO,CAAC,gBAAiByL,EAAW,SAAW,aAAa,EAC5D,MAAOA,EAAW,oBAAoBD,CAAO,GAAK,GAAK,SAAAL,GAAA,YAAAA,EAAW,OAAOlK,CAAC,UAAS,CAAE,EACxFiK,EACG/K,EAAA,KAAAC,WAAA,CAAA,SAAA,CAACJ,EAAA,IAAA,KAAA,CAAG,SAACA,EAAAA,IAAA,QAAA,CAAM,KAAK,WAAW,SAASqL,GAAA,YAAAA,EAAiB,SAASpK,CAAC,OAAQ,EAAG,SAAWZ,GAAMgJ,EAAY,SAASpI,CAAC,GAAKZ,EAAE,OAA4B,QAAU,EAAI,CAAC,EAAG,SAAUmJ,CAAS,CAAA,EAAE,EAC1LxJ,EAAA,IAAA,KAAA,CAAG,SAACA,EAAAA,IAAA,QAAA,CAAM,KAAK,WAAW,SAASqL,GAAA,YAAAA,EAAgB,OAAQ,EAAG,SAAWhL,GAAMgJ,EAAY,MAAQhJ,EAAE,OAA4B,QAAU,EAAI,CAAC,EAAG,SAAUmJ,MAAc6B,GAAA,YAAAA,EAAgB,QAAS,GAAKN,MAAc,CAAA,CAAE,CAAE,CAAA,CAAA,CAAA,CAChO,EACI5K,EAAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAAAJ,EAAA,IAAC,KAAG,CAAA,SAAAA,EAAAA,IAAC,QAAM,CAAA,KAAK,WAAW,UAAUqL,GAAA,YAAAA,EAAiB,SAASpK,CAAC,MAAO,GAAK,EAAG,SAAWZ,GAAMgJ,EAAY,SAASpI,CAAC,GAAKZ,EAAE,OAA4B,QAAU,EAAI,CAAC,EAAG,SAAUmJ,CAAU,CAAA,EAAE,EAChMxJ,EAAA,IAAA,KAAA,CAAG,SAACA,EAAA,IAAA,QAAA,CAAM,KAAK,WAAW,SAASqL,GAAA,YAAAA,EAAiB,KAAKE,CAAO,OAAQ,EAAG,SAAWlL,GAAM,CACzFgJ,EAAY,KAAKkC,CAAO,GAAKlL,EAAE,OAA4B,QAAU,EAAI,CAAC,GAEvEgL,GAAA,YAAAA,EAAiB,SAASE,CAAO,MAAO,GAC3BlC,EAAA,SAASkC,CAAO,GAAI,CAAC,CAEtC,EAAA,SAAU/B,GAAYmC,CAAA,CAAa,CAAE,CAAA,CAAA,EAC5C,EACA3L,EAAAA,IAAC,KAAG,CAAA,SAAAA,EAAAA,IAAC,QAAM,CAAA,KAAK,WAAW,QAAS4L,EAAe,SAAWvL,GAAM,CAChE,IAAIwL,EAAWxL,EAAE,OAA4B,QAAUgL,EAAgB,OAAOE,CAAO,EAAE,EAAIP,GAAcK,EAAgB,OAAOE,CAAO,EAAE,EAAI,GACxIM,EAAUb,IAAgBS,GAAY,CAACC,IAC7BG,GAAAd,IAEH1B,EAAA,OAAOkC,CAAO,GAAIM,CAAO,CAAA,EACtC,SAAUrC,CAAU,CAAA,EAAE,QACxB,KAAG,CAAA,SAAAxJ,EAAA,IAAC,QAAM,CAAA,KAAK,WAAW,WAAWqL,GAAA,YAAAA,EAAiB,OAAOE,CAAO,MAAO,GAAKR,MAAc,EAAG,SAAW1K,GAAM,CAC/G,IAAIwL,EAAWxL,EAAE,OAA4B,QAAUgL,EAAgB,OAAOE,CAAO,EAAE,EAAIR,GAAWM,EAAgB,OAAOE,CAAO,EAAE,EAAI,GACrIM,EAAUb,IAAgBS,GAAY,CAACC,IAC7BG,GAAAd,IAEH1B,EAAA,OAAOkC,CAAO,GAAIM,CAAO,CAAA,EACtC,SAAUrC,GAAaoC,GAAiBH,GAAY,CAACC,EAAoB,MAAQE,GAAiBH,GAAY,CAACC,EAAqB,uIAAyI,GAAG,CAAE,CAAA,CAAA,CAAA,EA7BrOzK,CA8BpD,EAAQ,IACX,CAAA,CAAA,CACL,CAAA,CACA,CAAA,EACJ,CACJ,CAEA,SAAS6K,GAAU,CAAC,MAAAzB,EAAO,UAAAC,EAAW,WAAAyB,EAAY,MAAAxB,EAAO,YAAAlB,EAAa,UAAAM,GAEnE,CACC,MAAMqC,EAAe,SACfC,EAAqB,SACrBC,EAAiBzG,EAAY,EACnC,OACItF,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAJ,EAAA,IAAC,UAAQ,SAAmB,kBAAA,CAAA,EAC3BA,EAAA,IAAAoK,GAAA,CAAqB,MAAAC,EAAc,UAAAC,EAAsB,MAAAC,EAAc,UAAAZ,EAAsB,EAC7FoC,EAAa/L,EAAA,IAACmM,GAAK,CAAA,GAAI,UAAW,MAAO,CAAC,MAAO,OAAO,EACrD,SAAChM,EAAAA,KAAAgM,GAAK,KAAL,CACG,SAAA,CAACnM,EAAAA,IAAAmM,GAAK,MAAL,CAAW,MAAO,CAAC,UAAW,QAAA,EAAY,SAAU,SAAA,CAAA,EACrDnM,EAAAA,IAACmM,GAAK,KAAL,CACI,wGAA+FH,CAAY,kCAAkCC,CAAkB,GACpK,CAAA,EACAjM,EAAA,IAACe,EAAK,MAAL,CACG,KAAM,WACN,MAAO,kBACP,QAASsJ,EAAO,OAAS,EACzB,YAAehB,EAAY,SAAUhJ,EAAE,OAAO,QAAU,EAAI,CAAC,EAC7D,GAAI6L,CAAA,CAAA,CACR,CACJ,CAAA,CACJ,CAAA,EAAU,IAAA,EACd,CACJ,CAEA,MAAME,GAA6C,CAACC,GAAW,KAAMA,GAAW,OAAQA,GAAW,MAAM,EAgBzG,SAAwBC,GAAU,CAAC,WAAAtI,EAAY,SAAAC,EAAU,SAAAH,EAAU,MAAA2D,EAAO,UAAA7L,EAAW,oBAAA2Q,EAAqB,aAAAC,EAAc,YAAAhG,EAAa,OAAAiG,EAAQ,mBAAApH,CAAA,EAGP,qBAClI,KAAM,CAACqH,EAASC,CAAU,EAAIhO,EAAA,SAAS,CAAC8N,CAAM,EACxC,CAACG,EAAcC,CAAe,EAAIlO,WAAuB,EACzD,CAACmO,EAAUC,CAAW,EAAIpO,EAAAA,SAAS,EAAK,EACxC,CAACqO,EAAQC,CAAS,EAAItO,EAAAA,SAAS,EAAK,EACpCuO,EAAYC,EAAAA,OAAmB,EAC/B,CAACC,EAAkBC,CAAmB,EAAI1O,EAAAA,SAAS,EAAK,EAyB3D,GAvBHW,EAAAA,UAAU,IAAM,EACX,SAAY,CACN,GAAA,EAAAmN,GAAU,EAAChF,GAAA,MAAAA,EAAO,SAGrB,KAAGmF,GAAA,YAAAA,EAAc,UAAWnF,EAAM,SAAUmF,GAAA,YAAAA,EAAc,QAASnF,EAAM,MAAQ,CAACuF,GAAUZ,GAAe,SAASc,EAAU,OAAO,IAAMd,GAAe,SAAS3E,EAAM,KAAK,EAAG,CAC7KyF,EAAU,QAAUzF,EAAM,MAC1B,MAAA,CAGA2E,GAAe,SAAS3E,EAAM,KAAK,GAOnCoF,EAAgB,MAAS,EACzBF,EAAW,EAAK,IAPhBA,EAAW,EAAI,EACfE,EAAgB,MAAMS,GAAc1R,EAAW6L,EAAM,MAAM,CAAC,EAC5DkF,EAAW,EAAK,EAChBM,EAAU,EAAK,EACfF,EAAY,EAAK,GAIrB,GACD,CAAA,EACJ,CAACtF,GAAA,YAAAA,EAAO,KAAMA,GAAA,YAAAA,EAAO,OAAQA,GAAA,YAAAA,EAAO,MAAOuF,CAAM,CAAC,EAElD,CAACP,GAAU,CAAChF,EACJ,OAAA,KAGX,GAAGiF,EACC,cAAQ,MAAI,CAAA,SAAA,CAAA,wBAAqB1M,EAAAA,IAACvF,GAAQ,CAAA,UAAW,QAAS,CAAA,CAAA,EAAE,EAQpE,eAAe4O,EAAuC8B,EAAmCtP,EAAU8B,EAAqB4P,GAAuB,CACrI,MAAAC,GAAOrC,IAAa,OAChB,CAAE,IAAK,OAAO,OAAO,GAAIyB,EAAc,IAAK,CAAE,CAAC/Q,CAAK,EAAG8B,EAAM,EACvD,KAAM,OAAO,OAAO,CAAI,EAAAiP,EAAc,KAAM,CAAE,CAAC/Q,CAAK,EAAG0R,EAAO,CAAA,GACpE,CAAE,CAACpC,CAAQ,EAAG,OAAO,OAAO,CAAC,EAAGyB,EAAczB,CAAQ,EAAG,CAAE,CAACtP,CAAK,EAAG8B,CAAO,CAAA,CAAE,EACjF8P,EAAU,OAAO,OAAO,CAAC,EAC3B,CAAE,IAAKb,EAAc,IAAK,KAAMA,EAAc,IAAK,EACnDY,EACJ,GAEKrC,IAAa,OAASA,IAAa,UAChCtP,IAAU,SAAY8B,EAAmB,IACjC8P,EAAAtC,CAAQ,EAAE,IAAM,GAExBtP,IAAU,SAAY8B,EAAmB,IACjC8P,EAAAtC,CAAQ,EAAE,IAAM,IAEvB,CAACsC,EAAQ,IAAI,KAAO,CAACA,EAAQ,KAAK,OAASA,EAAQ,KAAK,QAAUA,EAAQ,IAAI,UAC/EA,EAAQ,IAAI,OAAS,EACrBA,EAAQ,KAAK,OAAS,IAK9BV,EAAY,EAAI,EAChBF,EAAgB,MAAMa,GAAY9R,EAAW6L,EAAO,OAAQgG,CAAO,CAAC,CAAA,CAGxE,eAAeE,GAAY,CACjB,MAAApH,GAAU3K,EAAW6L,EAAO,OAAQ,CAAE,IAAKmF,EAAc,IAAK,KAAMA,EAAc,IAAA,CAAM,EAC9FG,EAAY,EAAK,CAAA,CAGrB,eAAea,GAAY,CACnB,MAAMC,GAAc,CACpB,MAAO,sBACP,KAAM,8HACN,WAAY,UAAA,CACf,GAGK,MAAArB,EAAc/E,EAAO,MAAM,CAAA,CAGrC,eAAeqG,GAAc,CACtBhB,GAAYrF,EAAO,QAAU,aAC5B,MAAMkG,EAAU,EACHnH,EAAAiB,EAAO,OAAQ,EAAK,GAEpBjB,EAAAiB,EAAO,OAAQ,EAAI,CACpC,CAGJ,IAAI+B,EAAWiD,GAAU,GACrBsB,EACJ,GAAI/J,EACWwF,EAAA,GACCuE,EAAA5N,EAAA,KAAC,MAAI,CAAA,UAAW,aAAe,SAAA,CAAA,+HAA0H,SAAO,CAAA,UAAW,eAAgB,QAAS8D,EAAW,SAAuB,uBAAA,EAAS,GAAA,EAAC,UACrPwI,GAAU,CAAChF,EACfA,GAASA,EAAM,QAAU,QAAUA,EAAM,QAAU,UAAY8E,IAClDwB,EAAA5N,EAAA,KAAC,OAAI,UAAW,aAAc,MAAO,CAAC,SAAU,MAAU,EAAA,SAAA,CAAA,iFAAiF,UAAE6F,GAAS,CAAA,UAAW,OAAQ,MAAO,CAAC,SAAU,MAAS,EAAA,QAAS,OAAQ,QAAS,IAAMuG,EAAoB9E,EAAM,MAAM,EAAG,SAAkB,qBAAA,EAAW,GAAA,EAAC,WAE/S,CAAC2E,GAAe,SAAS3E,EAAM,KAAK,EAC9BsG,EAAA5N,EAAA,KAAC,MAAI,CAAA,UAAW,iBACxB,SAAA,CAAAH,MAACgG,IAAS,UAAU,OAAO,QAAQ,UAAU,SAAUyB,EAAM,OAAS,SAAUmF,GAAA,YAAAA,EAAc,eAAgB,EAAG,QAAS,IAAMS,EAAoB,EAAI,EAAI,SAAgB,gBAAA,EAC3KrN,EAAA,IAAAgG,GAAA,CAAS,UAAU,OAAO,QAAQ,UAAU,SAAU,CAAC8G,EAAU,QAAS,IAAMG,EAAU,EAAI,EAAI,SAAgB,gBAAA,EAClHjN,EAAA,IAAAgG,GAAA,CAAS,UAAU,OAAO,QAAQ,UAAU,SAAU,CAAC8G,EAAU,QAAS,IAAMa,IAAc,SAAc,cAAA,QAC5G3H,GAAS,CAAA,UAAU,OAAO,QAAQ,UAAU,SAAUyB,EAAM,QAAU,aAAe,CAACqF,EAAU,QAAS,IAAMgB,IAAgB,SAAU,UAAA,QACzI9H,GAAS,CAAA,UAAU,OAAO,QAAQ,UAAU,SAAUyB,EAAM,QAAU,aAAepC,GAAsByH,EAAU,QAAS,IAAMrG,GAAU7K,EAAW6L,EAAM,MAAM,EAAI,SAAgB,eAAA,CAAA,CAAA,EAC9L,MACG,CACQ+B,EAAA,GACP,IAAAwE,EACD,CAACvG,EAAM,IAAI,iBAAmB,CAACA,EAAM,KAAK,gBACzBuG,EAAA,aACTvG,EAAM,IAAI,gBAEVA,EAAM,KAAK,gBAGFuG,EAAA,MAFAA,EAAA,QAFAA,EAAA,OAOpB,MAAMC,EAAmBjO,EAAAA,IAAAgG,GAAA,CAAS,UAAW,OAAQ,MAAO,CAAC,SAAU,MAAM,EAAG,QAAS,SAAU,QAAS,IAAM4H,IAAa,SAAU,aAAA,EAC7HG,EAAA5N,EAAA,KAAC,OAAI,UAAW,aAAc,MAAO,CAAC,SAAU,MAAU,EAAA,SAAA,CAAA,0BAA0B6N,CAAa,sBAAsB,IAAEvG,EAAM,QAAU,SAAWwG,EAAkB,KAAK,GAAA,EAAC,CAAA,CAG5L,MAAMC,EAActB,EAAeA,EAAa,KAAMnK,GAAAgF,GAAA,YAAAA,EAAO,MAAP,YAAAhF,GAAY,OAC5D0L,EAAevB,EAAeA,EAAa,MAAOzF,GAAAM,GAAA,YAAAA,EAAO,OAAP,YAAAN,GAAa,OAC/DiH,EAAexB,EAAeA,EAAa,cAAexF,GAAAK,GAAA,YAAAA,EAAO,MAAP,YAAAL,GAAY,UACtEiH,EAAgBzB,EAAeA,EAAa,eAAgB0B,EAAA7G,GAAA,YAAAA,EAAO,OAAP,YAAA6G,EAAa,UAEzEC,GAAiB3B,EAAe,CAAE,MAAOA,EAAa,gBAAiB,MAAOA,EAAa,eAAA,GAAoB4B,GAAA/G,GAAA,YAAAA,EAAO,MAAP,YAAA+G,GAAY,YAC3HC,GAAkB7B,EAAe,CAAE,MAAOA,EAAa,iBAAkB,MAAOA,EAAa,gBAAA,GAAqB8B,EAAAjH,GAAA,YAAAA,EAAO,OAAP,YAAAiH,EAAa,YAEjI,IAAAC,EAAWT,EAAcA,EAAY,aAAeC,EAAc,eAAiB1G,EAAO,QAAU,OAAS,EAAIyG,EAAY,2BAA6BzG,EAAO,QAAU,QAAUA,EAAO,QAAU,SAAW,EAAIyG,EAAY,6BAA+B,EAChQU,EAAYT,EAAeA,EAAa,aAAeD,EAAa,eAAiBzG,EAAO,QAAU,OAAS,EAAI0G,EAAa,2BAA6B1G,EAAO,QAAU,QAAUA,EAAO,QAAU,SAAW,EAAI0G,EAAa,6BAA+B,EAElQ,MAAAjD,GAAUzD,GAAA,YAAAA,EAAO,QAAS,QAC1BsE,EAAab,KAAYgD,GAAA,YAAAA,EAAa,MAAO,GAAK,KAAMC,GAAA,YAAAA,EAAc,MAAO,GAAK,EAExF,OAAIjD,IAEAyD,IAAYT,GAAA,YAAAA,EAAa,MAAO,GAAK,GAAKA,GAAA,YAAAA,EAAa,SAAU,EAAKS,EACtEC,IAAaT,GAAA,YAAAA,EAAc,MAAO,GAAK,GAAKA,GAAA,YAAAA,EAAc,SAAU,EAAKS,UAGrE,MAAI,CAAA,UAAW,6BAA6B9K,EAAS,eAAe,GACvE,SAAA,CAAAiK,EAED5N,EAAAA,KAAC,MAAI,CAAA,UAAW,gBACZ,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAW,gBACZ,SAAA,CAAAH,EAAAA,IAAC,QAAK,UAAW,OAAS,SAAQyH,EAAAA,EAAM,KAAO,kBAAmB,CAAA,QACjE,KAAE,EAAA,QACF,OAAK,CAAA,UAAW,aAAe,SAAS3D,EAAA,YAAc6K,EAAWC,EAAU,QAC3E,OAAK,CAAA,UAAW,aAAe,SAAS9K,EAAA,YAAc8K,EAAYD,EAAS,EAC3ElH,GAAA,MAAAA,EAAO,UAAYgF,EAASzM,EAAA,IAAC,QAAK,UAAW,eAAiB,2BAAkB,EAAU,KAE3FA,EAAAA,IAACiL,GAAc,CAAA,MAAAxD,EAAc,QAAAyD,EAAkB,MAAO,OAAQ,YAAaqD,GAAgB,SAAU9G,GAAA,YAAAA,EAAO,IAAK,eAAgByG,EAAa,MAAO,CAACpK,EAAS,YAAa,YAAa,CAACjI,EAAO8B,IAAU0L,EAAY,MAAOxN,EAAO8B,CAAK,EAAG,SAAA6L,CAAoB,CAAA,EACjQxJ,EAAAA,IAACiL,GAAc,CAAA,MAAAxD,EAAc,QAAAyD,EAAkB,MAAO,QAAS,YAAauD,GAAiB,SAAUhH,GAAA,YAAAA,EAAO,KAAM,eAAgB0G,EAAc,MAAO,CAAC,CAACrK,EAAS,YAAa,YAAa,CAACjI,EAAO8B,IAAU0L,EAAY,OAAQxN,EAAO8B,CAAK,EAAG,SAAA6L,CAAoB,CAAA,EAEtQxJ,EAAAA,IAAAwK,GAAA,CAAc,OAAQ/C,GAAA,YAAAA,EAAO,aAAe,CAAA,EAE5CzH,EAAA,IAAA,WAAA,CAAS,UAAW,kBAAkB8D,EAAS,YAAc,OAAS,OAAO,GAC1E,SAAA9D,EAAA,IAAC8L,GAAU,CAAA,MAAOoC,EAAa,MAAOC,EAAc,UAAWC,EAAc,WAAArC,EAAwB,YAAa,CAAClQ,EAAO8B,IAAU0L,EAAY,MAAOxN,EAAO8B,CAAK,EAAG,UAAWuN,CAAS,CAAA,EAC9L,EACClL,EAAA,IAAA,WAAA,CAAS,UAAW,kBAAkB8D,EAAS,YAAc,QAAU,MAAM,GAC1E,SAAA9D,EAAA,IAAC8L,GAAU,CAAA,MAAOqC,EAAc,MAAOD,EAAa,UAAWG,EAAe,WAAAtC,EAAwB,YAAa,CAAClQ,EAAO8B,IAAU0L,EAAY,OAAQxN,EAAO8B,CAAK,EAAG,UAAWuN,EAAS,CAChM,CAAA,CAAA,EACJ,SACC,MAAI,CAAA,IAAKpH,EAAS,YAAc,MAAQ,MACrC,SAAA,CAAA9D,EAAA,IAAC,MAAI,CAAA,UAAW,oBAAoB8D,EAAS,YAAc,OAAS,OAAO,GACvE,SAAA9D,MAACmJ,IAAY,MAAO,MAAO,SAAAK,EAAoB,OAAQ/B,GAAA,YAAAA,EAAO,cAAe,QAASyG,EAAa,aAAcC,EAAc,MAAQ,CAAC,EAAE,EAAE,CAAC,EAAY,IAAIvF,GAAKnB,GAAA,YAAAA,EAAO,IAAI,OAAOmB,CAAC,GAAG,EAAG,WAAa,CAAC,EAAE,EAAE,CAAC,EAAY,OAASnB,GAAA,YAAAA,EAAO,KAAK,OAAOmB,CAAC,GAAG,EAAG,YAAa,CAAC/M,EAAO8B,IAAU0L,EAAY,MAAOxN,EAAO8B,CAAK,EAAG,iBAAkB,CAAC9B,EAAOgT,EAAKC,IAASzF,EAAY,OAAQxN,EAAOgT,EAAKC,CAAI,EAAG,UAAW5D,CAAS,CAAA,EACra,EACClL,EAAA,IAAA,MAAA,CAAI,UAAW,qBAAqB8D,EAAS,YAAc,QAAU,MAAM,GACxE,eAACqF,GAAY,CAAA,MAAO,OAAQ,SAAAK,EAAoB,OAAQ/B,GAAA,YAAAA,EAAO,cAAe,QAAS0G,EAAc,aAAcD,EAAa,MAAQ,CAAC,EAAE,EAAE,CAAC,EAAY,OAASzG,GAAA,YAAAA,EAAO,KAAK,OAAOmB,CAAC,GAAG,EAAG,WAAa,CAAC,EAAE,EAAE,CAAC,EAAY,IAASA,GAAAnB,GAAA,YAAAA,EAAO,IAAI,OAAOmB,CAAC,GAAG,EAAI,YAAa,CAAC/M,EAAO8B,IAAU0L,EAAY,OAAQxN,EAAO8B,CAAK,EAAG,iBAAkB,CAAC9B,EAAOgT,EAAKC,IAASzF,EAAY,OAAQxN,EAAOgT,EAAKC,CAAI,EAAG,UAAW5D,EAAS,CACxa,CAAA,CAAA,CACJ,CAAA,CAAA,EACJ,EACClL,EAAAA,IAAAsH,GAAA,CAAmB,QAAS8F,EAAkB,MAAO,IAAMC,EAAoB,EAAK,EAAG,MAAA5F,EAAc,UAAA7L,EAAsB,mBAAqBkE,GAAS,CACtJ+M,EAAgB/M,CAAI,EACpBiN,EAAY,EAAI,CAAA,CAClB,CAAA,CAAA,EACN,CAEJ,CCjTA,MAAMgC,GAAmB,CACrB,UAAW,SACX,QAAS,OACb,EAEA,SAAwBC,GAAkB,CAAC,QAAAtK,EAAS,UAAA9I,EAAW,eAAA4I,EAAgB,WAAAN,EAAY,SAAAJ,GAMxF,WACC,KAAM,CAACmL,EAAgBC,CAAiB,EAAIvQ,EAAAA,SAAwB,IAAI,EAKlEwQ,EAAejL,GAAckL,GAAU,MACvCC,EAAgB,CAACF,GAAgB3K,GAAkB,CAAC,GAAG,MAAMA,EAAe,UAAU,MAAM,EAAE,KAAK,CAAC,EAAE,IAAIoE,GAAKA,EAAI,CAAC,EAAE,SAASpE,GAAA,YAAAA,EAAgB,QAAQ,EACvJ8K,GAAc7M,EAAA+B,GAAA,YAAAA,EAAgB,QAAhB,YAAA/B,EAAuB,KAAK8M,GAAK,CAACA,EAAE,SAAW,CAACA,EAAE,SAAW,CAACA,EAAE,QACpF,IAAIC,IAAgBrI,EAAA3C,GAAA,YAAAA,EAAgB,QAAhB,YAAA2C,EAAuB,IAAKsI,GACzCA,EAAK,QACG,eACDA,EAAK,OACJ,YACDA,EAAK,QACJ,WACDJ,GAAiBI,EAAK,UAAWH,GAAA,YAAAA,EAAa,QAC7C,gBACDG,EAAK,SACJ,0BAEA,MAET,CAAC,EAEWjL,GAAiBA,EAAe,MAAM,OAExD,eAAekL,GAAiB,CAC5B,MAAMC,EAAkBjL,EAAQ,UAAYoB,EAAE,QAAU,WAAW,EAAE,OACrE,GAAG6J,EAAkB,GACd,CAAC,MAAM9B,GAAc,CACpB,MAAO,6BACP,KAAM,uBAAuB8B,CAAe,sKAC5C,WAAY,QAAA,CAAS,EACjB,OAIN,MAAAC,EAAY,MAAMC,GAAa,CACjC,MAAO,2BACP,KAAM,8DACN,kBAAmB,CACf,KAAM,iBACN,KAAM,GACV,EACA,aAAcC,GAAS,IAAI,iBAAiB,EAAE,IAAI,CAAC,QAAS,GAAG,EAAE,MAAM,CAAE,kBAAmB,EAAG,aAAc,OAAQ,aAAc,QAAA,CAAU,EAAE,WAAW,MAAM,EAAG,EAAE,EACrK,WAAY,QAAA,CACf,EACD,GAAG,CAACF,EACA,OAGa,MAAMG,GAAmBnU,EAAWgU,CAAS,GAE5C/S,EAAA,CACV,MAAO,6BACP,KAAM,6BAAA,CACT,CACL,CAGW,eAAAmT,EAAgBP,EAAcxF,EAAmB,CAC3C,MAAMgG,GAAoBrU,EAAW6T,EAAMxF,EAAMiG,GAAgB,OAAO,GAEvErT,EAAA,CACV,MAAO,8BACP,KAAM,+BAAA,CACT,CACL,CAGJ,eAAesT,GAAgB,CACJ,MAAMC,GAAkBxU,CAAS,GAEtCiB,EAAA,CACV,MAAO,8BACP,KAAM,yBAAA,CACT,CACL,CAGJ,eAAewT,GAAkB,CAC7B,IAAIC,EAAsB,KAC1B,MAAMC,EAAiB/L,EAAgB,MAAM,OAAOoE,GAAK,CAACA,EAAE,UAAY,CAACA,EAAE,SAAW,CAACA,EAAE,SAAW,CAACA,EAAE,OAAO,EAAE,OAU7G,GATApE,EAAgB,UAAU,KAAKhF,GAAK,CAACA,EAAE,CAAC,CAAC,EACpC+Q,EAAiB,IAEKD,EAAA,2CAEnB9L,EAAgB,iBAAmB,GAAKA,EAAgB,SAAW,KACpD8L,EAAA,2CAGvBA,GAAuB,CAAC,MAAMzC,GAAc,CACvC,MAAO,8BACP,KAAM,aAAayC,CAAmB,+EACtC,WAAY,WAAA,CACf,EACD,OAGE,MAAAV,EAAY,MAAMC,GAAa,CACjC,MAAO,2BACP,KAAM,gEACN,kBAAmB,CACf,KAAM,iBACN,KAAM,GACV,EACA,aAAcrL,EAAgB,iBAC9B,WAAY,QAAA,CACf,EACGoL,IAIA,MAAMY,GAAoB5U,EAAWgU,CAAS,GAChC/S,EAAA,CACV,MAAO,0CACP,KAAM,yCAAA,CACT,EACL,CAGW,eAAA4T,EAAUC,EAAcjB,EAAc,CAC9C,MAAMkB,GAAc/U,EAAW8U,EAAMjB,CAAI,EACxCP,EAAkB,IAAI,EAERrS,EAAA,CACV,MAAO,2BACP,KAAM,2BAAA,CACT,CACL,CAGJ,eAAe+T,EAAaF,EAAc,CACnC,GAAC,MAAM7C,GAAc,CACpB,MAAO,sBACP,KAAM,uGACN,WAAY,SAAA,CACf,EAIG,GAAA,CACK,MAAMgD,GAAiBjV,EAAW8U,CAAI,GACzB7T,EAAA,CACV,MAAO,2BACP,KAAM,yBAAA,CACT,QAEAwD,EAAQ,CACCxD,EAAA,CACV,MAAO,2BACP,KAAMwD,EAAE,SAAW,yBAAA,CACtB,CAAA,CACL,CAGJ,MAAMyQ,EAAiBtM,EAAiBsL,GAAS,cAAc,KAAKtL,EAAe,gBAAgB,EAAE,YAAY,EAAE,eAAe,OAAW,CAAE,UAAW,OAAS,CAAA,EAAI,KAEvK,IAAIuM,EAAiB,GAWrB,GAVIjN,EAAS,wBACTiN,GAAkBjN,EAAS,sBAAwB,cAEnDA,EAAS,2BACLA,EAAS,sBAAyCiN,GAAA,OAASjN,EAAS,yBAA2B,SAC9FiN,EAAiBjN,EAAS,yBAA2B,kBACtDA,EAAS,uBACSiN,GAAA,eAGtBjN,EAAS,oBAAqB,CACxB,MAAAkN,EAASD,EAAe,OAAS,OAAS,GAChD,OAAQjN,EAAS,oBAAqB,CAClC,IAAK,iCAAkCiN,GAAkBC,EAAS,iCAAkC,MACpG,IAAK,qBAAsBD,GAAkBC,EAAS,qBAAsB,KAAA,CAChF,CAGG,OAAA7Q,EAAA,KAAC,MAAI,CAAA,UAAW,kBACnB,SAAA,CAAAH,EAAAA,IAACc,IACG,SAACd,MAAAgB,GAAA,CACG,SAAChB,EAAA,IAAA,MAAA,CAAI,UAAW,UAAW,MAAO,CAAC,MAAO,eACpC,SAAAkE,IAAe,QAAW/D,EAAA,KAAA,MAAA,CAAI,UAAW,OACvC,SAAA,CAAAH,EAAA,IAAC,MAAI,SAAyB,wBAAA,CAAA,EAC7BiP,EAEQ9O,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAA,qCAAqC6O,CAAc,GAAG,IAACjP,EAAAA,IAACS,EAAO,CAAA,QAAS,UAAW,KAAM,KAAM,QAAS,IAAMyO,EAAkB,IAAI,EAAI,SAAU,SAAA,CAAA,CAAA,CAAA,CAAS,EAC9J,IAAA,CAAA,CACV,EACI/O,EAAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAAAJ,EAAA,IAACS,EAAO,CAAA,UAAW,MAAO,QAAS+D,EAAiB,QAAU,UAAW,SAAU,CAAC,CAACA,EAAgB,QAASkL,EAAiB,SAA4B,4BAAA,EAC3J1P,EAAAA,IAACS,EAAO,CAAA,UAAW,MAAO,QAAQ,UAAU,QAAS,IAAMvE,GAAsBN,CAAS,EAAI,SAAwB,uBAAA,CAAA,CAAA,EAC1H,CAAA,CACJ,CACJ,CAAA,EACJ,SACCkF,GACG,CAAA,SAAA,CAACX,EAAAA,KAAAa,GAAA,CAAI,GAAG,IACH,SAAA,CAAiB+P,EAAA5Q,EAAA,KAAC,MAAI,CAAA,UAAW,kCAAmC,SAAA,CAAA,yBAAuB4Q,CAAA,CAAA,CAAe,EAAS,KACpH5Q,EAAAA,KAAC,QAAM,CAAA,UAAW,yBACd,SAAA,CAACH,EAAA,IAAA,QAAA,CACG,gBAAC,KACG,CAAA,SAAA,CAAAA,EAAA,IAAC,MAAI,SAAY,WAAA,CAAA,EACjBA,EAAA,IAAC,MAAI,SAAW,UAAA,CAAA,IACdwE,GAAA,YAAAA,EAAgB,mBAAoB,GAAK,EACvCrE,OAAAC,EAAAA,SAAA,CAAA,SAAA,CAAAJ,EAAA,IAAC,MAAI,SAAY,WAAA,CAAA,EACjBA,EAAAA,IAAC,MAAI,SAAY,WAAA,CAAA,CAAA,CACrB,CAAA,EAAMA,EAAAA,IAAA,KAAA,CAAI,SAAW,UAAA,CAAA,CAAA,CAAA,CACzB,CACJ,CAAA,EACAA,EAAAA,IAAC,SACI,SAAgBwE,GAAA,YAAAA,EAAA,UAAU,IAAI,CAAC,EAAGyM,IAAS9Q,EAAAA,KAAC,KACzC,CAAA,SAAA,CAACH,EAAAA,IAAA,KAAA,CAAI,WAAK,CAAE,CAAA,EACX,EAAE,IAAI,CAACuP,EAAG/G,IAAA,qBAAS,KACf,CAAA,SAAA,EAAA/F,EAAA+B,EAAe,MAAM,KAAK0M,GAAMA,EAAG,QAAU3B,CAAC,IAA9C,YAAA9M,EAAiD,cACjD0M,GAAgB3G,GAAO,EAAM+G,EAAMpP,EAAAA,KAAAC,EAAAA,SAAA,CAAA,SAAA,CAAAJ,EAAA,IAAC,KAAG,EAAA,EAAEA,EAAA,IAACS,EAAA,CAAQ,GAAGsO,GAAkB,QAAS,SAC/B,QAAS,IAAM6B,EAAaK,EAAO,CAAC,EAAG,SAAA,QAAA,CAAA,CAAM,CAAA,CAAS,EAClGjR,EAAA,IAACS,EAAA,CAAQ,GAAGsO,GAAkB,QAAS,kBAAmB,SAAU,CAAC,CAACQ,EAC9D,QAAS,IAAML,EAAkB+B,EAAO,CAAC,EAAG,SAAA,YAAA,CAAA,EAAwB,IAAA,CAAA,EAL1DzI,CAM5B,EAAK,CAAA,CAR4C,EAAAyI,CASrD,EACJ,CAAA,CAAA,EACJ,EACC9B,EAAe,KAAOhP,OAAC,MAAI,CAAA,UAAW,UAAW,MAAO,CAAC,MAAO,aAAA,EAC7D,SAAA,CAAAH,EAAA,IAACS,EAAO,CAAA,UAAW,MAAO,QAAU+D,EAA2B,UAAV,QAAqB,SAAU,CAACA,EAAgB,QAAS2L,EAAgB,SAAQ,QAAA,EACrInQ,EAAA,IAAAS,EAAA,CAAO,UAAW,MAAO,QAAU+D,EAA2B,UAAV,QAAqB,SAAU,CAACA,EAAgB,QAAS6L,EAAkB,SAAoB,mBAAA,CAAA,CAAA,EACxJ,EACCrQ,EAAA,IAAA,MAAA,CAAI,UAAW,sBACZ,SAACA,EAAAA,IAAA,OAAA,CAAM,SAAkB8Q,GAAA,CAAC3B,EAAe,6BAA6B2B,CAAc,GAAK,KAAK,CAClG,CAAA,CAAA,EACJ,QACC9P,GAAI,CAAA,GAAG,IACJ,SAACb,EAAA,KAAA,QAAA,CAAM,UAAW,yBACd,SAAA,CAACH,EAAA,IAAA,QAAA,CACG,gBAAC,KACG,CAAA,SAAA,CAAAA,EAAA,IAAC,MAAI,SAAQ,OAAA,CAAA,EACbA,EAAA,IAAC,MAAI,SAAU,SAAA,CAAA,EACfA,EAAA,IAAC,MAAI,SAAQ,OAAA,CAAA,QACZ,KAAG,CAAA,MAAO,CAAC,MAAO,SAAW,SAAU,UAAA,EACvCmP,EAAe,KACZhP,EAAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAAAJ,EAAAA,IAAC,MAAG,MAAO,CAAC,MAAO,SAAW,SAAW,WAAA,QACxC,KAAG,CAAA,MAAO,CAAC,MAAO,OAAA,EAAW,SAAU,SAAA,CAAA,CAAA,CAC5C,CAAA,CAAA,CAAA,CACJ,CACJ,CAAA,EACAA,EAAAA,IAAC,SACI,UAAgBoH,EAAA5C,GAAA,YAAAA,EAAA,QAAA,YAAA4C,EAAO,IAAI,CAACqI,EAAMjH,IAAQrI,EAAAA,KAAC,KACxC,CAAA,SAAA,CAACH,EAAAA,IAAA,KAAA,CAAI,WAAK,IAAK,CAAA,EACfA,EAAAA,IAAC,KAAI,CAAA,SAAAyP,EAAK,aAAc,CAAA,EACxBzP,EAAAA,IAAC,KAAI,CAAA,SAAAyP,EAAK,IAAK,CAAA,EACdD,EAAchH,CAAG,IAAM2G,EAAe,CAACF,EAAkBzK,EAAe,UAAaA,EAAe,UAAU,OAASA,EAAe,kBAAsBxE,EAAAA,IAAC,KAAG,CAAA,QAASmP,EAAe,EAAI,EAAI,SAAcK,EAAAhH,CAAG,CAAE,CAAA,EAChNrI,EAAA,KAAAC,EAAA,SAAA,CAAA,SAAA,CAAAJ,MAAC,KACG,CAAA,SAAAA,EAAA,IAACS,EAAA,CAAQ,GAAGsO,GACJ,QAAS,SAAY,CACjBI,GAAgBF,EAAiB,MAAMwB,EAAUxB,EAAgBQ,EAAK,MAAM,EAAI,MAAMO,EAAgBP,EAAK,OAAQ0B,GAAY,MAAM,CACzI,EACH,SAAA,SAAA,CAAA,EAET,EACChC,EAAe,KAAOnP,EAAAA,IAAC,KACpB,CAAA,SAAAA,EAAA,IAACS,EAAA,CAAQ,GAAGsO,GACJ,QAAS,IAAMiB,EAAgBP,EAAK,OAAQ0B,GAAY,OAAO,EAClE,SAAA,UAAA,CAAA,CAET,CAAA,CAAA,EACJ,EACC1B,EAAK,SAAYD,EAAchH,CAAG,IAAM,CAAC6G,GAAiBI,EAAK,UAAWH,GAAA,YAAAA,EAAa,UAAYH,EAAe,WAAQ,KACvH,CAAA,SAAAnP,EAAA,IAACS,EAAA,CAAQ,GAAGsO,GACJ,QAAS,IAAMiB,EAAgBP,EAAK,OAAQ0B,GAAY,MAAM,EAC9D,MAAM,0CACT,SAAA,SAAA,CAAA,CAET,CAAA,CAAA,GA1BgD1B,EAAK,MA2BzD,EACJ,CAAA,CAAA,CAAA,CACJ,CAEJ,CAAA,CAAA,CACJ,CAAA,CAAA,EACJ,CACJ,CC3SA,SAAS2B,GAAUC,EAAqB,CACpC,KAAM,CAAE,MAAAC,EAAO,SAAAC,EAAU,SAAAC,EAAU,aAAAC,EAAc,GAAApU,CAAA,EAAOgU,EAAM,MAC9D,OAAIC,GAAS,KACF,KAIPtR,EAAA,IAAC0R,GAAI,KAAJ,CACG,SAAA1R,EAAA,IAAC0R,GAAI,KAAJ,CAAS,GAAI,SACV,SAAAH,EACA,SAAAC,EACA,GAAAnU,EACA,UAAWoU,EAAe,SAAAH,CAAA,CAAA,EAClC,CAER,CAGA,SAAwBK,GAAW,CAAE,SAAA1W,EAAU,UAAA2W,EAAW,SAAAC,EAAU,GAAGC,GAAgD,CAC5G,OAAA3R,EAAA,KAAC4R,GAAA,CACJ,UAAAH,EACA,SAAAC,EAEA,SAAA,CAAA7R,EAAA,IAAC0R,GAAK,CAAA,GAAGI,EAAU,QAAQ,OAAO,KAAK,UAAU,GAAG,MAC/C,SAAAE,GAAI/W,EAAUmW,EAAS,EAC5B,EAECpR,EAAA,IAAAiS,GAAA,CACI,SAAID,GAAA/W,EAAmBoW,GAAA,CACpB,MAAMa,EAAa,CAAE,GAAGb,EAAM,KAAM,EAEpC,OAAOa,EAAW,MAClB,OAAOA,EAAW,SAClB,OAAOA,EAAW,aAElB,MAAMjX,EAAWiX,EAAW,SAC5B,cAAOA,EAAW,SAEXlS,MAACmS,IAAS,GAAGD,EAChB,eAACE,GACI,CAAA,SAAAnX,EACL,CACJ,CAAA,CAAA,CACH,CACL,CAAA,CAAA,CAAA,CACJ,CACJ,CC9CA,SAAwBoX,GAAoB,CAAC,aAAAC,EAAc,kBAAA7N,GAGxD,CACC,KAAM,CAAC8N,EAAcC,CAAe,EAAI7T,EAAAA,SAAiC,CAAA,CAAE,EAEpE,OAAAqB,MAAC,MAAI,CAAA,UAAU,gBAAiB,SAAA,OAAO,QAAQsS,CAAY,EAAE,KAAK,CAAC,CAACG,CAAK,EAAG,CAACC,CAAK,IAAMA,EAAM,cAAcD,CAAK,CAAC,EAAE,IAAI,CAAC,CAACE,EAAMC,CAAO,IAAM,CAChJ,GAAGL,EAAaI,CAAI,GAAKC,EAAQ,OACtB,OAAA,KAEX,MAAMC,EAASD,EAAQ,OAA+B,SAAUE,EAAKC,EAAM,CACnE,OAAAD,EAAAC,EAAK,IAAI,EAAID,EAAIC,EAAK,IAAI,GAAK,EAAID,EAAIC,EAAK,IAAI,EAAI,EACjDD,CACX,EAAG,EAAE,EACE,OAAA3S,EAAA,KAACuC,IAAiB,QAAQ,UAAU,YAAW,GAAC,QAAS,IAAM8P,EAAuB1P,GAAA,OAAO,OAAO,GAAIA,EAAK,CAAC,CAAC6P,CAAI,EAAGC,EAAQ,MAAA,CAAO,CAAC,EACzI,SAAA,CAACzS,EAAAA,KAAAuC,GAAM,QAAN,CAAc,SAAA,CAAA,kCAAgCiQ,EAAK,GAAA,EAAC,SACpD,IAAE,CAAA,SAAA,CAAA,4DACqD,KAAE,EAAA,EAAE,mBACvC,OAAO,QAAQE,CAAM,EAAE,IAAI,CAAC,CAACpD,EAAMuD,CAAK,IAAM,GAAGvD,CAAI,KAAKuD,CAAK,GAAG,EAAE,KAAK,IAAI,CAAA,EAClG,EAEAhT,MAACS,GAAO,QAAS,IAAMgE,EAAqB,EAAA,QAAQ,eAAe,SAEnE,SAAA,CAAA,CAAA,CAAA,EATekO,CAUnB,CACH,CAAA,EAAE,CACP,CCbA,SAAwBM,GAAc,CAAC,aAAAX,EAAc,KAAAY,GAGlD,CACC,cAAQrS,EAAM,CAAA,KAAI,GAAC,OAAQqS,EAAM,UAAW,YACxC,SAAA,CAAClT,EAAAA,IAAAa,EAAM,OAAN,CAAa,YAAW,GACrB,eAACA,EAAM,MAAN,CAAY,SAAA,eAAA,CAAa,CAC9B,CAAA,EAEAb,MAACa,EAAM,KAAN,CACI,SAAA,OAAO,QAAQyR,CAAY,EAAE,KAAK,CAAC,CAACG,CAAK,EAAG,CAACC,CAAK,IAAMA,EAAM,cAAcD,CAAK,CAAC,EAAE,IAAI,CAAC,CAACE,EAAMC,CAAO,IAEhGzS,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAD,OAAC,IAAE,CAAA,SAAA,CAAA,SAAOwS,CAAA,EAAK,EACdC,EAAQ,IAAI,CAACvS,EAAGmI,IAASxI,EAAAA,IAAA,MAAA,CAAe,SAAK,KAAA,UAAUK,EAAG,OAAW,CAAC,CAAA,EAApCmI,CAAsC,CAAM,CAAA,EACnF,CACH,CACL,CAAA,CAAA,EACJ,CACJ,CCCA,eAAelE,GAAW1I,EAAmB,CACrC,MAAMiS,GAAc,CACpB,MAAO,6BACP,KAAM,yHACN,WAAY,kBAAA,CACf,IAIG,MAAMsF,GAAevX,CAAS,GAChBiB,EAAA,CACV,MAAO,6BACP,KAAM,4BAAA,CACT,EAET,CAEA,SAASuW,GAAoBC,EAAiCC,EAA2B,CACrF,OAAQA,EAAQ,KAAM,CAClB,KAAKC,EAAY,KAAa,MAAA,GAC9B,KAAKA,EAAY,cAAsB,MAAA,GACvC,KAAKA,EAAY,gBAAyB,OAAAD,EAAkC,SAAUD,GAAA,YAAAA,EAAW,QACjG,KAAKE,EAAY,KAAc,OAAAD,EAAwB,cAAgBD,EAAU,OACjF,KAAKE,EAAY,cAAuB,OAAAD,EAA+B,QAAUD,EAAU,MAC3F,KAAKE,EAAY,cAAsB,MAAA,CAACF,EAAU,IAAI,KAAMA,EAAU,KAAK,IAAI,EAAE,SAAUC,EAAqC,QAAQ,EACxI,KAAKC,EAAY,sBAA8B,MAAA,EAAA,CAEvD,CAEA,MAAMC,GAAa,OAAO,SAAS,KAAK,QAAQ,IAAK,EAAE,GAAK,WAEpC,SAAAC,GAAa,CAAC,UAAA7X,EAAW,OAAAmI,EAAQ,WAAA1F,EAAY,SAAA4E,EAAU,qBAAA1E,EAAsB,UAAAC,EAAW,WAAA0E,GAE7G,WACC,KAAM,CAACwQ,EAAsBC,CAAuB,EAAIhV,EAAAA,SAAS,EAAK,EAChE,CAACiV,EAAKC,CAAM,EAAIlV,EAAAA,SAAS6U,EAAU,EACnC,CAACM,EAAgBC,CAAiB,EAAIpV,EAAAA,SAAS,CAAC,EAChD,CAACqV,EAAiBC,CAAkB,EAAItV,EAAAA,SAAS6U,GAAW,WAAW,MAAM,EAAI,SAASA,GAAW,MAAM,GAAG,EAAE,CAAC,CAAC,EAAI,EAAE,EACxH,CACF,YAAAjP,EACA,YAAA2P,EACA,UAAAC,EACA,eAAAC,EACA,aAAA9B,EACA,SAAAxO,EACA,YAAA6C,EACA,eAAAC,EACA,eAAApC,EACA,YAAAH,EACA,WAAAL,EACA,WAAAI,EACA,YAAAhG,EACA,YAAAiW,EACA,YAAAlQ,EACA,UAAAmQ,EACA,UAAAhO,GACA,aAAAiO,EAAA,EACAC,GAAqB5Y,EAAWqH,EAAU,IAAM,CAChDgR,EAAmB,EAAE,EACrBQ,EAAQ,UAAU,CAAA,CACrB,EAED,SAASA,EAAQb,EAAsB,CACnC,OAAO,SAAS,KAAOA,EACvBC,EAAOD,CAAa,CAAA,CAIxB,MAAMlP,EAAUyP,EAAU,QACpBjQ,EAAaiQ,EAAU,WACvBO,EAAiBhQ,EAAQ,OAAOoB,GAAKA,EAAE,QAAU,aAAeA,EAAE,QAAU,QAAQ,EACpF6O,GAAejQ,EAAQ,KAAUoB,GAAAA,EAAE,SAAWkO,CAAe,EAGnE,eAAezN,GAAUqO,EAAa,CAClCX,EAAmBW,CAAG,EACdH,EAAA,QAAQG,CAAG,EAAE,CAAA,CAGzB,MAAMC,GAAe,CACjB,YAAa/Q,EAAS,YACtB,SAAUE,EACV,UAAAsC,GACA,UAAA1K,EACA,WAAAyC,EACA,UAAAkI,GACA,YAAcqO,GAAgBpO,GAAY5K,EAAWgZ,EAAKlQ,CAAO,EACjE,UAAW,MAAOkQ,GAAgB,CAC1B,MAAMnO,GAAU7K,EAAWgZ,CAAG,GAChB/X,EAAA,CACV,MAAO,wBACP,KAAM,oDAAA,CACT,CAET,EACA,YAAa,MAAO+X,GAAgB,CAEhC,MAAME,GADQpQ,EAAQ,KAAUoB,IAAAA,GAAE,SAAW8O,CAAG,EACvB,KACrB,MAAM/G,GAAc,CACpB,MAAO,WAAWiH,EAAS,IAC3B,KAAM,sDAAsDA,EAAS,IACrE,WAAY,eAAA,CACf,GAGD,MAAMxO,GAAUsO,CAAG,CACvB,EACA,YAAAjO,EACA,eAAAC,CACJ,EAEMmO,EAAe,CAAC,GAAGrQ,CAAO,EAAE,KAAK,CAACsQ,EAAI9N,IAAOA,EAAG,MAAQ8N,EAAG,KAAK,EAAE,CAAC,EAEnEC,IAAmBxS,GAAA4B,EAAY,cAAZ,YAAA5B,GAAyB,UAAY,CAAC,CAACmG,GAAG,GAC7DsM,EAAkBD,IAAoB5Q,EAAY,eAAiB8Q,GAAsBF,GAAkB5Q,EAAY,eAAgB+O,GAAqB7O,CAAW,GAAI4C,GAAA9C,EAAY,iBAAZ,YAAA8C,GAA4B,KAAKiO,IAC5MC,EAAeC,GAAS,CAC1B,QAASJ,GAAA,YAAAA,EAAiB,aAC1B,WAAYA,GAAA,YAAAA,EAAiB,kBAAmB,GAAK,IACrD,YAAA3Q,CAAA,CACH,EAEKgR,EAAavV,EAAAA,IAAA,MAAA,CAAI,UAAW,gCAC9B,gBAAC,KAAI,CAAA,SAAA,CAAA,iBAAiB,IAACA,EAAAA,IAAC,QAAK,UAAW,sBAAwB,WAAW,UAAUiD,CAAQ,GAAK,EAAG,CAAA,EAAO,IAAEiB,IAAe,OAAS,eAAiB,GAAG,IAAEA,IAAe,WAAa,sBAAwB,EAAA,CAAA,CAAG,CACvN,CAAA,EAEMmB,EAAqB,CAAC,EAAElB,IAAeA,GAAA,YAAAA,EAAa,SAAU,WAAYA,GAAA,YAAAA,EAAa,SAAU,aAEvG,OACIhE,EAAA,KAAAC,WAAA,CAAA,SAAA,CAACD,EAAAA,KAAA,MAAA,CAAI,UAAW,kBAAkB+D,IAAe,QAAUA,IAAe,WAAa,OAAS,EAAE,GAC7F,SAAA,CAAAqR,EACArB,EAAc,KAAOlU,MAAC,MAAI,CAAA,UAAW,4DAA8D,SAAkB,kBAAA,EACtHA,EAAAA,IAACwV,IAAe,YAAAnB,EAA0B,YAAAlQ,EAA0B,eAAgBmQ,EAAW,aAAAe,EAA4B,QAASH,EAAiB,SAAApR,CAAmB,CAAA,EACvKA,EAAS,UAAa9D,EAAAA,IAAA,MAAA,CAAI,UAAW,iCAAkC,MAAO,CAAC,OAAQ,KAAQ,EAAA,SAAA,kDAAA,CAAgD,EAAS,KACzJA,EAAA,IAACyV,GAAA,CAAc,YAAApB,EAA0B,YAAAlQ,EAA0B,aAAAwQ,GACpD,aAAc,CAACe,EAAQC,IAAoBC,GAAaha,EAAW8Z,EAAQC,CAAe,EAC1F,eAAgB,CAACD,EAAQG,IAASC,GAAela,EAAW8Z,EAAQG,CAAI,EACxE,WAAaH,GAAWK,GAAWna,EAAW8Z,CAAM,EACpD,UAAYA,GAAWM,GAAUpa,EAAW8Z,CAAM,EAClD,WAAaA,GAAWO,GAAWra,EAAW8Z,CAAM,EACpD,WAAaA,GAAWQ,GAAWta,EAAW8Z,CAAM,EACpD,mBAAqBA,GAAWlP,GAAY5K,EAAW8Z,EAAQhR,EAAS,EAAI,EAC5E,aAAc6P,GAAe,EAC7B,cAAe,IAAMjO,GAAUiO,EAAY,EAC3C,eAAgB,OAAO,OAAOH,CAAc,EAC5C,qBAAsB1P,EAAQ,OAAS,GAAKA,EAAQ,CAAC,EAAE,OAAS,SAAWtG,EAAY,KAAUmB,GAAAA,EAAE,KAAK,OAAO,EAC/G,SAAAuE,EAAoB,WAAAE,EAAwB,cAAe,EAAA,CAAA,CAAO,EACrF,EAEA7D,EAAA,KAACwR,GAAA,CACG,UAAWiC,EACX,SAAUa,EACV,UAAU,cAEV,SAAA,CAAAzU,MAACmW,EAAI,CAAA,SAAS,WAAW,MAAO,YAC5B,SAACnW,EAAAA,IAAAmG,GAAA,CAAS,QAAAzB,EAAmB,GAAGmQ,GAAc,SAAU3Q,IAAe,OAAQ,mBAAAmB,CAAuC,CAAA,EAC1H,QACC8Q,EAAI,CAAA,SAAS,aAAa,aAAQ,OAAM,CAAA,SAAA,CAAA,sBAAsB,IAAEzB,EAAe,OAAS,EAAI1U,EAAAA,IAAC,QAAK,UAAW,8BAAgC,SAAe0U,EAAA,MAAO,CAAA,EAAU,IAAK,CAAA,CAAA,EAC/K,eAACvO,GAAS,CAAA,QAASuO,EAAiB,GAAGG,GAAc,mBAAAxP,EAAwC,CACjG,CAAA,EACArF,EAAA,IAACmW,EAAI,CAAA,SAAU,QAAQnC,CAAe,GAAI,MAAO,cAAe,SAAU,CAACW,GACvE,SAAA3U,EAAA,IAACsM,GAAA,CAAU,SAAAxI,EAAoB,MAAO6Q,GAAc,UAAA/Y,EAAsB,WAAAoI,EAC/D,SAAU,IAAMyQ,EAAQ,MAAM,EAC9B,aAAeiB,GAAmBlJ,GAAa5Q,EAAW8Z,CAAM,EAChE,YAAa,CAACA,EAAgBU,IAA0B5P,GAAY5K,EAAW8Z,EAAQhR,EAAS,GAAO0R,CAAY,EACnH,mBAAA/Q,CAAA,CAAA,EAEf,EACArF,EAAAA,IAACmW,GAAI,SAAS,SAAS,MAAO,gBAAiB,SAAU,CAACrS,EAAS,YAC/D,eAACwI,GAAU,CAAA,OAAM,GAAC,UAAA1Q,EAAsB,SAAAkI,EAAoB,MAAOK,EAAa,oBAAqBoC,GAAU,CACnH,CAAA,EACAvG,EAAAA,IAACmW,GAAI,SAAS,WAAW,MAAO,YAAa,SAAUlT,EAAW,EAC9D,SAAAjD,EAAA,IAAC6D,GAAA,CAAS,UAAAjI,EAAsB,SAAAkI,EAAoB,eAAAU,EAC1C,OAAAT,EAAgB,YAAAI,EAA0B,WAAAD,EAAwB,YAAAG,EAClE,WAAY,IAAMC,GAAW1I,CAAS,EACtC,WAAAwI,EAAwB,YAAAG,EAA0B,WAAAP,EAClD,kBAAmB,OAAO,KAAKsO,CAAY,EAAE,OAAS,EAAI,IAAMqB,EAAwB,EAAI,EAAI,OAAW,SAAU,IAAMc,EAAQ,MAAM,EACzI,qBAAAlW,EAA4C,QAAAmG,EAAkB,kBAAmBgQ,EAAe,MAAA,CAAA,EAC9G,EACA1U,EAAA,IAACmW,EAAI,CAAA,SAAS,WAAW,MAAO,sBAAuB,SAAUjS,IAAe,QAAUA,GAAc,YAAeA,GAAc,SAAW,CAACJ,EAAS,sBAAyBE,GAAcf,EAAW,GAAK1E,EAC7M,SAAAyB,EAAA,IAACgP,GAAkB,CAAA,UAAApT,EAAsB,QAAA8I,EAAkB,eAAAF,EAAgC,WAAAN,EAAwB,SAAAJ,CAAoB,CAAA,EAC3I,EACC9D,MAAAmW,EAAA,CAAI,SAAS,QAAQ,MAAO,gBACzB,SAAAnW,EAAA,IAACgD,GAAA,CAAY,UAAApH,EAAsB,YAAAwC,EAA0B,WAAAC,EAAwB,SAAA4E,EAAoB,iBAAkB,CAAC,CAACa,EAAS,iBACzH,qBAAAvF,EAA4C,WAAA2E,EAAwB,UAAA1E,CAAA,CAAA,EACrF,EACCwB,MAAAmW,EAAA,CAAI,SAAS,SAAS,MAAO,kBAC1B,SAACnW,EAAAA,IAAA,MAAA,CAAI,UAAW,MACZ,SAACA,EAAA,IAAAqW,GAAA,CAAA,CAAc,CACnB,CAAA,EACJ,SACCF,EAAI,CAAA,SAAS,OAAO,aAAQ,OAAM,CAAA,SAAA,CAAA,QAAQ,IAAErC,EAAiB,EAAI9T,EAAA,IAAC,QAAK,UAAW,+BAAiC,WAAe,EAAU,IAAA,CAAK,CAAA,EAC9I,SAAA,CAACA,EAAAA,IAAA,MAAA,CAAI,IAAMwD,GAAOA,GAAMA,EAAG,YAAY,SAAS,eAAe,iBAAiB,CAAE,CAAG,CAAA,EACrFxD,MAACsW,IAAY,kBAAAvC,CAAqC,CAAA,CAAA,CACtD,CAAA,CAAA,CAAA,CACJ,EAEA5T,EAAAA,KAAC,MAAI,CAAA,UAAU,SACX,SAAA,CAAAH,EAAA,IAAC,MAAA,CAAI,UAAW,mBAAmBoE,EAAW,MAAM,GAC/C,MAAOA,EAAW,aAAeA,EAAW,aAAe,EAAI;AAAA,gBAAuB,IAAI,KAAKA,EAAW,YAAY,EAAE,mBAAuB,EAAA,GAAA,CAAK,QACxJ,OAAM,CAAA,SAAAmS,GAASxB,GAAA,YAAAA,EAAc,eAAgBA,GAAA,YAAAA,EAAc,KAAK,CAAE,CAAA,CAAA,EACvE,QAEC1C,GAAoB,CAAA,aAAAC,EAA4B,kBAAmB,IAAMqB,EAAwB,EAAI,EAAG,EACxGD,QAAwBT,GAAc,CAAA,aAAAX,EAA4B,KAAM,IAAMqB,EAAwB,EAAK,CAAA,CAAE,EAAK,IAAA,EACvH,CACJ,CC5OA,MAAM6C,GAAOC,GAAAA,WAAW,SAAS,eAAe,cAAc,CAAC,EAE/DD,GAAK,OAAQxW,EAAAA,IAAAoS,GAAA,CACT,SAACpS,MAAA0W,GAAA,CAAoB,OAAQlV,GACzB,SAAAxB,EAAA,IAACyT,GAAA,CACG,UAAW,OAAO,UAClB,OAAQ,OAAO,OACf,WAAY,OAAO,WACnB,SAAU,OAAO,SACjB,qBAAsB,OAAO,qBAC7B,WAAY,OAAO,WACnB,UAAW,OAAO,SAAA,CACtB,CACJ,CAAA,CACJ,CAAA,CAAgB","x_google_ignoreList":[0]}