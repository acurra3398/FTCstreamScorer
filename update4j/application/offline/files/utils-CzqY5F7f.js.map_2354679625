{"version":3,"file":"utils-CzqY5F7f.js","sources":["../../../../../../.yarn/__virtual__/first-common-virtual-b44088cd3d/1/FIRSTCommon/src/main/javascript/utils.ts"],"sourcesContent":["import {Dispatch, SetStateAction, useCallback, useState} from \"react\";\n\nexport function jsonPost(url: string, payload: any) {\n    return fetch(url, {method: 'POST', headers: {\"Content-Type\": \"application/json\"}, body: JSON.stringify(payload)})\n}\n\nexport function jsonPut(url: string, payload: any) {\n    return fetch(url, {method: 'PUT', headers: {\"Content-Type\": \"application/json\"}, body: JSON.stringify(payload)})\n}\n\n// stolen from https://github.com/microsoft/TypeScript/issues/37663#issuecomment-606110995\nexport type Initializer<T> = T extends Function ? never : (T | (() => T))\n\nexport function useLocalStorageState<T>(key: string, fallbackState?: Initializer<T>) {\n    return usePersistedState<T>(window.localStorage, key, fallbackState)\n}\n\nfunction usePersistedState<T>(store: Storage, key: string, fallbackState?: Initializer<T>): [T, Dispatch<SetStateAction<T>>] {\n    const [state, updateState] = useState<T>(() => {\n        const savedItem = store.getItem(key)\n        if (savedItem) {\n            return JSON.parse(savedItem)\n        } else {\n            return (typeof fallbackState == 'function' ? fallbackState() : fallbackState)\n        }\n    })\n\n    // The key really ought not change, but it will be less bad if we start writing to a new location than\n    // if we keep writing to the old one\n    const customSetValue = useCallback((newValue: T | ((prev: T) => T)) => {\n        updateState((valueWas) => {\n            const computedValue = newValue instanceof Function ? newValue(valueWas) : newValue;\n            store.setItem(key, JSON.stringify(computedValue));\n            return computedValue;\n        })\n    }, [key]);\n\n    return [state, customSetValue]\n}\n\nexport function useSessionStorageState<T>(key: string, fallbackState?: Initializer<T>) {\n    return usePersistedState<T>(window.sessionStorage, key, fallbackState)\n}"],"names":["useLocalStorageState","key","fallbackState","usePersistedState","store","state","updateState","useState","savedItem","customSetValue","useCallback","newValue","valueWas","computedValue"],"mappings":"6WAagB,SAAAA,EAAwBC,EAAaC,EAAgC,CACjF,OAAOC,EAAqB,OAAO,aAAcF,EAAKC,CAAa,CACvE,CAEA,SAASC,EAAqBC,EAAgBH,EAAaC,EAAkE,CACzH,KAAM,CAACG,EAAOC,CAAW,EAAIC,WAAY,IAAM,CACrC,MAAAC,EAAYJ,EAAM,QAAQH,CAAG,EACnC,OAAIO,EACO,KAAK,MAAMA,CAAS,EAEnB,OAAON,GAAiB,WAAaA,EAAkB,EAAAA,CACnE,CACH,EAIKO,EAAiBC,cAAaC,GAAmC,CACnEL,EAAaM,GAAa,CACtB,MAAMC,EAAgBF,aAAoB,SAAWA,EAASC,CAAQ,EAAID,EAC1E,OAAAP,EAAM,QAAQH,EAAK,KAAK,UAAUY,CAAa,CAAC,EACzCA,CAAA,CACV,CAAA,EACF,CAACZ,CAAG,CAAC,EAED,MAAA,CAACI,EAAOI,CAAc,CACjC"}