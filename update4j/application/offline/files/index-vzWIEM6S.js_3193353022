var C=Object.defineProperty;var y=(i,t,s)=>t in i?C(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var l=(i,t,s)=>y(i,typeof t!="symbol"?t+"":t,s);try{let i=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new i.Error().stack;t&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[t]="a4a3a420-d999-4501-9035-38e264fe0fad",i._sentryDebugIdIdentifier="sentry-dbid-a4a3a420-d999-4501-9035-38e264fe0fad")}catch{}var I=(i=>(i[i.POINTER=0]="POINTER",i[i.SINGLE=1]="SINGLE",i[i.FILL=2]="FILL",i[i.GRAB=3]="GRAB",i[i.TEXT=4]="TEXT",i[i.TEXT_ROT=5]="TEXT_ROT",i[i.DELETE=6]="DELETE",i[i.ASSIGN=7]="ASSIGN",i[i.CLEAR=8]="CLEAR",i[i.INSPECT=9]="INSPECT",i))(I||{}),p=(i=>(i[i.OPEN=0]="OPEN",i[i.BOUNDARY=1]="BOUNDARY",i[i.PIT=2]="PIT",i[i.FIELD=3]="FIELD",i[i.FIELD_ROT=4]="FIELD_ROT",i[i.OBJECT=5]="OBJECT",i[i.LABEL=6]="LABEL",i))(p||{}),x=(i=>(i[i.NUMBER=1]="NUMBER",i[i.ADDRESS=2]="ADDRESS",i[i.TEAM=3]="TEAM",i[i.COLOR=4]="COLOR",i))(x||{}),w=(i=>(i[i.ASCENDING=0]="ASCENDING",i[i.DESCENDING=1]="DESCENDING",i[i.RANDOM=2]="RANDOM",i[i.CLEAR=3]="CLEAR",i))(w||{});const g={x:0,y:0},c=class c{constructor({id:t,textSelectCallback:s,pitColorCallback:e,minView:r}){l(this,"canvas");l(this,"g");l(this,"highlighted");l(this,"cursor",0);l(this,"hover",null);l(this,"dragging",!1);l(this,"dragStart",null);l(this,"dragCurrent",null);l(this,"selectStart",null);l(this,"selectEnd",null);l(this,"grabbedItem",null);l(this,"grabOffset",g);l(this,"grabCurrent",g);l(this,"pointerSelected",[]);l(this,"pointerSelectStart",null);l(this,"pointerCurrent",null);l(this,"editing",!1);l(this,"assigning",!1);l(this,"cellType",0);l(this,"zoom",1);l(this,"undoStack",[]);l(this,"redoStack",[]);l(this,"objects",[]);l(this,"pitClickCallback");l(this,"pitColorCallback");l(this,"pitLabelMode",1);l(this,"pitAssignCallback");l(this,"assignError");l(this,"CELL_SIZE",c.BASE_CELL_SIZE);l(this,"minSize",!1);l(this,"printing",!1);l(this,"displayTeamNumbers",{});l(this,"activeGroup","A");l(this,"increment",1);l(this,"textSelectCallback");l(this,"clickListener",t=>{let s=this.getGridCoords({x:t.offsetX,y:t.offsetY});if(this.editing)if(this.cursor===1){let e=this.getObject(this.cellType,s,!0);if(this.getIntersectingObjects(e).length===0&&this.cellType===0)return;this.objects.push(e),this.pushUndo({op:"ADD",objects:[e]}),this.draw()}else if(this.cursor===6){const e=this.getIntersectingObjects(Object.assign({w:0,h:0},s));if(e.length>0){let r=e[e.length-1];r.ind=this.objects.indexOf(r),r.ind>-1&&this.objects.splice(r.ind,1)}this.renumberObjects(),this.pushUndo({op:"REMOVE",objects:e}),this.draw()}else if(this.cursor===4||this.cursor==5){const e=this.getIntersectingObjects(Object.assign({w:0,h:0},s)).filter(r=>c.CELL_PROPS[r.type].labelAllowed);e.length&&this.textSelectCallback&&this.textSelectCallback(e[0],r=>{this.pushUndo({op:"SET_LABEL",obj:e[0],old:e[0].label,label:r}),e[0].label=r,e[0].labelRotated=this.cursor==5,this.draw()})}else this.cursor===3||this.cursor;else if(!this.assigning||this.cursor===9){const e=this.getIntersectingObjects(Object.assign({w:0,h:0},s)).filter(r=>r.type===2);if(e.length===0)return;this.pitClickCallback&&this.pitClickCallback(e[0])}});l(this,"mouseDownListener",t=>{if(!this.editing&&!this.assigning)return;const s={x:t.offsetX,y:t.offsetY},e=Object.assign(this.getGridCoords(s),{w:0,h:0});if(this.cursor===2||this.cursor===7||this.cursor===8)this.dragging=this.cursor===2||this.cursor===8||this.cursor===7&&(this.pitLabelMode===2||this.pitLabelMode===4),this.dragStart=s,this.dragCurrent=this.dragStart,this.selectStart=null,this.selectEnd=null;else if(this.cursor===3){const r=this.getIntersectingObjects(e);r.length>0&&(this.grabbedItem=r[r.length-1],this.grabOffset=this.grabbedItem?{x:t.offsetX-this.grabbedItem.x*this.CELL_SIZE,y:t.offsetY-this.grabbedItem.y*this.CELL_SIZE}:g,this.grabCurrent=s,this.setCursor(3))}else this.cursor===0&&(this.pointerSelectStart=s,this.pointerSelected.length>0&&this.pointerSelected.some(r=>L(e,r))?this.pointerCurrent=s:this.pointerSelected=[])});l(this,"mouseUpListener",t=>{if(!(!this.editing&&!this.assigning)){if(this.dragging&&(this.selectStart=this.dragStart,this.selectEnd=this.dragCurrent,this.dragging=!1,this.draw()),this.grabbedItem){const s=this.getGridCoords({x:t.offsetX-this.grabOffset.x,y:t.offsetY-this.grabOffset.y});(s.x!==this.grabbedItem.x||s.y!==this.grabbedItem.y)&&(this.pushUndo({op:"MOVE",objects:[this.grabbedItem],delta:{dx:s.x-this.grabbedItem.x,dy:s.y-this.grabbedItem.y}}),this.grabbedItem.x=s.x,this.grabbedItem.y=s.y),this.grabbedItem=null,this.grabOffset=g,this.grabCurrent=g,this.setCursor(3)}if(this.cursor===0){const s={x:t.offsetX,y:t.offsetY},e=this.getRectFromCorners(this.getGridCoords(this.pointerSelectStart??s),this.getGridCoords(s));if(f(e),this.pointerSelected.length===0)this.pointerSelected=this.getIntersectingObjects(e);else{const r=this.getGridCoords({x:this.pointerCurrent.x-this.pointerSelectStart.x,y:this.pointerCurrent.y-this.pointerSelectStart.y}),h={dx:r.x,dy:r.y};for(let a of this.pointerSelected)a.x+=h.dx,a.y+=h.dy;this.pushUndo({op:"MOVE",objects:[...this.pointerSelected],delta:h})}this.pointerCurrent=null,this.pointerSelectStart=null,this.draw()}if(this.assigning&&(this.cursor===7||this.cursor===1||this.cursor==8)){let s=Object.assign(this.getGridCoords({x:t.offsetX,y:t.offsetY}),{w:0,h:0});(this.pitLabelMode===2||this.pitLabelMode===4||this.cursor==8)&&this.selectStart&&this.selectEnd&&(s=this.getRectFromCorners(this.getGridCoords(this.selectStart),this.getGridCoords(this.selectEnd)),f(s));const e=this.getIntersectingObjects(s).filter(r=>r.type===2);console.log(e,this.cursor,this.pitLabelMode),e.length>0&&(this.cursor==8?this.assign(e,this.pitLabelMode,null):this.pitAssignCallback&&this.pitAssignCallback(e,this.pitLabelMode))}}});l(this,"mouseMoveListener",t=>{const s={x:t.offsetX,y:t.offsetY};this.dragging?(this.dragCurrent=s,this.draw()):this.grabbedItem?(this.grabCurrent=s,this.draw()):this.cursor===0&&this.pointerSelectStart?(this.pointerCurrent=s,this.draw()):(this.dragCurrent=null,(this.cursor===1||this.cursor===6)&&(this.hover=s,this.draw()))});l(this,"mouseLeaveListener",t=>{this.hover=null,this.grabbedItem=null,this.pointerCurrent=null,this.pointerSelectStart=null,this.draw()});const h=document.getElementById(t);if(!h)throw`Element '${t}' not found`;this.canvas=h;const a=this.canvas.getContext("2d");if(!a)throw"Could not build 2d context";this.g=a,this.g.save(),this.minSize=r||!1,this.pitColorCallback=e,this.textSelectCallback=s,this.canvas.addEventListener("click",this.clickListener),this.canvas.addEventListener("mousedown",this.mouseDownListener),this.canvas.addEventListener("mouseup",this.mouseUpListener),this.canvas.addEventListener("mousemove",this.mouseMoveListener),this.canvas.addEventListener("mouseleave",this.mouseLeaveListener),this.draw()}destroy(){this.canvas.removeEventListener("click",this.clickListener),this.canvas.removeEventListener("mousedown",this.mouseDownListener),this.canvas.removeEventListener("mouseup",this.mouseUpListener),this.canvas.removeEventListener("mousemove",this.mouseMoveListener),this.canvas.removeEventListener("mouseleave",this.mouseLeaveListener),this.g.reset()}getObject(t,s,e=!1){const r=t===3||t===4?[3,4]:[t];return{type:this.cellType,x:s.x,y:s.y,w:c.CELL_PROPS[this.cellType].width,h:c.CELL_PROPS[this.cellType].height,label:e&&t===2?this.objects.filter(h=>r.includes(h.type)).length+1+"":null}}getSelectRect(){return{x:this.selectStart.x,y:this.selectStart.y,w:this.selectEnd.x-this.selectStart.x,h:this.selectEnd.y-this.selectStart.y}}drawCursor(){this.cursor===1||this.cursor===0?this.canvas.style.cursor="default":this.cursor===2?this.canvas.style.cursor="cell":this.cursor===3?this.canvas.style.cursor=this.grabbedItem?"grabbing":"grab":this.cursor===4||this.cursor===5?this.canvas.style.cursor="text":this.cursor===6?this.canvas.style.cursor="default":this.cursor===9?this.canvas.style.cursor="help":this.cursor===8?this.canvas.style.cursor="default":this.cursor===7&&(this.canvas.style.cursor="default")}draw(){this.g.save(),this.drawCursor();let t=0,s=0;if(this.minSize){const e=this.getBoundingBox();s=this.CELL_SIZE*e.w,t=this.CELL_SIZE*e.h}else s=this.CELL_SIZE*Math.floor(this.canvas.parentNode.clientWidth/this.CELL_SIZE),t=this.CELL_SIZE*Math.floor(window.innerHeight*.75/this.CELL_SIZE);if(this.canvas.height=t*window.devicePixelRatio,this.canvas.style.height=t+"px",this.canvas.width=s*window.devicePixelRatio,this.canvas.style.width=s+"px",this.g.scale(window.devicePixelRatio,window.devicePixelRatio),this.g.clearRect(0,0,this.canvas.width,this.canvas.height),this.g.lineWidth=this.zoom,this.g.fillStyle="black",this.g.strokeStyle="black",this.editing)for(let e=0;e<2e3*this.zoom;e+=this.CELL_SIZE)for(let r=0;r<2e3*this.zoom;r+=this.CELL_SIZE)this.g.strokeRect(e,r,this.CELL_SIZE,this.CELL_SIZE);for(let e of this.objects){const r=this.editing&&(!!this.grabbedItem&&e===this.grabbedItem||this.pointerSelected.includes(e)&&!!this.pointerCurrent),h=this.pointerSelected.includes(e)&&!this.pointerCurrent;this.drawObject(e,r,h)}if(this.editing){if(this.selectStart&&this.selectEnd){let e=this.getSelectRect();this.snapToGrid(e),this.fillCells(e,"yellow")}if(this.dragging){let e={x:this.dragStart.x,y:this.dragStart.y,w:this.dragCurrent.x-this.dragStart.x,h:this.dragCurrent.y-this.dragStart.y};this.snapToGrid(e),this.fillCells(e,"yellow")}if(this.grabbedItem){let e=Object.assign({},this.grabbedItem,this.getGridCoords({x:this.grabCurrent.x-this.grabOffset.x,y:this.grabCurrent.y-this.grabOffset.y}));this.drawObject(e,!1)}if(this.pointerSelected.length>0&&this.pointerCurrent)for(let e of this.pointerSelected){const r=Object.assign({},e,this.getGridCoords({x:this.CELL_SIZE*e.x+(this.pointerCurrent.x-this.pointerSelectStart.x),y:this.CELL_SIZE*e.y+(this.pointerCurrent.y-this.pointerSelectStart.y)}));this.drawObject(r,!1,!0)}if(this.hover){if(this.cursor===1){let e=this.getObject(this.cellType,this.getGridCoords(this.hover));this.drawObject(e,!0)}else if(this.cursor===6){this.g.strokeStyle="red";for(let e of this.getIntersectingObjects(Object.assign({w:0,h:0},this.getGridCoords(this.hover))))this.g.strokeRect(e.x*this.CELL_SIZE,e.y*this.CELL_SIZE,this.CELL_SIZE*e.w,this.CELL_SIZE*e.h),this.g.strokeRect(e.x*this.CELL_SIZE+1,e.y*this.CELL_SIZE+1,this.CELL_SIZE*e.w-2,this.CELL_SIZE*e.h-2)}}if(this.pointerCurrent&&this.pointerSelected.length===0){let e={x:this.pointerSelectStart.x,y:this.pointerSelectStart.y,w:this.pointerCurrent.x-this.pointerSelectStart.x,h:this.pointerCurrent.y-this.pointerSelectStart.y};this.g.strokeStyle="#0078D7",this.g.fillStyle="rgba(170, 204, 238, .5)",this.g.fillRect(e.x,e.y,e.w,e.h),this.g.strokeRect(e.x,e.y,e.w,e.h)}}else if(this.assigning&&this.dragging){let e={x:this.dragStart.x,y:this.dragStart.y,w:this.dragCurrent.x-this.dragStart.x,h:this.dragCurrent.y-this.dragStart.y};this.g.strokeStyle="#0078D7",this.g.fillStyle="rgba(170, 204, 238, .5)",this.g.fillRect(e.x,e.y,e.w,e.h),this.g.strokeRect(e.x,e.y,e.w,e.h)}this.g.fillStyle="auto"}drawObject(t,s=!1,e=!1){t.type!==6&&this.g.strokeRect(t.x*this.CELL_SIZE,t.y*this.CELL_SIZE,this.CELL_SIZE*t.w,this.CELL_SIZE*t.h);const r=c.CELL_PROPS[t.type];t.type==2&&this.pitColorCallback&&!this.printing?this.g.fillStyle=this.pitColorCallback(t)[0]:t.type===2&&t.color?this.g.fillStyle=t.color:this.g.fillStyle=this.printing?"printColor"in r?r.printColor:r.color:s?r.hoverColor:r.color,t===this.highlighted&&(this.g.fillStyle="cyan"),this.g.fillRect(t.x*this.CELL_SIZE+this.zoom/2,t.y*this.CELL_SIZE+this.zoom/2,this.CELL_SIZE*t.w-this.zoom,this.CELL_SIZE*t.h-this.zoom);let h=Math.round(1.5*this.CELL_SIZE*2/10),a=Math.round(12*this.CELL_SIZE*2/10),n=Math.round(3.5*this.CELL_SIZE*2/10);if(this.g.fillStyle="black",t.type===3?(this.g.strokeRect(t.x*this.CELL_SIZE+h,t.y*this.CELL_SIZE+h,n,a),this.g.strokeRect(t.x*this.CELL_SIZE+h+n+h,t.y*this.CELL_SIZE+h,a,a),this.g.strokeRect(t.x*this.CELL_SIZE+h+n+h+a+h,t.y*this.CELL_SIZE+h,n,a)):t.type===4&&(this.g.strokeRect(t.x*this.CELL_SIZE+h,t.y*this.CELL_SIZE+h,a,n),this.g.strokeRect(t.x*this.CELL_SIZE+h,t.y*this.CELL_SIZE+h+n+h,a,a),this.g.strokeRect(t.x*this.CELL_SIZE+h,t.y*this.CELL_SIZE+h+n+h+a+h,a,n)),t.type===2||r.labelAllowed){let o=t.label;if(t.type===2)switch(this.pitLabelMode){case 1:o=t.label;break;case 2:o=this.getFullAddress(t);break;case 3:o=(t.team?this.displayTeamNumbers[t.team]||t.team:"")+"";break}if(o){let d=o;t.type===2&&this.pitLabelMode===3&&(d="88888");let E=Math.round(.6*Math.min(t.h,t.w)*this.CELL_SIZE);for(this.g.font=E+"px sans-serif";this.g.measureText(d).width>=(t.labelRotated?t.h:t.w)*this.CELL_SIZE-2&&E>0;)E-=2,this.g.font=E+"px sans-serif";this.g.textAlign="center",this.g.textBaseline="middle",t.type==2&&this.pitColorCallback&&!this.printing&&(this.g.fillStyle=this.pitColorCallback(t)[1]);let S=Math.round(this.CELL_SIZE*t.x+this.CELL_SIZE*t.w/2),b=Math.round(this.CELL_SIZE*t.y+this.CELL_SIZE*t.h/2);this.g.save(),this.g.translate(S,b),t.labelRotated&&this.g.rotate(-Math.PI/2),this.g.fillText(o,0,0),this.g.restore()}}if(this.g.fillStyle="black",t.type!==6){const o=this.g.strokeStyle;e&&!s&&(this.g.strokeStyle="cyan",this.g.strokeRect(t.x*this.CELL_SIZE-1,t.y*this.CELL_SIZE-1,this.CELL_SIZE*t.w+2,this.CELL_SIZE*t.h+2)),this.g.strokeRect(t.x*this.CELL_SIZE,t.y*this.CELL_SIZE,this.CELL_SIZE*t.w,this.CELL_SIZE*t.h),this.g.strokeStyle=o}}setCursor(t){this.cursor=t,this.hover=null,this.selectStart=null,[1,2,4,5,6].includes(t)&&(this.pointerSelected=[]),this.draw()}getGridCoords(t){return{x:Math.floor(t.x/this.CELL_SIZE),y:Math.floor(t.y/this.CELL_SIZE)}}snapToGrid(t){f(t);let s=this.CELL_SIZE*Math.ceil((t.x+t.w)/this.CELL_SIZE),e=this.CELL_SIZE*Math.ceil((t.y+t.h)/this.CELL_SIZE);t.x=this.CELL_SIZE*Math.floor(t.x/this.CELL_SIZE),t.y=this.CELL_SIZE*Math.floor(t.y/this.CELL_SIZE),t.w=s-t.x,t.h=e-t.y}fillCells(t,s){let e=this.g.fillStyle;this.g.fillStyle=s;for(let r=t.x;r<t.x+t.w;r+=this.CELL_SIZE)for(let h=t.y;h<t.y+t.h;h+=this.CELL_SIZE)this.g.fillRect(r+1,h+1,this.CELL_SIZE-2,this.CELL_SIZE-2);this.g.fillStyle=e}clearSelect(){this.selectStart=null,this.selectEnd=null,this.draw()}getRectCorners(t){return[this.getGridCoords(t),this.getGridCoords({x:t.x+t.w,y:t.y+t.h})]}getRectFromCorners(t,s){return{x:t.x,y:t.y,w:s.x-t.x,h:s.y-t.y}}setCellType(t){if(this.cellType=t,this.cursor===2&&this.selectStart&&this.selectEnd){let s=this.getSelectRect();this.snapToGrid(s);let[e,r]=this.getRectCorners(s);if(t===0||t===1||t===5||t===6){const h=Object.assign({type:t},this.getRectFromCorners(e,r));this.objects.push(h),this.pushUndo({op:"ADD",objects:[h]}),this.clearSelect()}else if(t===2){let h=this.objects.filter(n=>n.type===t).length+1;const a=[];for(let n=e.y;n<r.y-1;n+=2)for(let o=e.x;o<r.x-1;o+=2){const d={type:t,x:o,y:n,w:2,h:2,label:h+""};this.objects.push(d),a.push(d),h++}this.pushUndo({op:"ADD",objects:a}),this.clearSelect()}}}setEditing(t){this.editing=t,this.draw()}setAssigning(t){this.assigning=t,this.draw()}setZoom(t){t=t??1,this.zoom=t,this.CELL_SIZE=20*t,this.draw()}pushUndo(t){this.undoStack.push(t),this.redoStack=[]}undoRedo(t,s){const e=h=>{switch(h.op){case"ADD":h.op="REMOVE";break;case"REMOVE":h.op="ADD";break;case"SHIFT":case"MOVE":h.delta={dx:h.delta.dx*-1,dy:h.delta.dy*-1};break;case"SET_LABEL":const a=h.old;h.old=h.label,h.label=a;break}return h};let r=t.pop();if(r){switch(r.op){case"ADD":case"REMOVE":for(let h of r.objects)r.op==="ADD"?(h.ind=this.objects.indexOf(h),h.ind>-1&&this.objects.splice(h.ind,1)):r.op==="REMOVE"&&this.objects.splice(h.ind,0,h);r.objects.some(h=>h.type===2)&&this.renumberObjects();break;case"SHIFT":this.performShift({dx:r.delta.dx*-1,dy:r.delta.dy*-1});break;case"SET_LABEL":r.obj.label=r.old;break;case"MOVE":for(let h of r.objects)h.x-=r.delta.dx,h.y-=r.delta.dy;break}s.push(e(r)),this.draw()}}undo(){this.undoRedo(this.undoStack,this.redoStack)}redo(){this.undoRedo(this.redoStack,this.undoStack)}getIntersectingObjects(t){return this.objects.filter(s=>L(t,s))}renumberObjects(){let t=0;for(let s of this.objects)s.type===2&&(s.label=++t+"")}setDisplayTeamNumbers(t){this.displayTeamNumbers=t}setData(t){if(this.objects=t,this.minSize){const s=this.getBoundingBox();for(let e of this.objects)e.x-=s.x,e.y-=s.y}this.draw()}getBoundingBox(){let t=this.objects.length>0?this.objects.reduce((h,a)=>Math.min(h,a.x),99999):0,s=this.objects.length>0?this.objects.reduce((h,a)=>Math.min(h,a.y),99999):0,e=this.objects.length>0?this.objects.reduce((h,a)=>Math.max(h,a.x+a.w),-99999):0,r=this.objects.length>0?this.objects.reduce((h,a)=>Math.max(h,a.y+a.h),-99999):0;return{x:t,y:s,w:e-t,h:r-s}}getData(){const t=this.getBoundingBox();return JSON.parse(JSON.stringify({objects:this.objects,minX:t.x,minY:t.y,width:t.w,height:t.h,numbers:!0,addresses:!0}))}performShift(t){for(let s of this.objects)s.x+=t.dx,s.y+=t.dy;this.draw()}shift(t){const s={up:{dx:0,dy:-1},right:{dx:1,dy:0},down:{dx:0,dy:1},left:{dx:-1,dy:0}}[t];this.pushUndo({op:"SHIFT",delta:s}),this.performShift(s)}setPitClickCallback(t){this.pitClickCallback=t}setPitLabelMode(t){this.pitLabelMode=t,this.draw()}setPitAssignCallback(t){this.pitAssignCallback=t}setIncrement(t){this.increment=t}getIncrement(){return this.increment}setActiveGroup(t){this.activeGroup=t}getActiveGroup(){return this.activeGroup}getPitObjects(){return this.objects.filter(t=>t.type===2)}setAssignError(t){this.assignError=t}assign(t,s,e){if(s===1){const r=t[0];if(r.label===e||r.label===e+""){console.log("Pit set to current value",e);return}const h=this.getPitObjects().filter(o=>o.label===e&&o!==r);if(h.length===0&&this.assignError){this.assignError({errType:c.ERROR_ILLEGAL_NUMBER,number:e,max:this.getPitObjects().length});return}if(h.length>1&&this.assignError){this.assignError({errType:c.ERROR_DUPLICATE_PIT,number:e});return}const a=h[0],n=Object.assign({},a);Object.assign(a,r,{label:e}),Object.assign(r,n,{label:r.label}),this.renumberObjects()}else if(s===2)!e&&e!==null&&(e=null),t.forEach(r=>r.address=e||void 0);else if(s===3){if(t.length>1&&this.assignError){this.assignError({errType:c.ERROR_DUPLICATE_PIT,number:e});return}t[0].team=parseInt(e??"")||void 0}else s===4&&t.forEach(r=>r.color=e||void 0);this.draw()}findTeam(t){const s=parseInt(t);return this.getPitObjects().find(e=>e.team===s)}setHighlighted(t){this.highlighted=t,this.draw()}findPit(t){let s=parseInt(t);return this.getPitObjects().find(e=>parseInt(e.label||"")===s)}getFullAddress(t){return t.address??""}getPitAssignments(){const t={};return this.getPitObjects().forEach(s=>{s.team&&(t[s.team]={number:parseInt(s.label||""),address:this.getFullAddress(s),team:s.team})}),t}getCanvas(){return this.canvas}autoAssignPits(t,s){if(t===3){this.objects.filter(n=>n.type===2).forEach(n=>n.team=void 0),this.draw();return}const e=n=>parseInt(n??"0"),r=this.objects.filter(n=>n.type===2).sort((n,o)=>e(n.label)-e(o.label));let h=s.filter(n=>!r.some(o=>o.team===n)).sort((n,o)=>n-o);t===1?h.reverse():t==2&&(h=h.map(n=>({value:n,sort:Math.random()})).sort((n,o)=>n.sort-o.sort).map(({value:n})=>n));let a=0;for(let n of r)if(!n.team)if(a<h.length)n.team=h[a++];else break;this.draw()}prepareForPrint(){this.printing=!0,this.draw()}donePrinting(){this.printing=!1,this.draw()}};l(c,"CELL_PROPS",{0:{width:1,height:1,color:"white",hoverColor:"rgba(225,225,225,.5)",labelAllowed:!1},1:{width:1,height:1,color:"black",hoverColor:"rgba(0,0,0,.5)",labelAllowed:!1},2:{width:2,height:2,color:"orange",printColor:"white",hoverColor:"rgba(255, 165, 0, .5)",labelAllowed:!1},3:{width:5,height:3,color:"white",hoverColor:"rgba(0, 255, 255, .5)",labelAllowed:!0},4:{width:3,height:5,color:"white",hoverColor:"rgba(0, 255, 255, .5)",labelAllowed:!0},5:{width:1,height:1,color:"white",hoverColor:"rgba(255,255,255,.5)",labelAllowed:!0},6:{width:1,height:1,color:"white",hoverColor:"rgba(200,200,200,.5)",labelAllowed:!0}}),l(c,"ERROR_ILLEGAL_NUMBER",1),l(c,"ERROR_DUPLICATE_PIT",2),l(c,"BASE_CELL_SIZE",20);let u=c;function L(i,t){let s=i.x+i.w<t.x,e=i.x>=t.x+t.w,r=i.y+i.h<t.y,h=i.y>=t.y+t.h;return!(s||e||r||h)}function f(i){i.w<0&&(i.x+=i.w,i.w*=-1),i.h<0&&(i.y+=i.h,i.h*=-1)}export{w as A,I as C,x as L,u as P,p as a};
//# sourceMappingURL=index-vzWIEM6S.js.map
