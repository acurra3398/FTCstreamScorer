import{R as g,r as v,j as e,t as x}from"./client-BvsFx6Uv.js";import{u as V,n as M,o as E,p as L,q as U,t as H,v as K,w as k,x as Q,g as W,l as J,a as X}from"./ViewScript-BEtQd3qk.js";import{u as T}from"./useQuery-BagP8Nrl.js";import{j as Y}from"./javaTypes-BFjjeUw7.js";import{B as j}from"./Button-CplEHJLM.js";import{_ as D,u as S,a as R,c as B}from"./index-CsyH6pUe.js";import"./warning-PI8mi4Hb.js";import{a as Z}from"./hook-ByTrhTT2.js";import{A as ee,e as ae}from"./index-DBycPXkv.js";import{T as O,a as z}from"./ToggleButtonGroup-CAGfgCDu.js";try{let a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new a.Error().stack;r&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[r]="a5b94018-9c3e-4878-8b49-b1abe4a538fa",a._sentryDebugIdIdentifier="sentry-dbid-a5b94018-9c3e-4878-8b49-b1abe4a538fa")}catch{}var ne=["bsPrefix","active","disabled","className","variant","action","as","onClick"],te={variant:void 0,active:!1,disabled:!1},C=g.forwardRef(function(a,r){var n=a.bsPrefix,l=a.active,c=a.disabled,u=a.className,d=a.variant,i=a.action,h=a.as,p=a.onClick,m=D(a,ne);n=S(n,"list-group-item");var o=v.useCallback(function(b){if(c){b.preventDefault(),b.stopPropagation();return}p&&p(b)},[c,p]);return c&&m.tabIndex===void 0&&(m.tabIndex=-1,m["aria-disabled"]=!0),g.createElement(ee,R({ref:r},m,{as:h||(i?m.href?"a":"button":"div"),onClick:o,className:B(u,n,l&&"active",c&&"disabled",d&&n+"-"+d,i&&n+"-action")}))});C.defaultProps=te;C.displayName="ListGroupItem";var se=["className","bsPrefix","variant","horizontal","as"],re={variant:void 0,horizontal:void 0},w=g.forwardRef(function(a,r){var n=Z(a,{activeKey:"onSelect"}),l=n.className,c=n.bsPrefix,u=n.variant,d=n.horizontal,i=n.as,h=i===void 0?"div":i,p=D(n,se),m=S(c,"list-group"),o;return d?o=d===!0?"horizontal":"horizontal-"+d:o=null,g.createElement(ae,R({ref:r},p,{as:h,className:B(l,m,u&&m+"-"+u,o&&m+"-"+o)}))});w.defaultProps=re;w.displayName="ListGroup";w.Item=C;const A={criteria:"",teamName:"",displayTeam:"",team:0,status:Y.NULL},ie=window.FIRST_ENV.projectName=="FTCCloud";function oe({award:a,assignment:r,assignmentCount:n,stealthMode:l,active:c,present:u}){var p,m;const[d,i]=v.useState(!1),h=v.useRef(null);return v.useEffect(()=>{var o;c&&((o=h.current)==null||o.scrollIntoView({behavior:"smooth",block:"center"}))},[c]),e.jsxs(w.Item,{action:!0,variant:"secondary",active:c,ref:h,onClick:o=>{o.target.closest(".peek-btn")||u()},children:[e.jsx("b",{dangerouslySetInnerHTML:{__html:W(a,r.series,n)},className:"ml-4"}),"Â ",!l||d?a.isTeamAward?((p=r.team)==null?void 0:p.displayNumber)+" - "+((m=r.team)==null?void 0:m.name):r.name+(r.team?` (${r.team.displayNumber})`:""):"<Hidden>",l?e.jsx(O,{type:"checkbox",value:d?[1]:[],onChange:o=>i(o.includes(1)),className:"float-right mr-1 peek-btn",children:e.jsx(z,{variant:"light",value:1,className:"btn-xs",children:"Peek"})}):null]})}function de({award:a,assignments:r,stealthMode:n,active:l,activeAssignment:c,presentEntry:u}){const d=v.useRef(null);return v.useEffect(()=>{var i;l&&((i=d.current)==null||i.scrollIntoView({behavior:"smooth",block:"center"}))},[l]),e.jsxs(e.Fragment,{children:[e.jsxs(w.Item,{action:!0,active:l,ref:d,onClick:()=>u(a),children:[e.jsx("b",{children:a.name})," About Award"]}),L(a,r).map(i=>e.jsx(oe,{award:a,assignment:i,assignmentCount:r.length,stealthMode:n,active:c==i,present:()=>u(i)},i.series))]})}function le({advancement:a,stealthMode:r,active:n,present:l,index:c}){const[u,d]=v.useState(!1);return e.jsxs(w.Item,{action:!0,variant:"secondary",active:n,onClick:i=>{i.target.closest(".peek-btn")||l()},children:[e.jsxs("b",{children:["#",c]})," ",!r||u?a.displayTeam+" - "+a.teamName:"<Hidden>",r?e.jsx(O,{type:"checkbox",value:u?[1]:[],onChange:i=>d(i.includes(1)),className:"float-right mr-1 peek-btn",children:e.jsx(z,{variant:"light",value:1,className:"btn-xs",children:"Peek"})}):null]})}function ce({context:a,stealthMode:r,activeEntry:n,presentEntry:l}){const c=v.useRef(null);if(!a.advancementConfig||a.advancementConfig.advancementCount==0)return null;const u=E(a.advancements,a.advancementConfig.advancementCount);return e.jsxs(e.Fragment,{children:[e.jsx(w.Item,{variant:"primary",children:"Advancement presentation:"}),e.jsx(w.Item,{action:!0,active:n==A,ref:c,onClick:()=>l(A),children:e.jsx("b",{children:"Preview Advancement"})}),u.map((d,i)=>e.jsx(le,{index:i+1,advancement:d,stealthMode:r,active:n==d,present:()=>l(d)},i))]})}function ye(){var I,N;const a=T({queryKey:["awards",window.eventCode],queryFn:()=>J(window.eventCode)}),r=T({queryKey:["awardAssignments",window.eventCode],queryFn:async()=>{const t=await X(window.eventCode),s={};return Object.keys(t).forEach(f=>{s[f]=t[f].map(q=>({...q,awardId:f}))}),s}}),n=V(window.eventCode),[l,c]=v.useState(!0),[u,d]=v.useState(-1);if(a.isLoading||r.isLoading||n.isLoading||a.isPending||r.isPending||n.isPending)return e.jsx("div",{children:x`Loading...`});if(a.isError||r.isError||n.isError)return e.jsx("div",{children:x`Error loading data`});const i=a.data.filter(t=>r.data[t.awardId]&&r.data[t.awardId].filter(M).length>0).toSorted((t,s)=>t.displayOrder-s.displayOrder),h=i.filter(t=>!n.data.presentationGroups.some(s=>s.includes(t.awardTypeId))),p=n.data.presentationGroups.map(t=>t.length==0?h:i.filter(s=>t.includes(s.awardTypeId))),m=[...p.flatMap(t=>t.flatMap(s=>[s,L(s,r.data[s.awardId])].flat())),(I=n.data.advancementConfig)!=null&&I.advancementCount?A:null,...E(n.data.advancements,((N=n.data.advancementConfig)==null?void 0:N.advancementCount)||0)].filter(t=>t!=null),o=m[u],b=o&&o.hasOwnProperty("awardTypeId")?o:null,_=o&&o.hasOwnProperty("series")?o:null,F=o&&o.hasOwnProperty("criteria")?o:null;function y(t){const s=m[t];if(s.hasOwnProperty("awardTypeId")){const f=s;k(window.eventCode,f.awardId)}else if(s.hasOwnProperty("series")){const f=s;k(window.eventCode,f.awardId,f.series)}else if(s.hasOwnProperty("criteria")){const f=s;Q(window.eventCode,f.index)}}function G(){d(t=>(y(t-1),t-1))}function $(){d(t=>{let s=t+1;return t<0&&(s=0),y(s),s})}function P(t){const s=m.indexOf(t);d(s),y(s)}return e.jsxs("div",{children:[e.jsx("div",{className:"row justify-content-center",children:e.jsx("h2",{className:"text-center col-10",children:x`Awards/Advancement Presentation`})}),ie?e.jsx("div",{className:"row justify-content-center",children:e.jsx("a",{href:`/event/${window.eventCode}/awards/display`,target:"_blank",rel:"noreferrer",children:x`Open Awards Display`})}):null,e.jsxs("div",{className:"row pt-2 pb-2 sticky-top present-header",children:[e.jsx("div",{className:"col",children:e.jsxs(j,{size:"sm",variant:"secondary",onClick:G,disabled:u<1,children:[e.jsx("i",{className:"fa fa-arrow-up"})," ",x`Previous`]})}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:l,title:"Disable stealth mode to show winners here",onChange:()=>c(t=>!t)})," ",x`Stealth Mode`]}),e.jsxs("div",{className:"col text-right",children:[e.jsx(j,{size:"sm",variant:"warning",className:"mr-2",onClick:()=>U(window.eventCode),children:x`Show Blank/Video`}),e.jsxs(j,{size:"sm",variant:"secondary",onClick:$,disabled:u>=m.length-1,children:[e.jsx("i",{className:"fa fa-arrow-down"})," ",x`Next`]})]})]}),e.jsxs(w,{children:[p.map((t,s)=>e.jsxs(e.Fragment,{children:[e.jsxs(w.Item,{variant:"primary",children:["These awards will be presented ",n.data.allianceCount>2?H[s]:K[s],":"]},`award_group_heading_${s}`),t.map(f=>e.jsx(de,{award:f,assignments:r.data[f.awardId],stealthMode:l,active:b==f,activeAssignment:_,presentEntry:P},f.awardId))]})),e.jsx(ce,{context:n.data,stealthMode:l,activeEntry:F,presentEntry:P})]})]})}export{w as L,ye as P};
//# sourceMappingURL=PresentAwards-BZ6HQI77.js.map
