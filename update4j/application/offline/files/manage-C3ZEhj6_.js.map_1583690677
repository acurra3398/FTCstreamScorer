{"version":3,"file":"manage-C3ZEhj6_.js","sources":["../../../../../../../../.yarn/__virtual__/@tanstack-react-query-virtual-91dad82823/0/cache/@tanstack-react-query-npm-5.56.2-fc27f4cc61-fddf62e987.zip/node_modules/@tanstack/react-query/build/modern/useMutationState.js","../../../../../../../../FTCCommon/src/main/javascript/awards/manage/GiveAwards.tsx","../../../../../../../../FTCCommon/src/main/javascript/awards/manage/ManageAwardsHeader.tsx","../../../../../../../../FTCCommon/src/main/javascript/awards/manage/ManageAwards.tsx","../../../../../../../../FTCCommon/src/main/javascript/awards/manage/SyncAwards.tsx","../../../../../../../../FTCCommon/src/main/javascript/awards/manage/index.tsx"],"sourcesContent":["\"use client\";\n\n// src/useMutationState.ts\nimport * as React from \"react\";\nimport { notifyManager, replaceEqualDeep } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useIsMutating(filters, queryClient) {\n  const client = useQueryClient(queryClient);\n  return useMutationState(\n    { filters: { ...filters, status: \"pending\" } },\n    client\n  ).length;\n}\nfunction getResult(mutationCache, options) {\n  return mutationCache.findAll(options.filters).map(\n    (mutation) => options.select ? options.select(mutation) : mutation.state\n  );\n}\nfunction useMutationState(options = {}, queryClient) {\n  const mutationCache = useQueryClient(queryClient).getMutationCache();\n  const optionsRef = React.useRef(options);\n  const result = React.useRef(null);\n  if (!result.current) {\n    result.current = getResult(mutationCache, options);\n  }\n  React.useEffect(() => {\n    optionsRef.current = options;\n  });\n  return React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => mutationCache.subscribe(() => {\n        const nextResult = replaceEqualDeep(\n          result.current,\n          getResult(mutationCache, optionsRef.current)\n        );\n        if (result.current !== nextResult) {\n          result.current = nextResult;\n          notifyManager.schedule(onStoreChange);\n        }\n      }),\n      [mutationCache]\n    ),\n    () => result.current,\n    () => result.current\n  );\n}\nexport {\n  useIsMutating,\n  useMutationState\n};\n//# sourceMappingURL=useMutationState.js.map","import {\n    addAwardAssignment,\n    listAwardAssignments,\n    listAwardEligibleTeams,\n    listAwards,\n    removeAwardAssignment,\n    setAwardAssignment,\n    submitTeamAwards,\n    unsubmitTeamAwards,\n    useAwardPresentationContext\n} from \"../api\";\nimport {useMutation, useQuery, useQueryClient} from \"@tanstack/react-query\";\nimport {Button, Card, Col, Form, ListGroup, OverlayTrigger, Row, Tooltip} from \"react-bootstrap\";\nimport {t} from \"../../i18n\";\nimport {useEffect, useState} from \"react\";\nimport {Award, AwardAssignment, AwardId} from \"../../javaTypes\";\nimport {getAwardLabel} from \"../utils\";\nimport Select from \"react-select\";\nimport {confirmDialog} from \"first-common/dialogs\";\n\nenum AwardWarningLevel {\n    INFO,\n    WARNING,\n    ERROR\n}\n\ninterface AwardWarning {\n    type: AwardWarningLevel;\n    series: number;\n    message: string;\n    contextMessage: string;\n}\n\nfunction AwardAssignmentEditor({award, assignment, assignments, warnings}: { award: Award, assignment: AwardAssignment, assignments: AwardAssignment[], warnings: AwardWarning[] }) {\n    const [name, setName] = useState(assignment.name)\n    const [team, setTeam] = useState<number | undefined>(assignment.team?.number)\n    const [comment, setComment] = useState(assignment.comment)\n    const queryClient = useQueryClient();\n    useEffect(() => {\n        setName(assignment.name)\n        setTeam(assignment.team?.number)\n        setComment(assignment.comment)\n    }, [award.awardId, assignment.series]);\n\n    const saveAwardMutation = useMutation({\n        mutationFn: async (newValues: { name?: string, team?: number, comment?: string }) => {\n            await setAwardAssignment(window.eventCode, award.awardId, assignment.series, { name, team: team, comment, ...newValues })\n        },\n        onSuccess: async () => {\n            await queryClient.invalidateQueries({queryKey: [\"awardAssignments\", window.eventCode]});\n        }\n    })\n\n    const teamData = useQuery({\n        queryKey: [\"awardTeams\", window.eventCode],\n        queryFn: () => listAwardEligibleTeams(window.eventCode)\n    })\n\n    if(teamData.isLoading || teamData.isPending) {\n        return <div>{t`Loading...`}</div>\n    }\n    if(teamData.isError) {\n        return <div>{t`Error loading teams`}</div>\n    }\n\n    const options = teamData.data.map(t => ({\n        value: t.team.number,\n        label: `${t.team.displayNumber} - ${t.team.name}`,\n        raw: t\n    }));\n\n    const selectedTeam = options.find(t => t.value == team) || null;\n    const awardLabel = getAwardLabel(award, assignment.series, assignments.length);\n    return <>\n        <b>{awardLabel}</b>\n        <Row>\n            {award.isTeamAward ? null : <Form.Group className=\"col-5\" controlId={`${award.awardId}-${assignment.series}-name`}>\n                <Form.Label>{t`Name`}</Form.Label>\n                <Form.Control value={name || ''} onChange={(e) => { setName(e.target.value); saveAwardMutation.mutate({ name: e.target.value })}}/>\n            </Form.Group>}\n            <Form.Group className={award.isTeamAward ? \"col\" : \"col-7\"} controlId={`${award.awardId}-${assignment.series}-team`}>\n                <Form.Label>{award.isTeamAward ? t`Team` : t`Team (optional)`}</Form.Label>\n                <Select options={options} value={selectedTeam} className={warnings.length > 0 ? \"is-invalid\" : \"\"}\n                        isClearable aria-label={`${awardLabel} Team`}\n                        onChange={e => {\n                            setTeam(e?.value);\n                            saveAwardMutation.mutate({ team: e?.value })\n                        }} />\n                <Form.Control.Feedback type=\"invalid\" >\n                    <i className={\"fa fa-exclamation-triangle\"}/> {warnings.map(w => w.contextMessage).join(\", \")}\n                </Form.Control.Feedback>\n            </Form.Group>\n        </Row>\n        {assignment.series == 1 || award.awardTypeId == AwardId.INSPIRE_ID || award.awardTypeId == AwardId.DEANSLIST_ID ? <Form.Group className={\"mt-2\"} controlId={`${award.awardId}-${assignment.series}-team`}>\n            <Form.Label>{t`Judges' Comments`}</Form.Label>\n            <Form.Control as={\"textarea\"} rows={3} onChange={(e) => { setComment(e.target.value); saveAwardMutation.mutate({ comment: e.target.value }) }} value={comment || ''}></Form.Control>\n        </Form.Group> : null}\n    </>;\n}\n\nfunction AwardAssignmentsEditor({award, awardAssignments, warnings}: { award: Award, awardAssignments: AwardAssignment[], warnings: AwardWarning[] }) {\n    const hasWinner = award.isTeamAward && awardAssignments?.[0]?.team || awardAssignments?.[0]?.name\n\n    const queryClient = useQueryClient();\n\n    const addAssignmentMutation = useMutation({\n        mutationFn: async () => {\n            await addAwardAssignment(window.eventCode, award.awardId)\n        },\n        onSuccess: async () => {\n            await queryClient.invalidateQueries({queryKey: [\"awardAssignments\", window.eventCode]});\n        }\n    })\n\n    const removeAssignmentMutation = useMutation({\n        mutationFn: async () => {\n            await removeAwardAssignment(window.eventCode, award.awardId)\n        },\n        onSuccess: async () => {\n            await queryClient.invalidateQueries({queryKey: [\"awardAssignments\", window.eventCode]});\n        }\n    })\n\n    return <Card>\n        <Card.Body>\n            <Card.Title>{award.name}</Card.Title>\n            <Card.Text>{award.script}</Card.Text>\n            <div className={\"mb-3\"}><b>Status</b> {hasWinner ? t`Already given` : (warnings.some(w => w.type == AwardWarningLevel.INFO) ? t`Must be given` : t`Optional`)}</div>\n            {awardAssignments.map(aa => {\n                return <div className={\"mb-3\"} key={aa.series}>\n                    <AwardAssignmentEditor award={award} assignment={aa} assignments={awardAssignments} warnings={warnings.filter(w => w.series == aa.series)} />\n                </div>\n            })}\n            {award.editable || award.awardTypeId == AwardId.DEANSLIST_ID ? <div className={\"mb-3\"}>\n                <Button variant={\"secondary\"} className={\"mr-2\"} onClick={() => {\n                    addAssignmentMutation.mutate();\n                }}>{t`Add slot`}</Button>\n                <Button variant={\"secondary\"} onClick={async () => {\n                    removeAssignmentMutation.mutate();\n                }}>{t`Remove slot`}</Button>\n            </div> : null}\n        </Card.Body>\n    </Card>;\n}\n\nfunction isOfficialTeamAward(award: Award) {\n    // We want to exclude e.g. Compass, Winning Alliance, and any custom awards because those are not covered by\n    // A215 (per staff interpretation) and as non-points-generating awards it doesn't really matter if there are dupes\n    return award.isTeamAward && award.allowManualEntry && award.awardTypeId != AwardId.CUSTOM_ID;\n}\n\nfunction isTAAward(a: Award) {\n    return a.awardTypeId == AwardId.CONNECT_ID || a.awardTypeId == AwardId.REACH_ID || a.awardTypeId == AwardId.SUSTAIN_ID;\n}\n\nfunction isMCIAward(a: Award) {\n    return a.awardTypeId == AwardId.INNOVATE_ID || a.awardTypeId == AwardId.DESIGN_ID || a.awardTypeId == AwardId.CONTROL_ID;\n}\n\nexport default function GiveAwards() {\n    const queryClient = useQueryClient()\n    const awardData = useQuery({\n        queryKey: [\"awards\", window.eventCode],\n        queryFn: () => listAwards(window.eventCode)\n    })\n    const awardAssignmentData = useQuery({\n        queryKey: [\"awardAssignments\", window.eventCode],\n        queryFn: () => listAwardAssignments(window.eventCode)\n    })\n    const teamData = useQuery({\n        queryKey: [\"awardTeams\", window.eventCode],\n        queryFn: () => listAwardEligibleTeams(window.eventCode)\n    })\n    const awardPresentationContext = useAwardPresentationContext(window.eventCode);\n\n    const submitAwardsMutation = useMutation({\n        mutationFn: async ({awards, awardWarnings} : { awards: Award[], awardWarnings: Record<string, AwardWarning[]> }) => {\n            if(Object.values(awardWarnings).some(a => a.length > 0)) {\n                if(!await confirmDialog({\n                    label: t`Confirm Award Submission`,\n                    text: t`There are warnings with the current award assignments. Are you sure you want to submit?` +\n                        `<ul>${awards.map((a) => awardWarnings[a.awardId]?.length > 0 ? `<li><b>${a.name}:</b><br/>${awardWarnings[a.awardId].map(w => w.message).join(\"<br/>\")}</li>` : '').join(\"\")}</ul>`,\n                    buttonText: t`Submit Anyway`\n                })) {\n                    return;\n                }\n            }\n            await submitTeamAwards(window.eventCode)\n        },\n        onSuccess: async () => {\n            await queryClient.invalidateQueries({\n                queryKey: [\"awardPresentationContext\", window.eventCode]\n            })\n        }\n    })\n    const unsubmitAwardsMutation = useMutation({\n        mutationFn: async () => {\n            await unsubmitTeamAwards(window.eventCode)\n        },\n        onSuccess: async () => {\n            await queryClient.invalidateQueries({\n                queryKey: [\"awardPresentationContext\", window.eventCode]\n            })\n        }\n    })\n    const [selectedAward, setSelectedAward] = useState<string | null>(null)\n\n    if(awardData.isLoading || awardAssignmentData.isLoading || awardData.isPending || awardAssignmentData.isPending) {\n        return <div>{t`Loading...`}</div>\n    }\n    if(awardData.isError || awardAssignmentData.isError) {\n        return <div>{t`Error`}</div>\n    }\n\n    const editableAwards = awardData.data.filter(a => a.allowManualEntry).toSorted((a, b) => a.order - b.order);\n\n    const awardWarnings: Record<string, AwardWarning[]> = Object.fromEntries(editableAwards.map(a => {\n        const requiredRange = Array.from({ length: a.requiredCount },(v,k) => k+1)\n        const ret: AwardWarning[] = []\n        if(isOfficialTeamAward(a)) {\n            const possibleDuplicates = awardData.data.filter(a2 => isOfficialTeamAward(a2))\n            awardAssignmentData.data[a.awardId].forEach(myAssignment => {\n                if(!myAssignment.team) return\n                const otherAssignments =  possibleDuplicates.flatMap(a => (awardAssignmentData.data[a.awardId] ?? []).map(aa => ({ ...aa, award: a })))\n                    .filter((assignment) => !(assignment.award.awardId == a.awardId && assignment.series == myAssignment.series))\n                const duplicateAssignments = otherAssignments.filter(aa2 => aa2.team?.number == myAssignment.team?.number)\n                duplicateAssignments.forEach(assignment => {\n                    const myLabel = getAwardLabel(a, myAssignment.series, awardAssignmentData.data[a.awardId].length);\n                    const theirLabel = getAwardLabel(assignment.award, assignment.series, awardAssignmentData.data[assignment.award.awardId].length)\n                    ret.push({\n                        type: AwardWarningLevel.WARNING,\n                        series: myAssignment.series,\n                        message: t`Duplicate ${myLabel} with ${assignment.award.name} ${theirLabel}`,\n                        contextMessage: t`Duplicate with ${assignment.award.name} ${theirLabel}`,\n                    })\n                })\n            })\n\n            // These are all team awards, so we can just check for team to know if it has been assigned\n            const missingRequiredAssignments = requiredRange.filter(series => awardAssignmentData.data[a.awardId].filter(aa => aa.series == series && aa.team).length == 0)\n            missingRequiredAssignments.forEach(series => {\n                const myLabel = getAwardLabel(a, series, awardAssignmentData.data[a.awardId].length);\n                ret.push({\n                    type: AwardWarningLevel.INFO,\n                    series,\n                    message: t`Missing required ${myLabel}`,\n                    contextMessage: t`Required`\n                })\n            })\n\n            const winner = awardAssignmentData.data[a.awardId]?.find(aa => aa.series == 1)\n            const isInspireIneligible = a.awardTypeId == AwardId.INSPIRE_ID && winner?.team && !teamData.data?.find(t => t.team.number == winner.team?.number)?.inspireEligible;\n            if(isInspireIneligible) {\n                ret.push({\n                    type: AwardWarningLevel.ERROR,\n                    series: 1,\n                    message: t`Inspire award winner ineligible!`,\n                    contextMessage: t`Ineligible for Inspire!`\n                })\n            }\n        }\n\n        return [a.awardId, ret];\n    }))\n\n    // Check TA and MCI for tiny events\n    // At tiny events we make these normally required awards all have a required count of 0 so that the end of event\n    // submission doesn't flag them as empty, but we still actually need one of the three\n    const taAwards = editableAwards.filter(a => isTAAward(a));\n    const mciAwards = editableAwards.filter(a => isMCIAward(a));\n    if(taAwards.every(a => a.requiredCount == 0)) {\n        const taAwardsWithWinners = taAwards.filter(a => awardAssignmentData.data[a.awardId].some(a => a.series == 1 && a.team));\n        if (taAwardsWithWinners.length == 0) {\n            taAwards.forEach(a => {\n                awardWarnings[a.awardId].push({\n                    type: AwardWarningLevel.INFO,\n                    series: 1,\n                    message: t`One TA Award (Connect, Reach, or Sustain) must be given`,\n                    contextMessage: t`One TA Award (Connect, Reach, or Sustain) must be given`\n                })\n            })\n        } else if (taAwardsWithWinners.length > 1) {\n            taAwardsWithWinners.forEach(a => {\n                awardWarnings[a.awardId].push({\n                    type: AwardWarningLevel.ERROR,\n                    series: 1,\n                    message: t`Only one TA Award (Connect, Reach, or Sustain) may be given`,\n                    contextMessage: t`Multiple TA awards given!`\n                })\n            })\n        }\n    }\n\n    if(mciAwards.every(a => a.requiredCount == 0)) {\n        const mciAwardsWithWinners = mciAwards.filter(a => awardAssignmentData.data[a.awardId].some(a => a.series == 1 && a.team));\n        if(mciAwardsWithWinners.length == 0) {\n            mciAwards.forEach(a => {\n                awardWarnings[a.awardId].push({\n                    type: AwardWarningLevel.INFO,\n                    series: 1,\n                    message: t`One MCI Award (Design, Innovate, or Control) must be given`,\n                    contextMessage: t`One MCI Award (Design, Innovate, or Control) must be given`\n                })\n            })\n        } else if(mciAwardsWithWinners.length > 1) {\n            mciAwardsWithWinners.forEach(a => {\n                awardWarnings[a.awardId].push({\n                    type: AwardWarningLevel.ERROR,\n                    series: 1,\n                    message: t`Only one MCI Award (Design, Innovate, or Control) may be given`,\n                    contextMessage: t`Multiple MCI awards given!`\n                })\n            })\n        }\n    }\n\n    return <div>\n        <Row>\n            <Col sm={10}>\n                <h2>{t`Enter Awards`}</h2>\n            </Col>\n            {window.FIRST_ENV.projectName == 'FTCCloud' ? null : <Col sm={2}>\n                {/* TODO unsubmit */}\n                <Button variant={awardPresentationContext.data?.areTeamAwardsSubmitted ? \"warning\" : (Object.values(awardWarnings).some(a => a.length > 0) ? \"danger\" : \"primary\")} className={\"float-end\"} onClick={() => awardPresentationContext.data?.areTeamAwardsSubmitted ? unsubmitAwardsMutation.mutate() : submitAwardsMutation.mutate({ awards: editableAwards, awardWarnings })}>\n                    {awardPresentationContext.data?.areTeamAwardsSubmitted ? t`Unsubmit Awards` : t`Submit Awards`}\n                </Button>\n            </Col>}\n        </Row>\n        <Row>\n            <Col lg={4}>\n                <ListGroup>\n                    {editableAwards.map(((a) => {\n                        const warnings = awardWarnings[a.awardId] ?? [];\n                        const winner = awardAssignmentData.data[a.awardId]?.find(aa => aa.series == 1)\n                        const hasWinner = a.isTeamAward && winner?.team || winner?.name\n                        return <ListGroup.Item key={a.awardId} action eventKey={a.awardId} onClick={() => setSelectedAward(a.awardId)}\n                                               variant={hasWinner ? (warnings.some(w => w.type == AwardWarningLevel.ERROR) ? \"danger\" : (warnings.some(w => w.type == AwardWarningLevel.WARNING) ? \"warning\" : \"success\")) : (warnings.some(w => w.type == AwardWarningLevel.INFO) ? \"primary\" : \"secondary\")}\n                                               active={selectedAward == a.awardId}>\n                            {a.name} {warnings?.length > 0 ? <OverlayTrigger\n                                    placement=\"right\"\n                                    overlay={\n                                        <Tooltip id={`${a.awardId}-warning-tooltip`}>\n                                            <div className={\"text-left\"}>\n                                                {warnings.map((w, idx) => <p key={idx} className={idx == warnings.length - 1 ? \"mb-0\" : \"\"}>{w.message}</p>)}\n                                            </div>\n                                        </Tooltip>\n                                    }\n                                >\n                                    <i className={\"fa fa-exclamation-triangle float-right text-body\"}/>\n                                </OverlayTrigger> : null}<br/>\n                            {a.awardTypeId != AwardId.DEANSLIST_ID ? (hasWinner ? (a.isTeamAward ? `${winner.team?.displayNumber} ${winner.team?.name}` : (winner.team ? `${winner.name} - ${winner.team.displayNumber} ${winner.team.name}` : winner.name)) : t`NOT GIVEN`) : null}<br/>\n                        </ListGroup.Item>\n                    }))}\n                </ListGroup>\n            </Col>\n            <Col lg={8}>\n                {selectedAward ? <AwardAssignmentsEditor award={awardData.data.find(a => a.awardId == selectedAward)!} awardAssignments={awardAssignmentData.data[selectedAward]} warnings={awardWarnings[selectedAward] ?? []}/> : <div>{t`Select an award to edit`}</div>}\n            </Col>\n        </Row>\n    </div>\n}","import {t} from \"../../i18n\";\nimport {normalizeUrl} from \"../../utils\";\nimport {Button, Nav} from \"react-bootstrap\";\nimport {jt} from \"ttag\";\n\nconst isCloud = window.FIRST_ENV.projectName == 'FTCCloud'\nexport const giveAwardsUrl = normalizeUrl(`/event/${window.eventCode}${isCloud ? '' : '/dashboard'}/awards/give_awards`)\nconst manageAwardsUrl = normalizeUrl(`/event/${window.eventCode}/dashboard/awards/manage_awards/`)\nconst viewOpeningScriptUrl = normalizeUrl(`/event/${window.eventCode}${isCloud ? '' : '/dashboard'}/awards/view_opening_script`)\nconst viewScriptUrl = normalizeUrl(`/event/${window.eventCode}${isCloud ? '' : '/dashboard'}/awards/view_script`)\nconst presentAwardsUrl = normalizeUrl(`/event/${window.eventCode}${isCloud ? '' : '/dashboard'}/awards/present_awards`)\nconst dataTransferUrl = normalizeUrl(`/event/${window.eventCode}/dashboard/awards/data_transfer`)\n\nexport default function ManageAwardsHeader() {\n    const firstTag = <i>FIRST</i>\n\n    return <div className=\"text-center d-print-none\">\n        {window.eventArchived ?\n            <div className=\"col-md-6 offset-md-3\">\n                <div className=\"form-group\">\n                    {jt`This event has been archived and uploaded to ${firstTag}.`}<br/>\n                    {jt`If you need to make any changes, please contact ${firstTag} event help.`}\n                    <hr />\n                </div>\n            </div> : null}\n        <h1>{t`Awards Manager`}</h1>\n        <h5 className=\"col-12\">[{window.eventCode}] {window.eventName}</h5>\n\n        <br/>\n        <Nav variant=\"pills\" className={\"mb-4\"}>\n            <Nav.Item>\n                <Button className={\"mr-2\"} variant={\"dark\"} href={`/event/${window.eventCode}/`}>{t`Exit`}</Button>\n            </Nav.Item>\n            {isCloud ?  <>\n                <Nav.Item>\n                    <Nav.Link href={`/sync/awards/${window.eventCode}`}>{t`Export Awards`}</Nav.Link>\n                </Nav.Item>\n                <Nav.Item>\n                    <Nav.Link href={`/event/${window.eventCode}/awards/eligibility`}>{t`Eligibility`}</Nav.Link>\n                </Nav.Item>\n            </> : <>\n                <Nav.Item>\n                    <Nav.Link active={window.location.pathname == manageAwardsUrl} href={manageAwardsUrl}>{t`Manage Awards`}</Nav.Link>\n                </Nav.Item>\n                <Nav.Item>\n                    <Nav.Link active={window.location.pathname == dataTransferUrl} href={dataTransferUrl}>{t`Import/Export`}</Nav.Link>\n                </Nav.Item>\n            </>}\n            <Nav.Item>\n                <Nav.Link active={window.location.pathname == giveAwardsUrl} href={giveAwardsUrl}>{t`Enter Awards`}</Nav.Link>\n            </Nav.Item>\n            <Nav.Item>\n                <Nav.Link active={window.location.pathname == viewOpeningScriptUrl} href={viewOpeningScriptUrl}>{t`Opening Script`}</Nav.Link>\n            </Nav.Item>\n            <Nav.Item>\n                <Nav.Link active={window.location.pathname == viewScriptUrl} href={viewScriptUrl}>{t`Playoff Awards Script`}</Nav.Link>\n            </Nav.Item>\n            {window.canPresent ? <>\n                <Nav.Item>\n                    <Nav.Link active={window.location.pathname == presentAwardsUrl} href={presentAwardsUrl}>{t`Present Awards/Advancement`}</Nav.Link>\n                </Nav.Item>\n            </> : null}\n        </Nav>\n    </div>\n}","import {createAward, deleteAward, listAwards, saveAward, swapAwards} from \"../api\";\nimport {useMutation, useQuery, useQueryClient} from \"@tanstack/react-query\";\nimport {Button, Card, Form} from \"react-bootstrap\";\nimport {t} from \"../../i18n\";\nimport {useEffect, useState} from \"react\";\nimport {Award, AwardId} from \"../../javaTypes\";\nimport {confirmDialog} from \"first-common/dialogs\";\n\nfunction AwardEditor({award, moveUp, moveDown, close}: {\n    award?: Award, moveUp?: () => void, moveDown?: () => void, close?: () => void\n}) {\n    const [isEditing, setIsEditing] = useState(!award);\n    const [isTeamAward, setIsTeamAward] = useState(award?.isTeamAward || false);\n    const [name, setName] = useState(award?.name || '');\n    const [script, setScript] = useState(award?.script || '');\n    const queryClient = useQueryClient();\n\n    // On toggle of editing, reset back to the value in the underlying object\n    useEffect(() => {\n        setIsTeamAward(award?.isTeamAward || false)\n        setName(award?.name || '')\n        setScript(award?.script || '')\n    }, [award, isEditing]);\n\n    const createAwardMutation = useMutation({\n        mutationFn: async ({isTeamAward, name, script}: {isTeamAward: boolean, name: string, script: string}) => {\n            await createAward(window.eventCode, isTeamAward, name, script)\n        },\n        onSuccess: async () => {\n            await queryClient.invalidateQueries({ queryKey: [\"awards\", window.eventCode] });\n        }\n    })\n\n    const saveAwardMutation = useMutation({\n        mutationFn: async ({awardId, isTeamAward, name, script}: {awardId: string, isTeamAward: boolean, name: string, script: string}) => {\n            await saveAward(window.eventCode, awardId, isTeamAward, name, script)\n        },\n        onSuccess: async () => {\n            await queryClient.invalidateQueries({ queryKey: [\"awards\", window.eventCode] });\n        }\n    })\n\n    const deleteAwardMutation = useMutation({\n        mutationFn: async ({awardId}: {awardId: string}) => {\n            await deleteAward(window.eventCode, awardId);\n        },\n        onSuccess: async () => {\n            await queryClient.invalidateQueries({ queryKey: [\"awards\", window.eventCode] });\n        }\n    })\n\n    return <Card className={\"mb-2\"}>\n        <Card.Header className={\"d-flex align-items-center justify-content-between\"}>\n            {isEditing ? <Form.Control style={{width: 'auto'}} value={name} onChange={e => setName(e.target.value)} /> : name}\n            <div className={\"d-flex align-items-center\"}>\n                <Form.Check type=\"checkbox\" checked={isTeamAward} id={`award-${award?.awardId || 'creatingNew'}-isTeamAward`}\n                            label={t`Team Award?`} className={\"mr-3\"} disabled={!isEditing} onChange={(e) => setIsTeamAward(e.target.checked)} />\n                {award?.editable || !award ? (isEditing ? <>\n                        <Button variant={\"secondary\"} onClick={() => {\n                            if(award) {\n                                setIsEditing(false)\n                            } else if(close) {\n                                close()\n                            }\n                        }}>{t`Cancel`}</Button>\n                        <Button className={\"ml-2\"} onClick={async () => {\n                            if(award) {\n                                saveAwardMutation.mutate({ awardId: award.awardId, isTeamAward, name, script }, {\n                                    onSuccess: () => {\n                                        setIsEditing(false)\n                                    }\n                                })\n                            } else {\n                                createAwardMutation.mutate({ isTeamAward, name, script }, {\n                                    onSuccess: () => {\n                                        if(close) {\n                                            close()\n                                        }\n                                    }\n                                })\n                            }\n                        }}>{t`Save`}</Button>\n                    </> : <>\n                        <Button onClick={() => setIsEditing(true)}>{t`Edit`}</Button>\n                        {/* Prevent deleting built-in awards */}\n                        {award?.awardTypeId == AwardId.CUSTOM_ID ? <Button variant={\"danger\"} className={\"ml-2\"}\n                            onClick={async (e) => {\n                                if(!await confirmDialog({\n                                    label: t`Delete Award?`,\n                                    text: t`Are you sure you want to delete the \"${award.name}\" award? This cannot be undone.`,\n                                    buttonText: t`Delete`,\n                                })) {\n                                    return\n                                }\n                                deleteAwardMutation.mutate({ awardId: award.awardId });\n                            }}>{t`Delete`}</Button> : null}\n                    </>): null}\n                {moveUp || moveDown ? <>\n                    <Button variant={\"secondary\"} disabled={!moveUp} className={\"ml-2\"} onClick={async () => {\n                        if(!moveUp) {\n                            return\n                        }\n                        moveUp()\n                    }}><i className={\"fa fa-arrow-up\"}></i></Button>\n                    <Button variant={\"secondary\"} disabled={!moveDown} className={\"ml-1\"} onClick={async () => {\n                        if(!moveDown) {\n                            return\n                        }\n                        moveDown()\n                    }}><i className={\"fa fa-arrow-down\"}></i></Button>\n                </> : null}\n            </div>\n        </Card.Header>\n        <Card.Body>\n            <Form.Control as=\"textarea\" rows={4} value={script} onChange={(e) => setScript(e.target.value)} readOnly={!isEditing}/>\n        </Card.Body>\n    </Card>;\n}\n\nexport default function ManageAwards() {\n    const awardData = useQuery({\n        queryKey: [\"awards\", window.eventCode],\n        queryFn: () => listAwards(window.eventCode)\n    })\n    const [creatingNew, setCreatingNew] = useState(false);\n\n    const queryClient = useQueryClient();\n    const swapAwardsMigration = useMutation({\n        mutationFn: async ({id1, id2}: {id1: string, id2: string}) => {\n            await swapAwards(window.eventCode, id1, id2)\n        },\n        onSuccess: async () => {\n            await queryClient.invalidateQueries({ queryKey: [\"awards\", window.eventCode] });\n        }\n    })\n\n    if(awardData.isLoading || awardData.isPending ) {\n        return <div>{t`Loading...`}</div>\n    }\n    if(awardData.isError) {\n        return <div>{t`Error`}</div>\n    }\n\n    const sortedAwards = [...awardData.data].sort((a, b) => a.order - b.order)\n\n    return <div>\n        <h2>{t`Manage Awards`}</h2>\n        {t`Presented in order listed. Only custom awards can be reordered.`}<br/>\n        {creatingNew ? <AwardEditor close={() => setCreatingNew(false)} /> : <Button className={\"mb-3\"} onClick={() => setCreatingNew(true)}>{t`Create New Award`}</Button>}\n        {sortedAwards.map((award, idx) => <AwardEditor key={award.awardId} award={award}\n            moveUp={idx > 0 && award.awardTypeId == AwardId.CUSTOM_ID ? () => swapAwardsMigration.mutate({ id1: sortedAwards[idx - 1].awardId, id2: award.awardId }) : undefined}\n            moveDown={idx < sortedAwards.length - 1 && award.awardTypeId == AwardId.CUSTOM_ID && sortedAwards[idx + 1].awardTypeId == AwardId.CUSTOM_ID ?\n                () => swapAwardsMigration.mutate({ id1: award.awardId, id2: sortedAwards[idx + 1].awardId }) : undefined}\n        />)}\n    </div>\n}","import {t} from \"../../i18n\";\nimport {giveAwardsUrl} from \"./ManageAwardsHeader\";\nimport {jt} from \"ttag\";\nimport {Button, Form} from \"react-bootstrap\";\nimport {ChangeEvent, useState} from \"react\";\nimport { confirmDialog, messageDialog } from \"first-common/dialogs\";\nimport {useAwardPresentationContext} from \"../api\";\n\nasync function handleError(status: number, message?: string) {\n    if (status === 409) {\n        return await confirmDialog({\n            label: t`Awards Import Warning`,\n            text: message || '',\n            buttonText: t`Continue`,\n        })\n    } else if (status === 404) {\n        messageDialog({\n            label: t`Awards Import Error`,\n            text: message + t` Cannot import this award data.`\n        })\n    } else if(status == 400) {\n        messageDialog({\n            label: t`Awards Import Error`,\n            text: t`The file imported is not in a supported format.<br/><br/>For immediate resolution, please enter the awards directly using the <a href='../give_awards/'>Give Awards</a> tab. For support, please contact the developers of the software which generated the file.`,\n            dangerous: true\n        })\n    } else {\n        messageDialog({\n            label: t`Awards Import Error`,\n            text: t`An error occurred during award import.<br/><br/>For immediate resolution, please enter the awards directly using the <a href='../give_awards/'>Give Awards</a> tab. Please notify support of this issue through the support chat or file an issue on GitHub.`,\n            dangerous: true\n        })\n    }\n    return false;\n}\n\nexport default function SyncAwards() {\n    const enterAwardsLink = <a key=\"enterAwards\" href={giveAwardsUrl}>{t`Enter Awards tab`}</a>\n    const [selectedFile, setSelectedFile] = useState<File | null>(null);\n    const presentationContext = useAwardPresentationContext(window.eventCode);\n    const eventKeyValid = presentationContext?.data?.isSyncConfigured;\n\n    async function sync() {\n        const initialRequest = await fetch(\"../sync/\", {\n            method: \"POST\",\n        })\n        if(initialRequest.ok) {\n            window.location.href = \"../give_awards/\";\n            return\n        }\n        if(await handleError(initialRequest.status, await initialRequest.text())) {\n            const secondRequest = await fetch(\"../sync/?confirmed=true\", {\n                method: \"POST\",\n            })\n            if(secondRequest.ok) {\n                window.location.href = \"../give_awards/\";\n            } else {\n                await handleError(secondRequest.status, await secondRequest.text());\n            }\n        }\n    }\n\n    async function importAwards() {\n        if(!selectedFile) {\n            return;\n        }\n        const formData = new FormData();\n        formData.append(\"uploaded_file\", selectedFile);\n        const initialRequest = await fetch(\"../import/\", {\n            method: \"POST\",\n            body: formData,\n        })\n        if(initialRequest.ok) {\n            window.location.href = \"../give_awards/\";\n            return\n        }\n        if(await handleError(initialRequest.status, await initialRequest.text())) {\n            const secondRequest = await fetch(\"../import/?confirmed=true\", {\n                method: \"POST\",\n                body: formData,\n            })\n            if(secondRequest.ok) {\n                window.location.href = \"../give_awards/\";\n            } else {\n                await handleError(secondRequest.status, await secondRequest.text());\n            }\n        }\n    }\n\n    return <div>\n        <h2>{t`Import/Export Awards`}</h2>\n        <br/>\n        <h6 className=\"text-center\">{jt`After a successful sync/import, be sure to validate the data on the ${enterAwardsLink}.`}</h6>\n        <div className={\"d-flex flex-column align-items-center\"}>\n            <div className={\"w-100\"}>\n                <hr/>\n            </div>\n            <Button variant={\"secondary\"} onClick={sync} disabled={!eventKeyValid} title={t`No valid Event Key`}>{t`Sync From Online Scoring System`}</Button>\n            <div className={\"w-100\"}>\n                <hr/>\n            </div>\n            <Button variant={\"secondary\"} href=\"../export/\">{t`Export Awards`}</Button>\n            <div className={\"w-100\"}>\n                <hr/>\n            </div>\n            <div className={\"d-flex align-items-center\"}>\n                <Form.File style={{width: '400px'}} custom label={selectedFile?.name || 'Select a file'} onChange={(e: ChangeEvent<HTMLInputElement>) => setSelectedFile(e.target.files ? e.target.files[0] : null)} />\n                <Button variant={\"secondary\"} className=\"ml-2\" onClick={importAwards} disabled={!selectedFile}>{t`Import Awards`}</Button>\n            </div>\n        </div>\n    </div>\n}","import {createRoot} from \"react-dom/client\";\nimport {QueryClient, QueryClientProvider, useIsMutating} from \"@tanstack/react-query\";\nimport GiveAwards from \"./GiveAwards\";\nimport {ViewClosingScript, ViewOpeningScript} from \"../ViewScript\";\nimport {FTCConstants} from \"../../javaTypes\";\nimport PresentAwards from \"./PresentAwards\";\nimport ManageAwardsHeader from \"./ManageAwardsHeader\";\nimport ManageAwards from \"./ManageAwards\";\nimport SyncAwards from \"./SyncAwards\";\nimport {Alert} from \"react-bootstrap\";\nimport {ComponentType, useEffect, useState} from \"react\";\nimport {t} from \"../../i18n\";\n\ndeclare global {\n    interface Window {\n        eventCode: string;\n        eventName: string;\n        eventArchived: boolean;\n        canPresent: boolean;\n        ftcConstants: FTCConstants;\n    }\n}\n\n// Should never be hit, but more useful than a null fallback\nfunction NotFoundPage() {\n    return <div>\n        404 Not Found\n    </div>\n}\n\nfunction EditPendingIndicator() {\n    const isMutating = useIsMutating()\n    const [showSavingIndicator, setShowSavingIndicator] = useState(isMutating > 0)\n\n    useEffect(() => {\n        if(isMutating > 0) {\n            setShowSavingIndicator(true)\n        } else {\n            // Delay hiding \"saving\" for better user experience\n            const timeout = setTimeout(() => setShowSavingIndicator(false), 500);\n            return () => clearTimeout(timeout);\n        }\n    }, [isMutating]);\n\n    return <div style={{\n        position: 'fixed',\n        bottom: 0,\n        right: 0,\n        width: '12em',\n        zIndex: 1000,\n        padding: '10px',\n        textAlign: 'center'\n    }}>\n        <Alert variant={showSavingIndicator ? 'info' : 'success'}>\n            {showSavingIndicator ? <><i className=\"fa fa-spinner fa-spin\" /> {t`Saving...`}</> : <><i className=\"fa fa-check\" /> {t`All edits saved`}</>}\n        </Alert>\n    </div>\n}\n\nconst container = document.getElementById('reactContainer');\nconst queryClient = new QueryClient();\nif(!container) {\n    console.error(\"Mount point for runtime container not found\")\n} else {\n    const root = createRoot(container);\n\n    let Component: ComponentType = NotFoundPage;\n    // Filter out local trailing slashes\n    const page = document.location.pathname.split('/').filter(x => x.length > 0).pop();\n    if(page === 'give_awards') {\n        Component = GiveAwards;\n    } else if(page === 'view_opening_script') {\n        Component = ViewOpeningScript;\n    } else if(page === 'view_script') {\n        Component = ViewClosingScript;\n    } else if(page === 'present_awards') {\n        Component = PresentAwards;\n    } else if(page === 'manage_awards') {\n        Component = ManageAwards;\n    } else if(page === 'data_transfer') {\n        Component = SyncAwards;\n    } else {\n        throw new Error(`Unknown page: ${page}`);\n    }\n    root.render(<QueryClientProvider client={queryClient}>\n        <ManageAwardsHeader />\n        <Component />\n        { page == 'give_awards' || page == 'manage_awards' ? <EditPendingIndicator /> : null }\n    </QueryClientProvider>);\n}"],"names":["useIsMutating","filters","queryClient","client","useQueryClient","useMutationState","getResult","mutationCache","options","mutation","optionsRef","React.useRef","result","React.useEffect","React.useSyncExternalStore","React.useCallback","onStoreChange","nextResult","replaceEqualDeep","notifyManager","AwardAssignmentEditor","award","assignment","assignments","warnings","name","setName","useState","team","setTeam","_a","comment","setComment","useEffect","saveAwardMutation","useMutation","newValues","setAwardAssignment","teamData","useQuery","listAwardEligibleTeams","jsx","t","selectedTeam","awardLabel","getAwardLabel","jsxs","Fragment","Row","Form","e","Select","w","AwardId","AwardAssignmentsEditor","awardAssignments","hasWinner","_b","addAssignmentMutation","addAwardAssignment","removeAssignmentMutation","removeAwardAssignment","Card","aa","Button","isOfficialTeamAward","isTAAward","a","isMCIAward","GiveAwards","awardData","listAwards","awardAssignmentData","listAwardAssignments","awardPresentationContext","useAwardPresentationContext","submitAwardsMutation","awards","awardWarnings","confirmDialog","submitTeamAwards","unsubmitAwardsMutation","unsubmitTeamAwards","selectedAward","setSelectedAward","editableAwards","b","requiredRange","v","k","ret","possibleDuplicates","a2","myAssignment","aa2","myLabel","theirLabel","series","winner","_c","taAwards","mciAwards","taAwardsWithWinners","mciAwardsWithWinners","Col","ListGroup","OverlayTrigger","Tooltip","idx","isCloud","giveAwardsUrl","normalizeUrl","manageAwardsUrl","viewOpeningScriptUrl","viewScriptUrl","presentAwardsUrl","dataTransferUrl","ManageAwardsHeader","firstTag","jt","Nav","AwardEditor","moveUp","moveDown","close","isEditing","setIsEditing","isTeamAward","setIsTeamAward","script","setScript","createAwardMutation","createAward","awardId","saveAward","deleteAwardMutation","deleteAward","ManageAwards","creatingNew","setCreatingNew","swapAwardsMigration","id1","id2","swapAwards","sortedAwards","handleError","status","message","messageDialog","SyncAwards","enterAwardsLink","selectedFile","setSelectedFile","presentationContext","eventKeyValid","sync","initialRequest","secondRequest","importAwards","formData","NotFoundPage","EditPendingIndicator","isMutating","showSavingIndicator","setShowSavingIndicator","timeout","Alert","container","QueryClient","root","createRoot","Component","page","x","ViewOpeningScript","ViewClosingScript","PresentAwards","QueryClientProvider"],"mappings":"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","x_google_ignoreList":[0]}